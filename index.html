<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ganesh Dai Academy - Grade 11 & 12 Study Hub</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet" />
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- html2canvas for downloads -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary-500: #14b8a6;
            --primary-600: #0d9488;
            --warning-500: #f59e0b;
            --danger-500: #ef4444;
        }
        
        body { 
            font-family: 'Inter', system-ui, sans-serif; 
            background-color: #f8fafc; 
            margin: 0;
            padding: 0;
        }
        .dark body { background-color: #0f172a; }
        h1, h2, h3, h4, h5, h6, .font-display { font-family: 'Poppins', sans-serif; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fadeIn { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes popIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .animate-popIn { animation: popIn 0.4s ease-out forwards; }
        @keyframes slideInUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .slide-in-up { animation: slideInUp 0.5s ease-out forwards; }
        @keyframes slideInDown { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .animate-slideInDown { animation: slideInDown 0.5s ease-out forwards; }
        @keyframes slideInLeft { from { transform: translateX(-20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .animate-slideInLeft { animation: slideInLeft 0.5s ease-out forwards; }
        @keyframes slideInRight { from { transform: translateX(20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .animate-slideInRight { animation: slideInRight 0.5s ease-out forwards; }
        @keyframes tada { 
            0% { transform: scale(1); } 
            10%, 20% { transform: scale(0.9) rotate(-3deg); } 
            30%, 50%, 70%, 90% { transform: scale(1.1) rotate(3deg); } 
            40%, 60%, 80% { transform: scale(1.1) rotate(-3deg); } 
            100% { transform: scale(1) rotate(0); } 
        }
        .animate-tada { animation: tada 1s ease-in-out; }
        
        .gradient-button { 
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600)); 
            color: white; 
            transition: all .3s ease; 
            box-shadow: 0 4px 6px -1px rgba(13, 148, 136, 0.2);
        }
        .gradient-button:hover:not(:disabled) { 
            transform: translateY(-2px); 
            box-shadow: 0 8px 20px rgba(13, 148, 136, .3); 
        }
        
        .nav-link { transition: all .2s ease-in-out; }
        .nav-link.active { 
            color: var(--primary-500); 
            background-color: rgba(20, 184, 166, 0.1); 
            font-weight: 600; 
        }
        .dark .nav-link.active { 
            color: #5eead4; 
            background-color: rgba(30, 41, 59, 0.8); 
        }
        .nav-link:not(.active):hover { background-color: #f1f5f9; }
        .dark .nav-link:not(.active):hover { background-color: #1e293b; }

        .overlay { 
            position: fixed; 
            inset: 0; 
            background-color: rgba(0,0,0,.7); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            z-index: 1000; 
            padding: 1rem; 
            backdrop-filter: blur(4px); 
            animation: fadeIn 0.3s ease; 
        }
        .modal-box { 
            padding: 0; 
            border-radius: 1rem; 
            box-shadow: 0 20px 40px rgba(0,0,0,.3); 
            text-align: center; 
            color: #111827; 
            animation: popIn .4s ease-out; 
            max-width: 95%; 
            width: 500px; 
            overflow: hidden; 
        }
        .dark .modal-box { color: #f3f4f6; }
        
        .pdf-viewer-modal { 
            background: #0f172a; 
            padding: 0; 
            border-radius: .75rem; 
            overflow: hidden; 
            width: 98vw; 
            height: 95vh; 
            max-width: 1600px; 
            display: flex; 
            flex-direction: column; 
            position: relative; 
        }
        .pdf-viewer-modal .header { 
            padding: .75rem 1.5rem; 
            background: #020617; 
            display:flex; 
            justify-content: space-between; 
            align-items: center; 
            border-bottom: 1px solid #334155; 
            flex-shrink: 0; 
        }
        .pdf-viewer-modal iframe { 
            flex-grow: 1; 
            border: none; 
            background-color: #334155; 
            pointer-events: auto; 
        }
        
        /* Mobile Navigation - IMPROVED */
        .mobile-nav { 
            position: fixed; 
            bottom: 0; 
            left: 0; 
            right: 0; 
            background: white; 
            display: flex; 
            justify-content: space-around; 
            padding: 0.5rem 0; 
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1); 
            z-index: 100; 
            padding-bottom: max(0.5rem, env(safe-area-inset-bottom));
        }
        .dark .mobile-nav { 
            background: #0f172a; 
            box-shadow: 0 -2px 10px rgba(0,0,0,0.3); 
        }
        .mobile-nav-item { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            padding: 0.5rem; 
            font-size: 0.75rem; 
            color: #64748b; 
            transition: all 0.2s; 
            position: relative;
            flex: 1;
        }
        .mobile-nav-item.active { 
            color: var(--primary-500); 
        }
        .mobile-nav-item i { 
            font-size: 1.25rem; 
            margin-bottom: 0.25rem; 
        }
        
        /* Card styles */
        .card {
            background: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            overflow: hidden;
        }
        .dark .card {
            background: #1e293b;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
        }
        
        /* Quiz styles */
        .btn-grad {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            color: white;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 6px -1px rgba(13, 148, 136, 0.2);
        }
        .btn-grad:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(13, 148, 136, 0.3);
        }
        
        /* Section styles */
        .section {
            padding: 1rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        @media (min-width: 768px) {
            .section {
                padding: 1.5rem;
            }
        }
        
        /* Hide desktop sidebar on mobile */
        @media (max-width: 767px) {
            .desktop-sidebar {
                display: none;
            }
            .mobile-nav {
                display: flex;
            }
            main {
                padding-bottom: 5rem;
            }
        }
        @media (min-width: 768px) {
            .mobile-nav {
                display: none;
            }
        }
        
        /* Progress bar */
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }
        .dark .progress-bar {
            background-color: #334155;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-500), var(--primary-600));
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        .dark ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        /* Glass effect */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .dark .glass {
            background: rgba(15, 23, 42, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Touch target improvements */
        .touch-target {
            min-height: 44px;
            min-width: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Celebration styles */
        .animated-gradient-bg {
            background: linear-gradient(45deg, #14b8a6, #0d9488, #0f766e, #115e59);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f59e0b;
            top: 0;
            opacity: 0;
        }
        
        .confetti:nth-child(even) {
            background-color: #ef4444;
        }
        
        .confetti:nth-child(3n) {
            background-color: #10b981;
        }
        
        .confetti:nth-child(5n) {
            background-color: #8b5cf6;
        }
        
        @keyframes confettiRain {
            0% {
                opacity: 1;
                top: -100px;
                transform: rotate(0deg);
            }
            100% {
                opacity: 0;
                top: 100vh;
                transform: rotate(360deg);
            }
        }
        
        /* Certificate styles */
        .font-serif-display {
            font-family: 'Georgia', serif;
            font-weight: 700;
        }
        
        .font-handwriting {
            font-family: 'Dancing Script', cursive;
        }
        
        .spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Quiz improvements */
        .quiz-option {
            transition: all 0.2s ease;
        }
        
        .quiz-option:hover {
            transform: translateY(-2px);
        }
        
        .quiz-option.selected {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            color: white;
            box-shadow: 0 4px 12px rgba(13, 148, 136, 0.3);
        }
        
        /* Premium badge */
        .premium-badge {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }
        
        /* Card hover effect */
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        /* Glassmorphism effect */
        .glassmorphism {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200">
    <div id="root"></div>

<script type="text/babel">
    const { useState, useEffect, useMemo, useCallback, Fragment, Component, useRef } = React;

    // =================================================================================
    // ===== CONFIGURATION & DATA =====
    // =================================================================================
    const DATA = {
        appName: "Ganesh Dai Academy",
        appSubtitle: "Grade 11 & 12 Study Hub",
        logoUrl: "https://raw.githubusercontent.com/MissionBalenScholarshipQuiz/12/55fa0b325c116947dc1736ebb3c6fcf45b997777/2a4a2158-0beb-445d-81d0-ccfc3e8ad099.jpg",
        socials: {
            youtube: "https://www.youtube.com/@Grade11-12StudyHub",
            facebook: "https://www.facebook.com/ganesh.dahal.627352/",
        },
        esewaId: "9767496685",
        whatsAppContactLink: "https://wa.me/9826594548?text=" + encodeURIComponent("I have paid for Ganesh Dai Academy premium. Please provide my activation code."),
        presentationRequestNumber: "9826594548",
        whatsAppContactNumber: "9826594548",
        streams: [
            { 
                id: 'science', 
                name: 'Science', 
                compulsory: ['English', 'Nepali', 'Physics', 'Chemistry', 'Mathematics'], 
                optional: [['Biology', 'Computer Science']], 
                optional_count: 1,
                color: 'from-blue-500 to-cyan-500',
                icon: 'fas fa-atom'
            },
            { 
                id: 'management', 
                name: 'Management', 
                compulsory: ['English', 'Nepali', 'Accountancy', 'Economics'], 
                optional: [['Business Studies', 'Business Mathematics', 'Computer Science', 'Social']], 
                optional_count: 2,
                color: 'from-emerald-500 to-teal-500',
                icon: 'fas fa-chart-line'
            }
        ],

        subjectData: {
            'English': { credits: 4, color: 'from-purple-500 to-indigo-500' }, 
            'Nepali': { credits: 3, color: 'from-rose-500 to-pink-500' }, 
            'Mathematics': { credits: 5, color: 'from-blue-500 to-cyan-500' }, 
            'Physics': { credits: 5, color: 'from-orange-500 to-amber-500' }, 
            'Chemistry': { credits: 5, color: 'from-green-500 to-emerald-500' }, 
            'Biology': { credits: 5, color: 'from-lime-500 to-green-500' }, 
            'Computer Science': { credits: 5, color: 'from-violet-500 to-purple-500' }, 
            'Accountancy': { credits: 5, color: 'from-teal-500 to-cyan-500' }, 
            'Economics': { credits: 5, color: 'from-amber-500 to-yellow-500' }, 
            'Business Studies': { credits: 5, color: 'from-indigo-500 to-blue-500' }, 
            'Business Mathematics': { credits: 5, color: 'from-cyan-500 to-teal-500' }, 
            'Social': { credits: 5, color: 'from-pink-500 to-rose-500' },
        },
        gradePoints: { 'A+': 4.0, 'A': 3.6, 'B+': 3.2, 'B': 2.8, 'C+': 2.4, 'C': 2.0, 'D': 1.6, 'NG': 0.0 },
        
        // Quiz Data
        quizzes: {
            'Physics': {
                title: 'Physics Quiz',
                icon: 'fas fa-atom',
                color: 'from-orange-500 to-amber-500',
                chapters: {
                    'Mechanics': {
                        questions: [
                            {
                                question: 'What is the SI unit of force?',
                                options: ['Newton', 'Joule', 'Watt', 'Pascal'],
                                correctAnswer: 'Newton'
                            },
                            {
                                question: 'Which law states that every action has an equal and opposite reaction?',
                                options: ['Newton\'s First Law', 'Newton\'s Second Law', 'Newton\'s Third Law', 'Law of Gravitation'],
                                correctAnswer: 'Newton\'s Third Law'
                            },
                            {
                                question: 'What is the formula for kinetic energy?',
                                options: ['1/2 mv²', 'mgh', 'F.d', 'P.V'],
                                correctAnswer: '1/2 mv²'
                            },
                            {
                                question: 'What is the acceleration due to gravity on Earth?',
                                options: ['9.8 m/s²', '10 m/s²', '8.9 m/s²', '11 m/s²'],
                                correctAnswer: '9.8 m/s²'
                            },
                            {
                                question: 'Which of the following is a vector quantity?',
                                options: ['Mass', 'Speed', 'Distance', 'Velocity'],
                                correctAnswer: 'Velocity'
                            }
                        ]
                    },
                    'Optics': {
                        questions: [
                            {
                                question: 'What is the speed of light in vacuum?',
                                options: ['3 × 10^8 m/s', '3 × 10^5 m/s', '3 × 10^10 m/s', '3 × 10^3 m/s'],
                                correctAnswer: '3 × 10^8 m/s'
                            },
                            {
                                question: 'Which lens is used to correct myopia?',
                                options: ['Convex lens', 'Concave lens', 'Cylindrical lens', 'Bifocal lens'],
                                correctAnswer: 'Concave lens'
                            },
                            {
                                question: 'What is the unit of power of a lens?',
                                options: ['Diopter', 'Watt', 'Newton', 'Joule'],
                                correctAnswer: 'Diopter'
                            }
                        ]
                    },
                    'Electricity and Magnetism': {
                        questions: [
                            {
                                question: 'What is the SI unit of electric current?',
                                options: ['Ampere', 'Volt', 'Ohm', 'Watt'],
                                correctAnswer: 'Ampere'
                            },
                            {
                                question: 'Ohm\'s law states that:',
                                options: ['V = IR', 'I = VR', 'R = IV', 'V = I/R'],
                                correctAnswer: 'V = IR'
                            }
                        ]
                    }
                }
            },
            'Chemistry': {
                title: 'Chemistry Quiz',
                icon: 'fas fa-flask',
                color: 'from-green-500 to-emerald-500',
                chapters: {
                    'Atomic Structure': {
                        questions: [
                            {
                                question: 'Who discovered the electron?',
                                options: ['J.J. Thomson', 'Ernest Rutherford', 'James Chadwick', 'Niels Bohr'],
                                correctAnswer: 'J.J. Thomson'
                            },
                            {
                                question: 'What is the maximum number of electrons in the M shell?',
                                options: ['2', '8', '18', '32'],
                                correctAnswer: '18'
                            }
                        ]
                    },
                    'Chemical Bonding': {
                        questions: [
                            {
                                question: 'Which type of bond is formed by sharing of electrons?',
                                options: ['Ionic bond', 'Covalent bond', 'Metallic bond', 'Hydrogen bond'],
                                correctAnswer: 'Covalent bond'
                            },
                            {
                                question: 'What is the shape of methane molecule?',
                                options: ['Linear', 'Trigonal planar', 'Tetrahedral', 'Octahedral'],
                                correctAnswer: 'Tetrahedral'
                            }
                        ]
                    },
                    'Organic Chemistry': {
                        questions: [
                            {
                                question: 'Which functional group defines an alcohol?',
                                options: ['-OH', '-COOH', '-CHO', '-NH2'],
                                correctAnswer: '-OH'
                            },
                            {
                                question: 'What is the general formula for alkanes?',
                                options: ['CnH2n+2', 'CnH2n', 'CnH2n-2', 'CnH2n-6'],
                                correctAnswer: 'CnH2n+2'
                            }
                        ]
                    }
                }
            },
            'Economics': {
                title: 'Economics Quiz',
                icon: 'fas fa-chart-line',
                color: 'from-amber-500 to-yellow-500',
                chapters: {
                    'Basic Concepts': {
                        questions: [
                            {
                                question: 'What is the study of how individuals and societies choose to use scarce resources?',
                                options: ['Economics', 'Sociology', 'Psychology', 'Political Science'],
                                correctAnswer: 'Economics'
                            },
                            {
                                question: 'What does GDP stand for?',
                                options: ['Gross Domestic Product', 'General Domestic Price', 'Gross Development Product', 'General Development Plan'],
                                correctAnswer: 'Gross Domestic Product'
                            }
                        ]
                    },
                    'Demand and Supply': {
                        questions: [
                            {
                                question: 'What happens to price when demand increases and supply remains constant?',
                                options: ['Price increases', 'Price decreases', 'Price remains same', 'Cannot determine'],
                                correctAnswer: 'Price increases'
                            }
                        ]
                    }
                }
            },
            'Accountancy': {
                title: 'Accountancy Quiz',
                icon: 'fas fa-calculator',
                color: 'from-teal-500 to-cyan-500',
                chapters: {
                    'Basic Accounting': {
                        questions: [
                            {
                                question: 'What is the basic accounting equation?',
                                options: ['Assets = Liabilities + Capital', 'Assets = Liabilities - Capital', 'Assets + Liabilities = Capital', 'Assets - Liabilities = Capital'],
                                correctAnswer: 'Assets = Liabilities + Capital'
                            },
                            {
                                question: 'Which financial statement shows the financial position of a business?',
                                options: ['Income Statement', 'Balance Sheet', 'Cash Flow Statement', 'Trial Balance'],
                                correctAnswer: 'Balance Sheet'
                            }
                        ]
                    },
                    'Journal and Ledger': {
                        questions: [
                            {
                                question: 'What is the book of original entry?',
                                options: ['Journal', 'Ledger', 'Trial Balance', 'Balance Sheet'],
                                correctAnswer: 'Journal'
                            }
                        ]
                    }
                }
            }
        },
        
        notes: {
            '11': [
                // Physics grade 11
                { id: 1, grade: 11, subject: 'Physics', title: 'Chapter 1: Unit and Dimension', link: 'https://drive.google.com/file/d/178ortL2-MP8zK9pOaSX-0KTKFUz5OhUI/view?usp=sharing', isPremium: false },
                { id: 2, grade: 11, subject: 'Physics', title: 'Chapter 2: Vectors', link: 'https://drive.google.com/file/d/19q88Gi6sk4TXrwkP-Pmql4KDDX0sPd3u/view', isPremium: false },
                { id: 3, grade: 11, subject: 'Physics', title: 'Chapter 3: Kinematics', link: 'https://drive.google.com/file/d/1A3z-ZPzLIOdy7e6eC5TX35KGyfvOqzZh/view', isPremium: false },
                { id: 4, grade: 11, subject: 'Physics', title: 'Chapter 4: Dynamics', link: 'https://drive.google.com/file/d/1A3z-ZPzLIOdy7e6eC5TX35KGyfvOqzZh/view', isPremium: false },
                { id: 40000, grade: 11, subject: 'Physics', title: 'Chapter 4: Dynamics Notes 2', link: 'https://drive.google.com/file/d/1_2Qy9xum2kwST-E6Khs6jA3270Q9v1-L/view?usp=drive_link', isPremium: false },        
                { id: 5, grade: 11, subject: 'Physics', title: 'Chapter 5: Work, Energy and Power', link: 'https://drive.google.com/file/d/1JqUcWrMuhBFuCFaGso5Sd6uxt_D1iSvP/view?usp=sharing', isPremium: false },
                { id: 6, grade: 11, subject: 'Physics', title: 'Chapter 6: Circular Motion', link: 'https://drive.google.com/file/d/1-pvhSMupNVW0QJGcVykufJFVqXfk5jRE/view?usp=drive_link', isPremium: false },
                { id: 7, grade: 11, subject: 'Physics', title: 'Chapter 7: Gravitation', link: 'https://drive.google.com/file/d/1Iw7U6r1tGnmPH6QLnkiOgDl9vGS55zCv/view?usp=drive_link', isPremium: false },
                { id: 13, grade: 11, subject: 'Physics', title: 'Chapter 13: Ideal Gas', link: 'https://drive.google.com/file/d/18Lw1yowtIzcuDfeeVr2wa6Wor7U71PCk/view?usp=drive_link', isPremium: false },
                { id: 15, grade: 11, subject: 'Physics', title: 'Chapter 15: Refraction at Plane Surface', link: 'https://drive.google.com/file/d/1UXPH9X2H-kJNyVG0CRgZT0O_iV4U-JMu/view?usp=drive_link', isPremium: false },
                { id: 20, grade: 11, subject: 'Physics', title: 'Chapter 20: Electric Field', link: 'https://drive.google.com/file/d/1qVXMBMc4DHuFEkNAmgsSZ9gY-6_q6Zj_/view?usp=drive_link', isPremium: false },
                { id: 22, grade: 11, subject: 'Physics', title: 'Chapter 22: Capacitor and Capacitance', link: 'https://drive.google.com/file/d/1GjUkgrsmyRv3RJbvHUqmXiRIkHceIDa7/view?usp=drive_link', isPremium: false },
                { id: 24, grade: 11, subject: 'Physics', title: 'Chapter 24: Nuclear Physics', link: 'https://drive.google.com/file/d/1vGHhytFU97B9XpIn2aWaerZqWzfhWKdg/view?usp=drive_link', isPremium: false },
                { id: 25, grade: 11, subject: 'Physics', title: 'Chapter 25: Solid', link: 'https://drive.google.com/file/d/1tnyzm4N_YsVUd6uW1--oaHZMsNP12ITb/view?usp=drive_link', isPremium: false },

                // Mathematics grade 11
                { id: 1001, grade: 11, subject: 'Mathematics', title: 'All Required Formula', link: 'https://drive.google.com/file/d/1LmRl2CNWPIUAfoyR1hch84UkHhG5r3NT/view', isPremium: false },
                { id: 1002, grade: 11, subject: 'Mathematics', title: 'Application of Derivatives', link: 'https://drive.google.com/file/d/1pQtaBDd0RBLf1Et4d_S6KIHPkOwVtPwA/view', isPremium: false },
                { id: 1003, grade: 11, subject: 'Mathematics', title: 'Antiderivatives', link: 'https://drive.google.com/file/d/1q-NpT-ueLZvjHZHjlGLRL1A3X_MHYXrV/view', isPremium: false },

                // Biology grade 11
                { id: 2001, grade: 11, subject: 'Biology', title: 'Cell Biology', link: 'https://drive.google.com/file/d/14Ohb60T-q3sI5XXbXTiz43hY-UxWb80n/view', isPremium: false },

                // Chemistry grade 11
                { id: 27, grade: 11, subject: 'Chemistry', title: 'Chapter 1: Foundation and Fundamentals', link: 'https://drive.google.com/file/d/1AuHGWyxBDjBtH4rGMH7JaBaVvgREOKJR/view?usp=sharing', isPremium: false },
                { id: 28, grade: 11, subject: 'Chemistry', title: 'Chapter 2: Stoichiometry', link: 'https://drive.google.com/file/d/1AnNzZ_KejeWSbBTATk9gNc_6zz0uwByP/view?usp=sharing', isPremium: false },
                { id: 29, grade: 11, subject: 'Chemistry', title: 'Redox Reaction', link: 'https://drive.google.com/file/d/1LaSQwV4abLBa0PewrikGWCp5geRm9vwF/view?usp=drive_link', isPremium: false },
                { id: 31, grade: 11, subject: 'Chemistry', title: 'Chapter 5: Chemical Bonding and Shape of Molecules', link: '#', isPremium: false },
                { id: 39, grade: 11, subject: 'Chemistry', title: 'Hydrocarbon', link: 'https://drive.google.com/file/d/1isy9p4pW1RGnakYSTV7m7eTV1lW6pqAR/view?usp=drive_link', isPremium: false },
                { id: 40, grade: 11, subject: 'Chemistry', title: 'Chapter 14: Hydrocarbons', link: 'https://drive.google.com/file/d/1isy9p4pW1RGnakYSTV7m7eTV1lW6pqAR/view?usp=drive_link', isPremium: false },
                { id: 43, grade: 11, subject: 'Chemistry', title: 'Mole Concept', link: 'https://drive.google.com/file/d/1jxCaNO8ztUR_tXseI_SUvJPzRK4enfOu/view?usp=drive_link', isPremium: false },

                // Nepali grade 11
                { id: 56, grade: 11, subject: 'Nepali', title: 'Chapter 1: वीर पुर्खा (कविता)', link: 'https://drive.google.com/file/d/14o1jiIKU6CxSQw7pAu_ofmASW9j3ET62/view?usp=sharing', isPremium: false },
                { id: 57, grade: 11, subject: 'Nepali', title: 'Chapter 2: गाउँको माया (सामाजिक कथा)', link: 'https://drive.google.com/file/d/1QXJGVAPRw_Sn3x7XTcXZSz-F2gJwm_GH/view?usp=drive_link', isPremium: false },
                { id: 58, grade: 11, subject: 'Nepali', title: 'Chapter 3: संस्कृतिको नयाँ यात्रा (आत्मपरक निबन्ध)', link: 'https://drive.google.com/file/d/1xtfOah6kXFZJZ1kttcYJB0EPIc_pmJre/view?usp=drive_link', isPremium: false },
                { id: 59, grade: 11, subject: 'Nepali', title: 'Chapter 4: योगमाया (राष्ट्रिय जीवनी)', link: 'https://drive.google.com/file/d/1xtfOah6kXFZJZ1kttcYJB0EPIc_pmJre/view?usp=drive_link', isPremium: false },
                { id: 60, grade: 11, subject: 'Nepali', title: 'Chapter 5: साथीलाई चिठी (चिठी)', link: 'https://drive.google.com/file/d/1c58gPPDRi3oXIBv4Q78w3sZ0MnijrR4M/view?usp=drive_link', isPremium: false },
                { id: 61, grade: 11, subject: 'Nepali', title: 'Chapter 6: त्यो फेरि फर्कला ? (मनोवैज्ञानिक कथा)', link: 'https://drive.google.com/file/d/1DTuckBk17asB7jyt7nxDPupM-ArIdTQN/view?usp=drive_link', isPremium: false },
                { id: 62, grade: 11, subject: 'Nepali', title: 'Chapter 7: पर्यापर्यटनका सम्भावना र आयाम (वस्तुपरक निबन्ध)', link: 'https://drive.google.com/file/d/1KmSgmBGFuplBHWL7t-g8pNavDszk1CJX/view?usp=drive_link', isPremium: false },
                { id: 63, grade: 11, subject: 'Nepali', title: 'Chapter 8: लौ आयो ताजा खबर (लघु नाटक)', link: 'https://drive.google.com/file/d/1ZCEuV5Uk8JcvkEQ_BpWpkCiUQwKydPkF/view?usp=drive_link', isPremium: false },
                { id: 64, grade: 11, subject: 'Nepali', title: 'Chapter 9: सफलताको कथा (रिपोर्ताजमूलक रचना)', link: 'https://drive.google.com/file/d/1dZtM1SIUXF84hC0FMHyn-N1pNRgLHLNk/view?usp=drive_link', isPremium: false },
                { id: 65, grade: 11, subject: 'Nepali', title: 'Chapter 10: कृषिशालामा एक दिन (संवाद)', link: 'https://drive.google.com/file/d/1KIAkEeir7EvLs_5m3gmGbWv3bycrWQyL/view?usp=drive_link', isPremium: false },
                { id: 66, grade: 11, subject: 'Nepali', title: 'Chapter 11: रारा भ्रमण (दैनिकी)', link: 'https://drive.google.com/file/d/1QJONcOzYBEJ1zcvWXk-wdjlDvjcol1yv/view?usp=drive_link', isPremium: false },
                { id: 67, grade: 11, subject: 'Nepali', title: 'Chapter 12: जलस्रोत र ऊर्जा (वक्तृता)', link: 'https://drive.google.com/file/d/1QJONcOzYBEJ1zcvWXk-wdjlDvjcol1yv/view?usp=drive_link', isPremium: false },

                // English grade 11
                { id: 68, grade: 11, subject: 'English', title: 'Short Story 1: The Selfish Giant', link: 'https://drive.google.com/file/d/1WZLcd_cF2OQOkb94ROJo248IeTzksJlz/view?usp=drive_link', isPremium: false },
                { id: 69, grade: 11, subject: 'English', title: 'Short Story 2: The Oval Portrait', link: 'https://drive.google.com/file/d/1GFra9h7f99v5PQowLbc1C9SrJQ4vr9NX/view?usp=drive_link', isPremium: false },
                { id: 70, grade: 11, subject: 'English', title: 'Short Story 3: God Sees the Truth but Waits', link: 'https://drive.google.com/file/d/1or-fUzIpVib4TKV4obxtWTmF4Sq_uoAT/view?usp=drive_link', isPremium: false },
                { id: 71, grade: 11, subject: 'English', title: 'Short Story 4: The Wish', link: 'https://drive.google.com/file/d/1GvVpSpxu-gBYO3vcTeyqUUq-rDNdvN4Q/view?usp=drive_link', isPremium: false },
                { id: 72, grade: 11, subject: 'English', title: 'Short Story 5: Civil Peace', link: 'https://drive.google.com/file/d/1oVWYQHjqOjuU-pNXHw7qwwS6QM6UHcSi/view?usp=drive_link', isPremium: false },
                { id: 73, grade: 11, subject: 'English', title: 'Short Story 6: Two Little Soldiers', link: 'https://drive.google.com/file/d/11dncnQtHkiIkijcT8mV1YRJyqiSFqYZX/view?usp=drive_link', isPremium: false },
                { id: 74, grade: 11, subject: 'English', title: 'Short Story 7: An Astrologer’s Day', link: 'https://drive.google.com/file/d/1tPbLQW_0oE6q1JixGbPZr6q4g6QOVnJz/view?usp=drive_link', isPremium: false },
                { id: 75, grade: 11, subject: 'English', title: 'Poem 1: Corona Says', link: 'https://drive.google.com/file/d/1S9A49FBnAw3ISzjO3TZnC_JlutqXJtPV/view?usp=drive_link', isPremium: false },
                { id: 76, grade: 11, subject: 'English', title: 'Poem 2: A Red, Red Rose', link: 'https://drive.google.com/file/d/1YjeVe1YWNFb8kg_FciGowWlU1zRldn-C/view?usp=drive_link', isPremium: false },
                { id: 77, grade: 11, subject: 'English', title: 'Poem 3: All the World’s a Stage', link: 'https://drive.google.com/file/d/1YjeVe1YWNFb8kg_FciGowWlU1zRldn-C/view?usp=drive_link', isPremium: false },
                { id: 78, grade: 11, subject: 'English', title: 'Poem 4: Who are you, little i?', link: 'https://drive.google.com/file/d/1ERog4fo4dXscQYbV2WRcsnRiFn2ZEVZl/view?usp=drive_link', isPremium: false },
                { id: 79, grade: 11, subject: 'English', title: 'Poem 5: The Gift in Wartime', link: 'https://drive.google.com/file/d/1PLbzZlJajMQZnfOpLNtG2MZVaYrfEST1/view?usp=drive_link', isPremium: false },
                { id: 80, grade: 11, subject: 'English', title: 'Essay 1: Sharing Tradition', link: 'https://drive.google.com/file/d/16C1MWTlPpwa9RooXQ7iegUr83bBAqHLr/view?usp=drive_link', isPremium: false },
                { id: 81, grade: 11, subject: 'English', title: 'Essay 2: How to Live Before You Die', link: 'Summary and Exercise', isPremium: false },
                { id: 82, grade: 11, subject: 'English', title: 'Essay 3: What I Require from Life', link: 'Summary and Exercise', isPremium: false },
                { id: 83, grade: 11, subject: 'English', title: 'Essay 4: What is Poverty?', link: 'https://drive.google.com/file/d/1WCiA50pxL4-U2L34oiy58CFhzH4lxu0L/view?usp=drive_link', isPremium: false },
                { id: 84, grade: 11, subject: 'English', title: 'Essay 5: Scientific Research is a Token of Humankind’s Survival', link: 'https://drive.google.com/file/d/1jSLzmB8_Ga8xHOBpZAP8naPur_5Tjjfv/view?usp=drive_link', isPremium: false },
                { id: 85, grade: 11, subject: 'English', title: 'One Act Play 1: Trifles', link: 'https://drive.google.com/file/d/1xO0jjNFWFM8aG1PQzoAsTWoYt1nXXOO9/view?usp=drive_link', isPremium: false },
                { id: 86, grade: 11, subject: 'English', title: 'One Act Play 2: A Sunny Morning', link: 'https://drive.google.com/file/d/1PPCE_ZlmcRfpGwlSenpR9PYFHYdnVjOL/view?usp=drive_link', isPremium: false },
                { id: 87, grade: 11, subject: 'English', title: 'One Act Play 3: Refund', link: 'https://drive.google.com/file/d/1MNPZk9zEaQKkPPexdBdf5TL9jmJ9O91D/view?usp=drive_link', isPremium: false },

                // Computer Science grade 11
                { id: 105, grade: 11, subject: 'Computer Science', title: 'Computer System', link: 'https://drive.google.com/file/d/10XsdgPqsIcxVk-OgkVdCgTjUwRXzad9T/view', isPremium: false },
                { id: 106, grade: 11, subject: 'Computer Science', title: 'Number System', link: 'https://drive.google.com/file/d/1NG6wBIswzHTNUs0M_o1KEETF42zzTJDO/view', isPremium: false },

                // Economics grade 11
                { id: 103, grade: 11, subject: 'Economics', title: 'Basic Concept of Economics and Allocation of Resource', link: 'https://drive.google.com/file/d/1NSkP2fRnDRajGjekFAhYQpb1yujkUg8Y/view', isPremium: false },
                { id: 104, grade: 11, subject: 'Economics', title: 'Demand, Supply and Market Equilibrium', link: 'https://drive.google.com/file/d/1HEF4vS2yj3I3G_zJ0nI2i8DIlJIc8F6f/view', isPremium: false }
            ],
            '12': [
                // English grade 12
                { id: 67, grade: 12, subject: 'English', title: 'All chapter Notes', link: 'https://drive.google.com/file/d/1BqvnQbwHArrfTJyayfvMpO6K4w_qHYxu/view?usp=sharing', isPremium: false },

                // Nepali grade 12
                { id: 56, grade: 12, subject: 'Nepali', title: 'All chapter Notes', link: 'https://drive.google.com/file/d/1tXMGn94Kc3-DOhNaoXJgMqzXL9uuFiwq/view?usp=drive_link', isPremium: false },
                { id: 44, grade: 12, subject: 'Nepali', title: 'Chapter 1: आमाको सपना', link: 'https://drive.google.com/file/d/17k0Pn06jyisTNs9NWg3uI2yUtlc2A2Ns/view?usp=drive_link', isPremium: false },
                { id: 45, grade: 12, subject: 'Nepali', title: 'Chapter 2: विरहिणी दमयन्ती', link: 'https://drive.google.com/file/d/1Cd8K4t86nSyYL1xgvyQgU1Vfm_P59pj-/view?usp=drive_link', isPremium: false },
                { id: 46, grade: 12, subject: 'Nepali', title: 'Chapter 3: घनघस्याको उकालो काट्ता', link: '#', isPremium: false },
                { id: 47, grade: 12, subject: 'Nepali', title: 'Chapter 4: व्यावसायिक पत्र', link: '#', isPremium: false },
                { id: 48, grade: 12, subject: 'Nepali', title: 'Chapter 5: एक चिहान', link: '#', isPremium: false },
                { id: 49, grade: 12, subject: 'Nepali', title: 'Chapter 6: स्टिफन विलियम हकिङ', link: '#', isPremium: false },
                { id: 50, grade: 12, subject: 'Nepali', title: 'Chapter 7: हामीलाई बोलाउँछन् हिमचुली', link: '#', isPremium: false },
                { id: 51, grade: 12, subject: 'Nepali', title: 'Chapter 8: मातृत्व', link: '#', isPremium: false },
                { id: 52, grade: 12, subject: 'Nepali', title: 'Chapter 9: गोर्खे', link: '#', isPremium: false },
                { id: 53, grade: 12, subject: 'Nepali', title: 'Chapter 10: नेपाली पहिचान', link: '#', isPremium: false },
                { id: 54, grade: 12, subject: 'Nepali', title: 'Chapter 11: सहकारी', link: '#', isPremium: false },
                { id: 55, grade: 12, subject: 'Nepali', title: 'Chapter 12: जीवन मार्ग', link: '#', isPremium: false },

                // Physics grade 12
                { id: 90, grade: 12, subject: 'Physics', title: 'NEB Solution of Physic', link: 'https://drive.google.com/file/d/1LPE32JyGu0n20MJheD1lq0o-6qLtokjK/view?usp=drive_link', isPremium: false },
                { id: 888, grade: 12, subject: 'Physics', title: 'PYQ part 1', link: 'https://drive.google.com/file/d/18iD477VUE6xzQFfaaWvkQx7d3PvZK7k3/view', isPremium: false },
                { id: 889, grade: 12, subject: 'Physics', title: 'PYQ part 2', link: 'https://drive.google.com/file/d/1evkTPn89SR8SKWuUMmk5txbMkO524d1a/view', isPremium: false },
                { id: 890, grade: 12, subject: 'Physics', title: 'PYQ part 3', link: 'https://drive.google.com/file/d/10pNcsw0Hsl6D1aRm7QgUyKExyVz0Fhnc/view', isPremium: false },     

                // Chemistry grade 12
                { id: 91, grade: 12, subject: 'Chemistry', title: 'NEB Solution of CHEMISTRY ', link: 'https://drive.google.com/file/d/1Xc9EBCoFfBQCe7cEWTvboOCXe1sEaRWO/view?usp=drive_link', isPremium: false },
                { id: 92, grade: 12, subject: 'Chemistry', title: 'Chemistry (Old Course) Model Question', link: 'https://drive.google.com/file/d/1jtYvAHccbyaQJvSrArK8GkR7td4pQG_F/view?usp=drive_link', isPremium: false },
                { id: 93, grade: 12, subject: 'Chemistry', title: 'Chemistry (New Course) Model Question', link: 'https://drive.google.com/file/d/1LbdV2IJ3_l5bS7x7Y4adO-NQdLxxiAjL/view?usp=drive_link', isPremium: false },
                { id: 94, grade: 12, subject: 'Chemistry', title: 'Organic Chemistry All Reaction', link: 'https://drive.google.com/file/d/1GfCRiOT3DRgs0pMQVq4lWii7CKdrL9Zh/view?usp=sharing', isPremium: false },

                // Computer Science grade 12
                { id: 88, grade: 12, subject: 'Computer Science', title: 'Chapter 1: Database Management System-DBMS', link: 'https://drive.google.com/file/d/1DtSP6LLwHNyjoocexF27JqufbCCWk5xW/view?usp=drive_link', isPremium: false },
                { id: 89, grade: 12, subject: 'Computer Science', title: 'Chapter 2: C Programming', link: 'https://drive.google.com/file/d/17jaxvRuaGkUPgxaoj09z53EpA7sTbe6X/view?usp=drive_link', isPremium: false },
                { id: 97, grade: 12, subject: 'Computer Science', title: 'Chapter 3: Web Technology', link: 'https://drive.google.com/file/d/1eBIC14NIjS0OrQ2noOr-bazkf8I6AUqg/view?usp=drive_link', isPremium: false },
                { id: 98, grade: 12, subject: 'Computer Science', title: 'Chapter 6: Software Process Model-SPM', link: 'https://drive.google.com/file/d/11HjWSVEM6dBpaRgaz8pHjs7e1DdrUzN7/view?usp=drive_link', isPremium: false },
                { id: 99, grade: 12, subject: 'Computer Science', title: 'Chapter 4: Data-Communication and Networking', link: 'https://drive.google.com/file/d/12BHeC0oavhFZSBMdG4uFpmq4xIDLqhfO/view?usp=drive_link', isPremium: false },
                { id: 100, grade: 12, subject: 'Computer Science', title: 'Model Questions Papers', link: 'https://drive.google.com/file/d/1I9AsK1N4rpr5Knn77kOYvZXCWJuGzNze/view?usp=drive_link', isPremium: false },
                { id: 101, grade: 12, subject: 'Computer Science', title: 'Important Questions', link: 'https://drive.google.com/file/d/1qgWiKrtiOWFBUsayWyaKrd7UbMJyBFwK/view?usp=drive_link', isPremium: false },
                { id: 102, grade: 12, subject: 'Computer Science', title: 'Extra C Programming Solution', link: 'https://drive.google.com/file/d/1JWEsgCwlMlJSZnjpqcVRfkdq4ormqiGD/view?usp=drive_link', isPremium: false },

                // Mathematics grade 12
                { id: 9888, grade: 12, subject: 'Mathematics', title: 'PYQ part 1', link: 'https://drive.google.com/file/d/1be2JQyA_7_Z7Qf8GKwyMrTPQahiqBJEg/view', isPremium: false },
                { id: 9889, grade: 12, subject: 'Mathematics', title: 'PYQ part 2', link: 'https://drive.google.com/file/d/1Uc2IGX_TSWcpLXMij2ANeBt0I33ZCXWY/view', isPremium: false },
                { id: 9890, grade: 12, subject: 'Mathematics', title: 'PYQ part 3', link: 'https://drive.google.com/file/d/1FHrtcaL4JQfAAEgVDSKKQJbvw9ywuCW4/view', isPremium: false }
            ]
        },
        examPreps: {
            routines: [ { subject: "Compulsory English", date: "2081/01/14" }, { subject: "Physics / Accountancy", date: "2081/01/16" }, ],
            checklists: [ { subject: 'Physics', id: 'phy_checklist', items: ['Revise all derivations in Mechanics', 'Practice numericals from Wave & Optics', 'Memorize key formulas for Modern Physics'] }, { subject: 'Accountancy', id: 'acc_checklist', items: ['Practice Company Account final statements', 'Revise partnership admission and retirement', 'Solve one complete model set'] }, ],
            modelQuestions: [ { id: 1, title: 'NEB Grade 11 All Subject Model set 2082 Grade 11', link: 'https://drive.google.com/file/d/1Twsmqo8m0HILemG2jub78Vk_DngB40bn/view?usp=drive_link', isPremium: true }, { id: 2, title: 'OLD is GOLD Question Bank Grade 12', link: 'https://drive.google.com/file/d/1Xc9EBCoFfBQCe7cEWTvboOCXe1sEaRWO/view?usp=drive_link', isPremium: true },  { id: 3, grade: 11, subject: 'All subject', title: 'OLD is GOLD Question Bank Grade 11', link: 'https://drive.google.com/file/d/1H92WYzcYca456OIgi-xx78sdwAv35tsJ/view?usp=drive_link', isPremium: true }, ]
        },
        motivationalQuotes: ["The secret of getting ahead is getting started.", "Believe you can and you're halfway there.", "The expert in anything was once a beginner."],
        brainTeasers: [
            { question: "I speak without a mouth and hear without ears. I have no body, but I come alive with wind. What am I?", answer: "echo" },
            { question: "What has an eye, but cannot see?", answer: "needle" },
            { question: "What is full of holes but still holds water?", answer: "sponge" }
        ],
        digitalLibrary: {
            '11': [
                {
                    id: 2001,
                    title: 'NEB Grade 11 — Physics',
                    link: 'https://drive.google.com/file/d/1CuuW9hsH195ChmSl1q5Enmgy3jNzeqyS/view?usp=drive_link',
                    description: 'Complete PDF notes for Grade 11 Physics.',
                    isPremium: false
                },
                {
                    id: 2002,
                    title: 'Chemistry – NEB Solutions & Model Papers',
                    link: 'https://drive.google.com/file/d/1Svasx5b2iQbr9KjA6rdU5rHzkkVuBdTl/view?usp=drive_link',
                    description: 'Past-year solutions and model question sets.',
                    isPremium: false
                },
                {
                    id: 2003,
                    title: 'ALL PHYSICS FORMULA',
                    link: 'https://drive.google.com/file/d/1CuuW9hsH195ChmSl1q5Enmgy3jNzeqyS/view?usp=drive_link',
                    description: 'All required formula for +2',
                    isPremium: true
                },
                { 
                    id: 2004, 
                    title: 'All Past Year Model Question Saint Xavier', 
                    link: 'https://drive.google.com/file/d/10m-T2hfjyQ-7AWTlDeTY-TrS9cYlL8DQ/view?usp=drive_link', 
                    description: 'All NEB chemistry model question papers in one PDF.',
                    isPremium: true 
                },
                { 
                    id: 2005, 
                    title: 'OLD is GOLD Question Bank', 
                    link: 'https://drive.google.com/file/d/1H92WYzcYca456OIgi-xx78sdwAv35tsJ/view?usp=drive_link',
                    description: 'All NEB chemistry model question papers in one PDF.',
                    isPremium: true 
                },
                { 
                    id: 2007, 
                    title: 'Basic Mathematics Book ',
                    link: 'https://drive.google.com/file/d/1mKSZbb2P20uwRh4x3QamtjlK0iTFG9Wh/view?usp=sharing',
                    description: 'Sukunda Publication Mathematics Book XI',
                    isPremium: true 
                },       
                { 
                    id: 2008, 
                    title: 'Basic Mathematics Solution ',
                    link: 'https://drive.google.com/file/d/1mKSZbb2P20uwRh4x3QamtjlK0iTFG9Wh/view?usp=drive_link',
                    description: 'Sukunda Publication Mathematics Book XI',
                    isPremium: false
                }
            ],
            '12': [
                {
                    id: 3001,
                    title: 'NEB Grade 12 — Physics Solutions',
                    link: 'https://drive.google.com/file/d/1LPE32JyGu0n20MJheD1lq0o-6qLtokjK/view?usp=drive_link',
                    description: 'Complete solutions for Grade 12 Physics.',
                    isPremium: false
                },
                {
                    id: 3002,
                    title: 'Chemistry – NEB Solutions Grade 12',
                    link: 'https://drive.google.com/file/d/1Xc9EBCoFfBQCe7cEWTvboOCXe1sEaRWO/view?usp=drive_link',
                    description: 'Past-year solutions for Grade 12 Chemistry.',
                    isPremium: false
                }
            ]
        },
        ourBooks: {
            '11': [
                {
                    id: 5001,
                    title: 'Physics Reference Book',
                    link: 'https://drive.google.com/file/d/1CuuW9hsH195ChmSl1q5Enmgy3jNzeqyS/view?usp=drive_link',
                    description: 'Comprehensive physics reference for Grade 11',
                    isPremium: false
                },
                {
                    id: 5002,
                    title: 'Chemistry Guide',
                    link: 'https://drive.google.com/file/d/1Svasx5b2iQbr9KjA6rdU5rHzkkVuBdTl/view?usp=drive_link',
                    description: 'Complete chemistry guide with solved examples',
                    isPremium: true
                }
            ],
            '12': [
                {
                    id: 6001,
                    title: 'Advanced Physics',
                    link: 'https://drive.google.com/file/d/1LPE32JyGu0n20MJheD1lq0o-6qLtokjK/view?usp=drive_link',
                    description: 'Advanced physics concepts for Grade 12',
                    isPremium: false
                },
                {
                    id: 6002,
                    title: 'Chemistry Master Guide',
                    link: 'https://drive.google.com/file/d/1Xc9EBCoFfBQCe7cEWTvboOCXe1sEaRWO/view?usp=drive_link',
                    description: 'Master guide for chemistry with practice problems',
                    isPremium: true
                }
            ]
        }
    };

    // =================================================================================
    // ===== HELPER FUNCTIONS & UTILITIES =====
    // =================================================================================
    const getJSONFromLocalStorage = (key, defaultValue) => { 
        try { 
            const item = localStorage.getItem(key); 
            return item ? JSON.parse(item) : defaultValue; 
        } catch (error) { 
            return defaultValue; 
        } 
    };
    
    const setJSONToLocalStorage = (key, value) => { 
        try { 
            localStorage.setItem(key, JSON.stringify(value)); 
        } catch (error) { 
            console.error("Could not save to localStorage", error); 
        } 
    };
    
    const getEmbedUrl = (url, page) => { 
        if (!url) return null; 
        const regex = /drive\.google\.com\/file\/d\/([a-zA-Z0-9_-]+)/; 
        const match = url.match(regex); 
        let embedUrl = match ? `https://drive.google.com/file/d/${match[1]}/preview` : null;
        if (page && embedUrl) { 
            embedUrl += `#page=${page}`; 
        }
        return embedUrl; 
    };
    
    const generatePremiumCode = (name, stream) => {
        if (!name || name.length < 1 || !stream) return null;
        const getPrecedingAndSuccessiveChars = (char) => {
            const lowerChar = char.toLowerCase(); 
            const code = lowerChar.charCodeAt(0);
            if (code < 97 || code > 122) return { preceding: 'x', successive: 'y' };
            const preceding = String.fromCharCode(code === 97 ? 122 : code - 1);
            const successive = String.fromCharCode(code === 122 ? 97 : code + 1);
            return { preceding, successive };
        };
        const thirdLetter = stream.length >= 3 ? stream.charAt(2) : 'x';
        const { preceding, successive } = getPrecedingAndSuccessiveChars(thirdLetter);
        return `${name.replace(/\s/g, '')}@1234${stream}${preceding}${successive}`;
    };

    class ErrorBoundary extends Component {
        constructor(props) { 
            super(props); 
            this.state = { hasError: false }; 
        }
        
        static getDerivedStateFromError(error) { 
            return { hasError: true }; 
        }
        
        render() { 
            if (this.state.hasError) { 
                return (
                    <div className="p-8 text-center bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 rounded-lg">
                        <h2 className="font-bold text-2xl">Something went wrong.</h2>
                        <p>This part of the app encountered an error. Please try refreshing.</p>
                    </div>
                ); 
            } 
            return this.props.children; 
        }
    }
    
    const AppLoader = () => (
        <div className="fixed inset-0 bg-slate-50 dark:bg-slate-900 flex flex-col items-center justify-center z-[10000]">
            <div className="text-center">
                <img src={DATA.logoUrl} alt="Logo" className="h-24 w-24 mx-auto mb-4 animate-pulse rounded-full" />
                <h1 className="text-4xl font-bold text-slate-800 dark:text-white mt-4 font-display">{DATA.appName}</h1>
                <p className="text-slate-500 dark:text-slate-400">({DATA.appSubtitle})</p>
                <div className="mt-8">
                    <div className="inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary-500 border-r-transparent"></div>
                </div>
            </div>
        </div>
    );
    
    // =================================================================================
    // ===== IMPROVED COMPONENTS =====
    // =================================================================================
    
    // Improved Section Component
    const Section = ({ title, subtitle, children }) => (
        <div className="container mx-auto px-4 py-8">
            {title && (
                <div className="text-center mb-8">
                    <h2 className="text-3xl font-bold text-slate-800 dark:text-white">{title}</h2>
                    {subtitle && <p className="text-slate-500 dark:text-slate-400 mt-2">{subtitle}</p>}
                </div>
            )}
            {children}
        </div>
    );

    // Improved PDF Viewer Modal
    const PdfViewerModal = ({ pdfInfo, onClose }) => { 
        if (!pdfInfo || !pdfInfo.link) return null; 
        const [isLoading, setIsLoading] = useState(true); 
        const viewerRef = useRef(null); 
        const pdfId = useMemo(() => pdfInfo.title.replace(/\s+/g, '_'), [pdfInfo]); 
        const [progressPage, setProgressPage] = useState(''); 
        const [savedPage, setSavedPage] = useState(null); 
        const [showSavedConfirmation, setShowSavedConfirmation] = useState(false);
        const [isFullscreen, setIsFullscreen] = useState(false);

        const getEmbedUrl = useCallback((url, page) => { 
            const fileIdMatch = url.match(/drive\.google\.com\/(?:file\/d\/|drive\/folders\/)([a-zA-Z0-9_-]+)/); 
            if (!fileIdMatch) return null; 
            let embedUrl = `https://drive.google.com/file/d/${fileIdMatch[1]}/preview`; 
            if (page) { embedUrl += `#page=${page}`; } 
            return embedUrl; 
        }, []); 

        useEffect(() => { 
            const savedPageData = localStorage.getItem(`pdfProgress_${pdfId}`); 
            if (savedPageData) { setSavedPage(savedPageData); setProgressPage(savedPageData); } 
        }, [pdfId]); 

        const handleSaveProgress = (e) => { 
            e.preventDefault(); 
            localStorage.setItem(`pdfProgress_${pdfId}`, progressPage); 
            setSavedPage(progressPage); 
            setShowSavedConfirmation(true); 
            setTimeout(() => setShowSavedConfirmation(false), 2500); 
        }; 

        const handleFullscreen = () => {
            if (!document.fullscreenElement) {
                viewerRef.current.requestFullscreen().then(() => {
                    setIsFullscreen(true);
                }).catch(err => {
                    console.error(`Error attempting to enable full-screen mode: ${err.message}`);
                });
            } else {
                document.exitFullscreen().then(() => {
                    setIsFullscreen(false);
                });
            }
        };

        const handlePdfLoad = () => {
            setIsLoading(false);
        };

        const preventContextMenu = (e) => e.preventDefault(); 

        const iframeUrl = useMemo(() => getEmbedUrl(pdfInfo.link, savedPage), [pdfInfo.link, savedPage, getEmbedUrl]); 
        
        return ( 
            <div className="overlay" onClick={onClose} onContextMenu={preventContextMenu}> 
                <div ref={viewerRef} className={`pdf-viewer-modal bg-slate-900 border border-slate-700 animate-popIn ${isFullscreen ? 'fixed inset-0 z-[2000]' : ''}`} onClick={e => e.stopPropagation()}> 
                    <div className="header flex-shrink-0"> 
                        <h3 className="truncate pr-4 text-white">{pdfInfo.title}</h3> 
                        <div className="flex items-center gap-2"> 
                            <form onSubmit={handleSaveProgress} className="hidden sm:flex items-center gap-2 relative"> 
                                <label htmlFor="page-input" className="text-sm text-slate-400">Bookmark Page:</label> 
                                <input id="page-input" type="number" value={progressPage} onChange={(e) => setProgressPage(e.target.value)} className="bg-slate-700 rounded-md px-2 py-1 w-20 text-center text-white placeholder-slate-400" placeholder="#" required /> 
                                <button type="submit" className="bg-indigo-600 hover:bg-indigo-700 text-white font-bold text-sm py-1 px-3 rounded-md">Save</button> 
                                {showSavedConfirmation && <div className="absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full shadow-lg animate-popIn">Saved!</div>} 
                            </form> 
                            <button onClick={handleFullscreen} title="Fullscreen" className="bg-white/10 hover:bg-white/20 text-white rounded-full w-8 h-8 flex items-center justify-center"> 
                                <i className="fas fa-expand"></i> 
                            </button> 
                            <button onClick={onClose} title="Close" className="close-button text-xl text-white">&times;</button> 
                        </div> 
                    </div> 
                    <div className="relative flex-grow bg-gray-800"> 
                        {isLoading && ( 
                            <div className="absolute inset-0 flex flex-col justify-center items-center text-white bg-gray-800/90 backdrop-blur-sm z-10 p-4 text-center"> 
                                <i className="fas fa-spinner fa-spin text-4xl mb-6"></i> 
                                <p className="font-bold text-lg">Loading HD Document...</p> 
                                {savedPage && <p className="text-sm text-gray-400 mt-2">Jumping to your bookmark on page {savedPage}...</p>} 
                                <div className="mt-8 bg-indigo-900/50 border border-indigo-500 rounded-lg p-4 max-w-md"> 
                                    <h4 className="font-semibold text-indigo-300 flex items-center justify-center gap-2"><i className="fas fa-info-circle"></i> Heads Up!</h4> 
                                    <p className="text-slate-300 text-sm mt-2"> To <strong>zoom</strong>, print, or go to a page, move your cursor to the <strong>top-right corner</strong> of the document viewer. A toolbar will appear. </p> 
                                </div> 
                            </div> 
                        )} 
                        <iframe 
                            src={iframeUrl} 
                            onLoad={handlePdfLoad}
                            className={`w-full h-full border-0 transition-opacity duration-500 ${isLoading ? 'opacity-0' : 'opacity-100'}`} 
                            title="HD PDF Viewer" 
                            sandbox="allow-scripts allow-same-origin allow-forms"
                        ></iframe> 
                    </div> 
                </div> 
            </div> 
        ); 
    };

    // Help Note Modal
    const HelpNoteModal = ({ onClose }) => {
        const [title, setTitle] = useState('');
        const [description, setDescription] = useState('');
        const [file, setFile] = useState(null);
        
        const handleSubmit = (e) => {
            e.preventDefault();
            if (!title.trim() || !description.trim()) {
                alert('Please fill in all fields');
                return;
            }
            
            const message = `*Help Note Submission*\n\n*Title:* ${title}\n*Description:* ${description}\n\nSubmitted via Ganesh Dai Academy`;
            const whatsappUrl = `https://wa.me/${DATA.whatsAppContactNumber}?text=${encodeURIComponent(message)}`;
            
            window.open(whatsappUrl, '_blank');
            onClose();
        };
        
        return (
            <div className="overlay">
                <div className="modal-box glassmorphism text-white relative max-w-md">
                    <button onClick={onClose} className="absolute top-4 right-4 text-white/50 hover:text-white text-2xl font-bold">&times;</button>
                    <h2 className="text-2xl font-bold mb-4">Submit Help Note</h2>
                    <form onSubmit={handleSubmit} className="space-y-4">
                        <div>
                            <label className="block text-sm font-medium mb-2">Title</label>
                            <input 
                                type="text" 
                                value={title}
                                onChange={(e) => setTitle(e.target.value)}
                                className="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/60 focus:ring-2 focus:ring-indigo-400 focus:outline-none"
                                placeholder="Enter note title"
                                required
                            />
                        </div>
                        <div>
                            <label className="block text-sm font-medium mb-2">Description</label>
                            <textarea 
                                value={description}
                                onChange={(e) => setDescription(e.target.value)}
                                className="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/60 focus:ring-2 focus:ring-indigo-400 focus:outline-none"
                                placeholder="Describe your note or question"
                                rows="4"
                                required
                            />
                        </div>
                        <div>
                            <label className="block text-sm font-medium mb-2">Upload PDF (Optional)</label>
                            <input 
                                type="file"
                                accept=".pdf"
                                onChange={(e) => setFile(e.target.files[0])}
                                className="w-full p-2 rounded-lg bg-white/10 border border-white/20 text-white file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-500 file:text-white hover:file:bg-indigo-600"
                            />
                        </div>
                        <button type="submit" className="w-full gradient-button text-white font-bold py-3 px-6 rounded-full">
                            <i className="fab fa-whatsapp mr-2"></i>Send via WhatsApp
                        </button>
                    </form>
                </div>
            </div>
        );
    };

    // Donut Chart Component
    const DonutChart = ({ percentage }) => {
        const size = 150; const strokeWidth = 15; const radius = (size - strokeWidth) / 2; const circumference = 2 * Math.PI * radius; const offset = circumference - (percentage / 100) * circumference;
        return (
            <div className="relative" style={{ width: size, height: size }}>
                <svg width={size} height={size} className="transform -rotate-90">
                    <circle className="text-slate-200 dark:text-slate-700" stroke="currentColor" strokeWidth={strokeWidth} fill="transparent" r={radius} cx={size / 2} cy={size / 2} />
                    <circle className="text-primary-500 text-green-500" stroke="currentColor" strokeWidth={strokeWidth} strokeDasharray={circumference} strokeDashoffset={offset} strokeLinecap="round" fill="transparent" r={radius} cx={size / 2} cy={size / 2} style={{ transition: 'stroke-dashoffset 0.5s ease-out' }} />
                </svg>
                <div className="absolute inset-0 flex items-center justify-center"> <span className="text-3xl font-bold text-slate-800 dark:text-white">{percentage}%</span> </div>
            </div>
        );
    };
    
    // Improved Quiz Component
    const SubjectMasteryComponent = () => {
        const [view, setView] = useState('subject_select');
        const [activeSubject, setActiveSubject] = useState(null);
        const [activeQuizData, setActiveQuizData] = useState(null);
        const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
        const [userAnswers, setUserAnswers] = useState([]);
        const [timer, setTimer] = useState(15); // 15 seconds timer
        const [isTimeUp, setIsTimeUp] = useState(false);
        const timerRef = useRef(null);

        useEffect(() => {
            if (view === 'quiz') {
                timerRef.current = setInterval(() => {
                    setTimer(prev => {
                        if (prev === 1) {
                            clearInterval(timerRef.current);
                            setIsTimeUp(true);
                            setTimeout(() => {
                                handleNext(true);
                            }, 1500);
                            return 0;
                        }
                        return prev - 1;
                    });
                }, 1000);
            }
            return () => clearInterval(timerRef.current);
        }, [view, currentQuestionIndex]);
        
        const resetTimer = () => {
            clearInterval(timerRef.current);
            setTimer(15);
            setIsTimeUp(false);
        };
        
        const handleNext = (isTimeUp = false) => {
            resetTimer();
            if (currentQuestionIndex < activeQuizData.questions.length - 1) {
                setCurrentQuestionIndex(prev => prev + 1);
            } else {
                setView('results');
            }
        };

        const QuizResults = ({ quizData, userAnswers, onRestart, onSelectNew }) => {
            const { score, correctAnswers, wrongAnswers, percentage } = useMemo(() => {
                let correct = 0;
                quizData.questions.forEach((q, i) => { if (q.correctAnswer === userAnswers[i]) correct++; });
                const total = quizData.questions.length;
                return { score: correct, correctAnswers: correct, wrongAnswers: total - correct, percentage: total > 0 ? Math.round((correct / total) * 100) : 0 };
            }, [quizData, userAnswers]);
            
            // Smooth transition effect
            useEffect(() => {
                const timer = setTimeout(() => {
                    // Force re-render for smooth animation
                }, 100);
                return () => clearTimeout(timer);
            }, []);

            return (
                <div className="w-full max-w-4xl mx-auto animate-fadeIn">
                    <div className="bg-white dark:bg-slate-800 p-6 md:p-8 text-center rounded-lg shadow-lg transition-all duration-500 ease-in-out">
                        <h2 className="font-serif text-3xl font-bold text-slate-800 dark:text-white mb-2">Quiz Results</h2>
                        <p className="text-slate-500 dark:text-slate-400 mb-6">You completed the {quizData.title} quiz!</p>
                        <div className="my-8 flex flex-col md:flex-row items-center justify-center gap-8 transition-all duration-700">
                            <DonutChart percentage={percentage} />
                            <div className="flex gap-4 text-left animate-slideInUp">
                                <div className="bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800/50 p-4 flex-1 rounded-lg transition-transform hover:scale-105"> 
                                    <div className="font-bold text-3xl text-green-600 dark:text-green-400">{correctAnswers}</div> 
                                    <div className="text-sm font-semibold text-green-800 dark:text-green-300">Correct</div> 
                                </div>
                                <div className="bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800/50 p-4 flex-1 rounded-lg transition-transform hover:scale-105"> 
                                    <div className="font-bold text-3xl text-red-600 dark:text-red-400">{wrongAnswers}</div> 
                                    <div className="text-sm font-semibold text-red-800 dark:text-red-300">Incorrect</div> 
                                </div>
                                <div className="bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800/50 p-4 flex-1 rounded-lg transition-transform hover:scale-105"> 
                                    <div className="font-bold text-3xl text-blue-600 dark:text-blue-400">{score}/{quizData.questions.length}</div> 
                                    <div className="text-sm font-semibold text-blue-800 dark:text-blue-300">Score</div> 
                                </div>
                            </div>
                        </div>
                        <div className="flex flex-col md:flex-row gap-4 justify-center mt-8 animate-fadeIn" style={{animationDelay: '200ms'}}>
                            <button onClick={onRestart} className="gradient-button px-8 py-3 rounded-full font-semibold transition-transform hover:scale-105">
                                <i className="fa-solid fa-redo mr-2"></i>Play Again
                            </button>
                            <button onClick={onSelectNew} className="px-8 py-3 rounded-full font-semibold bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 transition hover:scale-105">
                                Choose Another Quiz
                            </button>
                        </div>
                    </div>
                    <div className="bg-white dark:bg-slate-800 p-6 md:p-8 mt-6 text-left rounded-lg shadow-lg animate-fadeIn" style={{animationDelay: '400ms'}}>
                        <h3 className="font-serif text-2xl font-bold text-slate-800 dark:text-white mb-4">Review Answers</h3>
                        <div className="space-y-6">
                            {quizData.questions.map((q, i) => {
                                const userAnswer = userAnswers[i];
                                const isCorrect = q.correctAnswer === userAnswer;
                                return (
                                    <div key={i} className="border-b border-slate-200 dark:border-slate-700 pb-4 animate-fadeIn" style={{animationDelay: `${i * 100}ms`}}>
                                        <p className="font-semibold text-slate-800 dark:text-white">{i + 1}. {q.question}</p>
                                        <p className={`mt-2 text-sm ${isCorrect ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}> 
                                            <i className={`fa-solid ${isCorrect ? 'fa-check-circle' : 'fa-times-circle'} mr-2`}></i> 
                                            Your answer: <span className="font-bold">{userAnswer || "Not answered"}</span> 
                                        </p>
                                        {!isCorrect && (
                                            <p className="mt-1 text-sm text-green-600 dark:text-green-400"> 
                                                <i className="fa-solid fa-check-circle mr-2"></i> 
                                                Correct answer: <span className="font-bold">{q.correctAnswer}</span> 
                                            </p>
                                        )}
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                </div>
            );
        };
        
        const startQuiz = (quizData) => { 
            setActiveQuizData(quizData); 
            setUserAnswers(Array(quizData.questions.length).fill(null)); 
            setCurrentQuestionIndex(0); 
            resetTimer(); 
            setView('quiz'); 
        };
        
        const generateMixedQuiz = (subject, numQuestions) => {
            const allQuestions = Object.values(DATA.quizzes[subject].chapters).flatMap(chapter => chapter.questions);
            for (let i = allQuestions.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [allQuestions[i], allQuestions[j]] = [allQuestions[j], allQuestions[i]]; }
            const selectedQuestions = allQuestions.slice(0, numQuestions);
            return { title: `Mixed ${subject} Quiz (${selectedQuestions.length} Qs)`, questions: selectedQuestions };
        };

        const handleAnswerSelect = (answer) => {
            if (userAnswers[currentQuestionIndex] !== null) return;
            const newAnswers = [...userAnswers];
            newAnswers[currentQuestionIndex] = answer;
            setUserAnswers(newAnswers);
        };

        if (view === 'results') { 
            return (
                <Section>
                    <QuizResults 
                        quizData={activeQuizData} 
                        userAnswers={userAnswers} 
                        onRestart={() => startQuiz(activeQuizData)} 
                        onSelectNew={() => setView('subject_select')} 
                    />
                </Section>
            ); 
        }
        
        if (view === 'quiz') {
            const currentQuestion = activeQuizData.questions[currentQuestionIndex];
            const timerColor = timer > 10 ? 'text-green-500' : timer > 5 ? 'text-yellow-500' : 'text-red-500';
            return (
                <Section>
                    <div className="w-full max-w-3xl mx-auto bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl shadow-2xl animate-popIn relative overflow-hidden">
                        {isTimeUp && (
                            <div className="absolute inset-0 bg-red-800/80 backdrop-blur-sm flex flex-col justify-center items-center z-20 animate-popIn">
                                <i className="far fa-clock text-7xl text-white animate-tada"></i>
                                <h2 className="text-5xl font-extrabold text-white mt-4">Time's Up!</h2>
                            </div>
                        )}
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="font-serif text-xl font-bold text-slate-800 dark:text-white">{activeQuizData.title}</h2>
                            <div className="flex items-center gap-4">
                                <div className={`flex items-center gap-2 font-bold text-lg ${timerColor} animate-pulse`}>
                                    <i className="far fa-clock"></i>
                                    <span>{timer}s</span>
                                </div>
                                <span className="font-semibold text-slate-500 dark:text-slate-400">{currentQuestionIndex + 1} / {activeQuizData.questions.length}</span>
                            </div>
                        </div>
                        <div className="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5 mb-6"> 
                            <div 
                                className="bg-indigo-600 h-2.5 rounded-full transition-all duration-300 ease-out" 
                                style={{ width: `${((currentQuestionIndex + 1) / activeQuizData.questions.length) * 100}%` }}
                            ></div> 
                        </div>
                        <h3 className="text-xl md:text-2xl font-semibold text-slate-900 dark:text-white mb-8 text-center min-h-[6rem] flex items-center justify-center animate-fadeIn">
                            {currentQuestion.question}
                        </h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {currentQuestion.options.map(option => {
                                const isSelected = userAnswers[currentQuestionIndex] === option;
                                
                                let buttonClass = 'p-4 rounded-lg text-left font-semibold border-2 transition-all duration-300 ';
                                if(isSelected) {
                                   buttonClass += 'bg-indigo-500 border-indigo-500 text-white shadow-lg transform scale-105';
                                } else {
                                   buttonClass += 'bg-slate-100 dark:bg-slate-900/50 border-transparent hover:border-indigo-400 dark:hover:border-indigo-500 hover:scale-105';
                                }
                                return (
                                    <button 
                                        key={option} 
                                        onClick={() => handleAnswerSelect(option)} 
                                        disabled={userAnswers[currentQuestionIndex] !== null}
                                        className={buttonClass}
                                    >
                                        {option}
                                    </button>
                                );
                            })}
                        </div>
                        <div className="mt-8 text-right">
                             <button 
                                onClick={() => handleNext()} 
                                disabled={userAnswers[currentQuestionIndex] === null}
                                className="gradient-button px-10 py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:scale-105"
                            >
                                {currentQuestionIndex < activeQuizData.questions.length - 1 ? 'Next' : 'Finish'} 
                                <i className="fa-solid fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>
                </Section>
            );
        }

        if (view === 'quiz_config') {
            const questionOptions = [10, 20, 30, 50];
            return (
                <Section title={`Configure Mixed ${activeSubject} Quiz`} subtitle="How many questions would you like?">
                    <div className="max-w-xl mx-auto text-center">
                        <div className="bg-white dark:bg-slate-800 p-6 grid grid-cols-2 gap-4 rounded-lg shadow-lg">
                            {questionOptions.map(num => (
                                <button 
                                    key={num} 
                                    onClick={() => startQuiz(generateMixedQuiz(activeSubject, num))} 
                                    className="gradient-button text-xl font-bold p-6 rounded-xl shadow-lg hover:shadow-2xl transition-all hover:scale-105"
                                >
                                    {num}
                                    <span className="block text-sm font-semibold opacity-80">Questions</span>
                                </button>
                            ))}
                        </div>
                        <button onClick={() => setView('chapter_select')} className="mt-8 text-sm font-semibold text-slate-500 hover:text-indigo-500 transition-colors">
                            <i className="fa-solid fa-arrow-left mr-2"></i>Back to Chapters 
                        </button>
                    </div>
                </Section>
            );
        }

        if (view === 'chapter_select') {
            const subjectData = DATA.quizzes[activeSubject];
            return (
                <Section title={`${activeSubject} Quizzes`} subtitle="Choose a chapter or try a mix of all chapters.">
                    <div className="max-w-2xl mx-auto">
                        <button 
                            onClick={() => setView('quiz_config')} 
                            className="w-full gradient-button text-lg font-semibold p-6 rounded-xl mb-6 shadow-lg hover:shadow-2xl transition-all hover:scale-105 text-left flex justify-between items-center"
                        >
                            <span><i className="fa-solid fa-random mr-3"></i>Mixed Chapter Quiz</span> 
                            <i className="fa-solid fa-arrow-right"></i> 
                        </button>
                        <div className="bg-white dark:bg-slate-800 p-6 space-y-3 rounded-lg shadow-lg">
                            {Object.entries(subjectData.chapters).map(([chapterTitle, chapterData]) => (
                                <button 
                                    key={chapterTitle} 
                                    onClick={() => startQuiz({ title: chapterTitle, questions: chapterData.questions })} 
                                    className="w-full text-left p-4 rounded-lg font-medium bg-slate-100 dark:bg-slate-900/50 hover:bg-slate-200 dark:hover:bg-slate-700 transition-all hover:scale-105 flex justify-between items-center"
                                >
                                    <span>{chapterTitle}</span> 
                                    <span className="text-xs font-semibold text-slate-500">{chapterData.questions.length} Questions</span> 
                                </button>
                            ))}
                        </div>
                        <button onClick={() => setView('subject_select')} className="mt-8 text-sm font-semibold text-slate-500 hover:text-indigo-500 transition-colors">
                            <i className="fa-solid fa-arrow-left mr-2"></i>Back to Subjects 
                        </button>
                    </div>
                </Section>
            );
        }

        return (
            <Section title="Subject Mastery" subtitle="Select a subject to test your knowledge and improve your skills.">
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {Object.entries(DATA.quizzes).map(([subject, quizMeta]) => (
                        <div key={subject} className="bg-white dark:bg-slate-800 p-6 text-center rounded-2xl shadow-lg animate-slideInUp card-hover flex flex-col transition-all hover:scale-105">
                            <div className="h-20 w-20 mx-auto rounded-full bg-gradient-to-br from-indigo-200 to-purple-200 dark:from-indigo-900/40 dark:to-purple-900/40 grid place-items-center text-indigo-500 text-4xl mb-4"> 
                                <i className={quizMeta.icon}></i> 
                            </div>
                            <h3 className="font-serif text-2xl font-bold text-slate-800 dark:text-white">{subject}</h3>
                            <p className="text-slate-500 dark:text-slate-400 mt-1 mb-6 flex-grow">{quizMeta.title}</p>
                            <button 
                                onClick={() => { setActiveSubject(subject); setView('chapter_select'); }} 
                                className="gradient-button w-full px-6 py-3 rounded-lg font-semibold mt-auto transition-transform hover:scale-105"
                            >
                                Start Quiz 
                            </button>
                        </div>
                    ))}
                </div>
            </Section>
        );
    };

    // =================================================================================
    // ===== MODALS & POPUPS =====
    // =================================================================================
    const PaymentModal = ({ onPaymentSuccess, onClose, userName, stream }) => {
        const [premiumCode, setPremiumCode] = useState('');
        const [isLoading, setIsLoading] = useState(false);
        const [error, setError] = useState('');
        
        const handleVerify = (e) => {
            e.preventDefault(); 
            setError(''); 
            const expectedCode = generatePremiumCode(userName, stream);
            
            if (premiumCode === expectedCode) {
                setIsLoading(true); 
                setTimeout(() => { 
                    setIsLoading(false); 
                    onPaymentSuccess(); 
                }, 1500);
            } else { 
                setError('Invalid Premium Code. Please check and try again.'); 
            }
        };
        
        return (
            <div className="overlay">
                <div className="modal-box bg-slate-900 text-white">
                    <div className="p-8 bg-gradient-to-br from-teal-500 to-cyan-600">
                        <i className="fas fa-rocket text-5xl mb-3"></i>
                        <h2 className="text-3xl font-extrabold font-display">Unlock Your Potential</h2>
                        <p className="text-white/80 mt-1">Get lifetime access to all premium content.</p>
                    </div>
                    <div className="p-8 text-left space-y-6">
                        <div>
                            <span className="text-xs font-bold uppercase bg-slate-700 text-teal-300 px-2 py-1 rounded-full">Step 1: Payment</span>
                            <p className="text-white/80 mt-2">Send <span className="font-bold text-white">Rs.99</span> to eSewa ID:</p>
                            <div className="bg-slate-800 border border-slate-700 p-3 rounded-lg mt-2 text-center text-xl font-mono tracking-widest">{DATA.esewaId}</div>
                        </div>
                        <div>
                            <span className="text-xs font-bold uppercase bg-slate-700 text-teal-300 px-2 py-1 rounded-full">Step 2: Activation</span>
                            <p className="text-white/80 mt-2">Contact admin on WhatsApp to get your code, then enter it below.</p>
                            <a href={DATA.whatsAppContactLink} target="_blank" rel="noopener noreferrer" className="inline-block mt-2 mb-3 bg-green-500 text-white font-bold py-2 px-4 rounded-full text-sm touch-target">
                                <i className="fab fa-whatsapp mr-2"></i>Contact Admin
                            </a>
                            <form onSubmit={handleVerify}>
                                <input 
                                    type="text" 
                                    value={premiumCode} 
                                    onChange={(e) => setPremiumCode(e.target.value)} 
                                    placeholder="Enter Premium Code" 
                                    className="w-full p-3 border border-slate-700 rounded-md bg-slate-800 text-white focus:ring-2 focus:ring-teal-400 focus:outline-none" 
                                    required 
                                />
                                {error && <p className="text-red-400 text-sm mt-2 text-center">{error}</p>}
                                <button 
                                    type="submit" 
                                    className="w-full gradient-button font-bold py-3 px-6 rounded-full shadow-lg text-lg mt-4 touch-target" 
                                    disabled={isLoading}
                                >
                                    {isLoading ? 'Activating...' : 'Activate Premium'}
                                </button>
                            </form>
                        </div>
                        <button onClick={onClose} className="text-slate-400 hover:text-white text-sm w-full mt-2">Maybe Later</button>
                    </div>
                </div>
            </div>
        );
    };

    const PresentationRequestModal = ({ user, onClose }) => {
        const [formData, setFormData] = useState({ subject: '', topic: '', specifics: '' });
        
        const handleSendRequest = () => {
            const message = `*Presentation Request*\n\n*Name:* ${user.name}\n*Grade:* ${user.grade}\n*Stream:* ${user.stream}\n\n*Subject:* ${formData.subject}\n*Topic:* ${formData.topic}\n\n*Specific Points to Cover:*\n${formData.specifics || 'N/A'}\n\n---\n_Sent from Ganesh Dai Academy_`;
            const whatsappUrl = `https://wa.me/${DATA.presentationRequestNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
            onClose();
        };
        
        return (
            <div className="overlay">
                <div className="modal-box bg-white dark:bg-slate-900">
                    <div className="p-8 text-left">
                        <h2 className="text-2xl font-bold font-display">Request a Presentation</h2>
                        <p className="text-slate-500 dark:text-slate-400 mt-1 mb-6">Need a presentation on a specific topic? Fill out the form below.</p>
                        <div className="space-y-4">
                            <input 
                                type="text" 
                                placeholder="Subject (e.g., Physics)" 
                                value={formData.subject} 
                                onChange={e => setFormData({...formData, subject: e.target.value})} 
                                className="w-full p-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 rounded-md" 
                            />
                            <input 
                                type="text" 
                                placeholder="Topic (e.g., Projectile Motion)" 
                                value={formData.topic} 
                                onChange={e => setFormData({...formData, topic: e.target.value})} 
                                className="w-full p-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 rounded-md" 
                            />
                            <textarea 
                                placeholder="Specific points or questions to cover..." 
                                value={formData.specifics} 
                                onChange={e => setFormData({...formData, specifics: e.target.value})} 
                                rows="3" 
                                className="w-full p-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 rounded-md"
                            ></textarea>
                        </div>
                        <div className="flex gap-4 mt-6">
                            <button onClick={onClose} className="w-full py-3 rounded-full bg-slate-200 dark:bg-slate-700 font-bold touch-target">Cancel</button>
                            <button onClick={handleSendRequest} className="w-full gradient-button font-bold py-3 rounded-full flex items-center justify-center gap-2 touch-target">
                                <i className="fab fa-whatsapp"></i> Send Request
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        );
    };
    
    // =================================================================================
    // ===== CELEBRATION & CERTIFICATE =====
    // =================================================================================
    const WelcomeCelebration = ({ name }) => {
        useEffect(() => {
            // Create confetti animation
            const confettiElements = document.querySelectorAll('.confetti');
            confettiElements.forEach((confetti, index) => {
                const left = Math.random() * 100;
                const animationDuration = 1 + Math.random() * 2;
                const animationDelay = Math.random() * 2;
                
                confetti.style.left = `${left}%`;
                confetti.style.animation = `confettiRain ${animationDuration}s ease-out ${animationDelay}s forwards`;
            });
        }, []);
        
        return (
            <div className="overlay overflow-hidden animated-gradient-bg">
                <div className="text-center text-white relative z-10">
                    <h1 className="text-5xl md:text-7xl font-display font-bold" style={{ animation: `slideInDown .8s ease-out`}}>Welcome, {name}!</h1>
                    <p className="mt-4 text-xl" style={{ animation: `fadeIn 1s .5s ease-out backwards` }}>We're so glad you're here.</p>
                </div>
                {Array.from({length: 10}).map((_, i) => (
                    <div key={i} className="confetti"></div>
                ))}
            </div>
        );
    };

    const CertificateModal = ({ name, onContinue }) => { 
    const certificateRef = useRef(null); 
    const [downloading, setDownloading] = useState(false); 
    
    const handleDownload = async () => { 
        if (certificateRef.current && !downloading && window.html2canvas) { 
            setDownloading(true); 
            try { 
                const canvas = await html2canvas(certificateRef.current, { 
                    scale: 2, 
                    useCORS: true, 
                    backgroundColor: '#fdfdfd',
                    logging: false
                }); 
                const link = document.createElement('a'); 
                link.href = canvas.toDataURL('image/png'); 
                link.download = `Ganesh_Dai_Academy_Certificate_${name}.png`; 
                document.body.appendChild(link);
                link.click(); 
                document.body.removeChild(link);
            } catch (error) { 
                console.error("Download failed:", error); 
                alert("Download failed. Please try again.");
            } finally { 
                setDownloading(false); 
            } 
        } else if (!window.html2canvas) {
            alert("Download feature is not available right now. Please try again later.");
        }
    }; 
    
    return (
        <div className="overlay">
            <div className="w-full max-w-4xl bg-white dark:bg-slate-900 rounded-xl max-h-[90vh] flex flex-col slide-in-up" onClick={e=>e.stopPropagation()}>
                <div className="p-4 sm:p-6 overflow-y-auto">
                    <div ref={certificateRef} id="certificate" className="text-slate-800 bg-white p-8 rounded-lg">
                        <div className="text-center border-4 border-gold-500 p-8 bg-gradient-to-b from-white to-amber-50">
                            <img src={DATA.logoUrl} className="w-24 h-24 mx-auto mb-4 rounded-full border-4 border-amber-400" alt="Academy Logo"/>
                            <h1 className="font-serif text-4xl text-amber-600 mb-6">Certificate of Membership</h1>
                            <div className="my-8 border-t-2 border-b-2 border-amber-300 py-6">
                                <p className="text-lg text-slate-600 mb-4">This certificate is proudly presented to</p>
                                <p className="font-handwriting text-6xl font-bold text-slate-800 my-6" style={{color: '#1f2937'}}>
                                    {name}
                                </p>
                                <p className="text-lg text-slate-600 max-w-2xl mx-auto">
                                    for joining the Ganesh Dai Academy. We wish you the very best for your 
                                    academic journey and future endeavors.
                                </p>
                            </div>
                            <div className="mt-8 flex justify-between items-end">
                                <div className="text-left">
                                    <div className="border-t-2 border-slate-400 pt-2">
                                        <p className="font-semibold" style={{color: '#1f2937'}}>{new Date().toLocaleDateString('en-CA')}</p>
                                        <p className="text-sm text-slate-500">Date</p>
                                    </div>
                                </div>
                                <div className="text-center">
                                    <div className="mb-2">
                                        <img src={DATA.logoUrl} className="w-16 h-16 mx-auto rounded-full" alt="Signature"/>
                                    </div>
                                    <div className="border-t-2 border-slate-400 pt-2">
                                        <p className="font-handwriting text-2xl text-amber-600">Ganesh Dahal</p>
                                        <p className="text-sm text-slate-500">Founder, Ganesh Dai Academy</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                {/* Fixed Button Container - Always Visible */}
                <div className="flex flex-col sm:flex-row gap-3 p-4 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 rounded-b-xl">
                    <button 
                        onClick={handleDownload} 
                        disabled={downloading}
                        className="flex-1 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center transition-all disabled:opacity-70 disabled:cursor-not-allowed touch-target shadow-lg"
                    >
                        {downloading ? (
                            <>
                                <i className="fa-solid fa-spinner spinner mr-2"></i> 
                                Downloading...
                            </>
                        ) : (
                            <>
                                <i className="fa-solid fa-download mr-2"></i>
                                Download Certificate
                            </>
                        )}
                    </button>
                    <button 
                        onClick={onContinue} 
                        className="flex-1 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center transition-all touch-target shadow-lg"
                    >
                        Continue to Academy 
                        <i className="fa-solid fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </div>
    ); 
};
    
    // =================================================================================
    // ===== ONBOARDING =====
    // =================================================================================
    const WelcomeScreen = ({ onSetupComplete }) => {
        const [step, setStep] = useState(1);
        const [userData, setUserData] = useState({ name: '', stream: '', grade: '', optionals: [] });
        const selectedStreamData = DATA.streams.find(s => s.id === userData.stream);
        
        const handleOptionalSelect = (subject, max) => {
             if (max === 1) { 
                 setUserData(prev => ({ ...prev, optionals: [subject] })); 
             } else { 
                 const newOptionals = userData.optionals.includes(subject) 
                     ? userData.optionals.filter(s => s !== subject) 
                     : [...userData.optionals, subject]; 
                 if (newOptionals.length <= max) { 
                     setUserData(prev => ({ ...prev, optionals: newOptionals })); 
                 } 
             }
        };

        const handleSubmit = (e) => {
            e.preventDefault();
            if(step === 1 && userData.name && userData.stream && userData.grade) { 
                setStep(2); 
            } else if (step === 2) { 
                onSetupComplete(userData.name, userData.stream, userData.grade, userData.optionals); 
            }
        };
        
        return (
            <div className="min-h-screen w-full flex items-center justify-center p-4 bg-slate-900 bg-cover bg-center" style={{backgroundImage: "linear-gradient(rgba(2,6,23,0.8), rgba(2,6,23,0.8)), url('https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?q=80&w=2070&auto=format&fit=crop')"}}>
                <div className="w-full max-w-md bg-slate-800/50 backdrop-blur-md rounded-2xl p-8 shadow-2xl animate-popIn">
                    <div className="text-center mb-8">
                        <img src={DATA.logoUrl} alt="Logo" className="h-20 w-20 mx-auto rounded-full" />
                        <h1 className="text-4xl font-bold text-white mt-4 font-display">Welcome to {DATA.appName}</h1>
                        <p className="text-slate-300 mt-2">Your +2 academic command center.</p>
                    </div>
                    <form onSubmit={handleSubmit}>
                        {step === 1 ? (
                            <div className="space-y-4 animate-fadeIn">
                                <input 
                                    type="text" 
                                    value={userData.name} 
                                    onChange={(e) => setUserData(p => ({...p, name: e.target.value}))} 
                                    placeholder="Enter Your Name" 
                                    className="w-full px-4 py-3 rounded-lg border-0 bg-slate-900/50 text-white placeholder-slate-400 focus:ring-2 focus:ring-teal-400" 
                                    required 
                                />
                                <select 
                                    value={userData.grade} 
                                    onChange={(e) => setUserData(p => ({...p, grade: e.target.value}))} 
                                    className="w-full px-4 py-3 rounded-lg border-0 bg-slate-900/50 text-white" 
                                    required
                                >
                                    <option value="" disabled>Select Your Grade</option>
                                    <option value="11">Grade 11</option>
                                    <option value="12">Grade 12</option>
                                </select>
                                <select 
                                    value={userData.stream} 
                                    onChange={(e) => setUserData(p => ({...p, stream: e.target.value, optionals: []}))} 
                                    className="w-full px-4 py-3 rounded-lg border-0 bg-slate-900/50 text-white" 
                                    required
                                >
                                    <option value="" disabled>Select Your Stream</option>
                                    {DATA.streams.map(s => (
                                        <option key={s.id} value={s.id}>{s.name}</option>
                                    ))}
                                </select>
                                <button 
                                    type="submit" 
                                    className="w-full gradient-button font-bold py-3 rounded-full text-lg mt-4 touch-target" 
                                    disabled={!userData.stream}
                                >
                                    Next <i className="fas fa-arrow-right ml-2"></i>
                                </button>
                            </div>
                        ) : (
                            <div className="space-y-4 animate-fadeIn">
                                <h3 className="text-white font-bold text-lg">Select Your Optional Subjects</h3>
                                {selectedStreamData && selectedStreamData.optional.flat().map(sub => (
                                    <label 
                                        key={sub} 
                                        className={`flex items-center p-3 rounded-lg border-2 ${userData.optionals.includes(sub) 
                                            ? 'bg-teal-500/30 border-teal-400' 
                                            : 'bg-slate-900/50 border-slate-700'}`}
                                    >
                                        <input 
                                            type={selectedStreamData.optional_count === 1 ? 'radio' : 'checkbox'} 
                                            name="optional" 
                                            checked={userData.optionals.includes(sub)} 
                                            onChange={() => handleOptionalSelect(sub, selectedStreamData.optional_count)} 
                                            className="h-4 w-4 text-teal-500 bg-slate-800 border-slate-600 focus:ring-teal-500" 
                                        />
                                        <span className="ml-3 text-white">{sub}</span>
                                    </label>
                                ))}
                                <button 
                                    type="submit" 
                                    className="w-full gradient-button font-bold py-3 rounded-full text-lg mt-4 touch-target" 
                                    disabled={userData.optionals.length === 0 || userData.optionals.length > selectedStreamData.optional_count}
                                >
                                    Start Studying
                                </button>
                            </div>
                        )}
                    </form>
                </div>
            </div>
        );
    };
    
    // =================================================================================
    // ===== PAGE SECTIONS & COMPONENTS =====
    // =================================================================================
    const NoteCard = ({ note, isBookmarked, onBookmark, onView, isPremiumUser, onGoPremium }) => {
        const subjectColor = DATA.subjectData[note.subject]?.color || 'from-slate-500 to-slate-700';
        
        return (
            <div 
                onClick={() => (note.isPremium && !isPremiumUser) ? onGoPremium() : onView(note)} 
                className={`p-5 rounded-xl shadow-lg hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 cursor-pointer flex flex-col justify-between text-white relative overflow-hidden bg-gradient-to-br ${subjectColor}`}
            >
                <div className="absolute inset-0 bg-black/30"></div>
                <div className="relative z-10">
                    <div className="flex justify-between items-start">
                        <h4 className="font-bold text-lg pr-2">{note.title}</h4>
                        <button 
                            onClick={(e) => { e.stopPropagation(); onBookmark(note.id); }} 
                            className={`flex-shrink-0 text-2xl touch-target ${isBookmarked ? 'text-teal-300' : 'text-white/50 hover:text-white'}`}
                        >
                            <i className={`${isBookmarked ? 'fas' : 'far'} fa-bookmark`}></i>
                        </button>
                    </div>
                    <p className="text-sm text-white/70 mt-1">Grade {note.grade} &bull; {note.subject}</p>
                </div>
                <div className="mt-4 flex justify-between items-center relative z-10">
                    {note.isPremium && (
                        <span className="flex items-center gap-2 text-xs font-bold text-amber-300 uppercase">
                            <i className="fas fa-star"></i>Premium
                        </span>
                    )}
                    <div className={`${!note.isPremium ? 'invisible' : ''}`}></div>
                    <i className={`fas ${note.isPremium && !isPremiumUser ? 'fa-lock' : 'fa-arrow-right'} text-white/50`}></i>
                </div>
            </div>
        );
    };
    
    const Dashboard = ({ user, setActiveSection, lastViewedNote, onGradeChange }) => {
        const streamInfo = DATA.streams.find(s => s.id === user.stream);
        const quote = DATA.motivationalQuotes[new Date().getDate() % DATA.motivationalQuotes.length];
        
        const ActionCard = ({ icon, title, description, onClick, color = 'from-teal-500 to-cyan-500' }) => (
            <button 
                onClick={onClick} 
                className={`p-6 rounded-2xl shadow-md text-left w-full hover:shadow-xl hover:-translate-y-1.5 transition-all duration-300 text-white bg-gradient-to-br ${color} touch-target`}
            >
                <i className={`${icon} text-3xl mb-3 text-white/80`}></i>
                <h3 className="font-bold text-xl font-display">{title}</h3>
                <p className="text-white/80 text-sm">{description}</p>
            </button>
        );
        
        return (
            <div className="section space-y-8 animate-fadeIn">
                <div className={`p-8 rounded-2xl shadow-lg relative overflow-hidden text-white bg-gradient-to-br ${streamInfo?.color || 'from-teal-600 to-cyan-700'}`}>
                    <div className="absolute -right-10 -top-10 text-white/10 text-9xl transform rotate-12">
                        <i className="fas fa-graduation-cap"></i>
                    </div>
                    <div className="flex justify-between items-start relative z-10">
                        <div>
                            <h1 className="text-4xl font-bold font-display">Welcome, {user.name}!</h1>
                            <p className="mt-2 text-lg opacity-90">
                                Your Grade {user.grade} <span className="font-semibold">{streamInfo?.name}</span> hub is ready.
                            </p>
                        </div>
                        <div className="flex flex-col items-end gap-2">
                            <select 
                                value={user.grade} 
                                onChange={(e) => onGradeChange(e.target.value)} 
                                className="bg-white/20 backdrop-blur-sm text-white border border-white/30 rounded-lg px-3 py-1 text-sm focus:ring-2 focus:ring-white/50"
                            >
                                <option value="11">Grade 11</option>
                                <option value="12">Grade 12</option>
                            </select>
                            <span className="text-sm opacity-80">Switch Grade</span>
                        </div>
                    </div>
                </div>
                
                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <ActionCard 
                        icon="fas fa-compass" 
                        title="Explore Notes" 
                        description="Browse all notes for your stream." 
                        onClick={() => setActiveSection({name: 'explorer'})} 
                    />
                    <ActionCard 
                        icon="fas fa-feather-alt" 
                        title="Exam Prep" 
                        description="Find routines, checklists & model questions." 
                        onClick={() => setActiveSection({name: 'examprep'})}
                        color="from-blue-500 to-indigo-500"
                    />
                    <ActionCard 
                        icon="fas fa-tools" 
                        title="Quick Tools" 
                        description="GPA Calculator, unit converter, and more." 
                        onClick={() => setActiveSection({name: 'tools'})}
                        color="from-purple-500 to-pink-500"
                    />
                </div>
                
                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    {lastViewedNote && (
                        <div className="card p-6">
                            <h3 className="font-bold text-lg mb-3">Continue Studying</h3>
                            <div 
                                className="border-l-4 border-teal-500 pl-4 py-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-r-md cursor-pointer" 
                                onClick={() => setActiveSection({name:'explorer'})}
                            >
                                <p className="font-semibold">{lastViewedNote.title}</p>
                                <p className="text-sm text-slate-500">{lastViewedNote.subject} - Grade {lastViewedNote.grade}</p>
                            </div>
                        </div>
                    )}
                    <div className="card p-6 flex items-center">
                        <i className="fas fa-lightbulb text-4xl text-amber-400 mr-4"></i>
                        <div>
                            <h3 className="font-bold text-lg">Quote of the Day</h3>
                            <p className="text-slate-600 dark:text-slate-300 italic">"{quote}"</p>
                        </div>
                    </div>
                </div>
            </div>
        );
    };

    const NotesExplorer = ({ user, isPremium, bookmarkedNotes, onBookmark, onViewNote, onGoPremium }) => {
        const streamSubjects = useMemo(() => { 
            const streamInfo = DATA.streams.find(s => s.id === user.stream); 
            return [...(streamInfo?.compulsory || []), ...(user.optionals || [])]; 
        }, [user]);
        
        const [searchTerm, setSearchTerm] = useState('');
        const [filters, setFilters] = useState({ grade: user.grade, subject: 'all' });
        
        const filteredNotes = useMemo(() => 
            DATA.notes[user.grade].filter(note => 
                (filters.subject === 'all' ? streamSubjects.includes(note.subject) : note.subject === filters.subject) && 
                (note.title.toLowerCase().includes(searchTerm.toLowerCase()))
            ), 
            [searchTerm, filters, streamSubjects, user.grade]
        );

        return (
            <div className="section animate-fadeIn">
                <h2 className="text-3xl font-bold font-display mb-6">Note Explorer</h2>
                
                <div className="sticky top-0 z-30 bg-slate-50/80 dark:bg-slate-900/80 backdrop-blur-sm p-4 -mx-4 md:-mx-6 mb-6 rounded-b-lg">
                    <div className="relative mb-4">
                        <i className="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"></i>
                        <input 
                            type="text" 
                            placeholder="Search notes by title..." 
                            value={searchTerm} 
                            onChange={e => setSearchTerm(e.target.value)} 
                            className="w-full pl-12 pr-4 py-3 rounded-full border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 focus:ring-2 focus:ring-teal-500 focus:border-transparent transition" 
                        />
                    </div>
                    <div className="flex items-center gap-4">
                        <select 
                            value={filters.grade} 
                            onChange={e => setFilters(p => ({...p, grade: e.target.value}))} 
                            className="w-1/3 py-3 px-4 rounded-full border-2 dark:border-slate-700 bg-white dark:bg-slate-800"
                        >
                            <option value={user.grade}>Grade {user.grade}</option>
                        </select>
                        <select 
                            value={filters.subject} 
                            onChange={e => setFilters(p => ({...p, subject: e.target.value}))} 
                            className="w-2/3 py-3 px-4 rounded-full border-2 dark:border-slate-700 bg-white dark:bg-slate-800"
                        >
                            <option value="all">All My Subjects</option>
                            {streamSubjects.map(sub => (
                                <option key={sub} value={sub}>{sub}</option>
                            ))}
                        </select>
                    </div>
                </div>
                
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    {filteredNotes.map((note, i) => (
                        <div 
                            key={note.id} 
                            style={{ animationDelay: `${i * 30}ms` }} 
                            className="animate-fadeIn"
                        >
                            <NoteCard 
                                note={note} 
                                isBookmarked={bookmarkedNotes.includes(note.id)} 
                                onBookmark={onBookmark} 
                                onView={onViewNote} 
                                isPremiumUser={isPremium} 
                                onGoPremium={onGoPremium}
                            />
                        </div>
                    ))}
                </div>
                
                {filteredNotes.length === 0 && (
                    <div className="text-center py-12">
                        <i className="fas fa-search text-5xl text-slate-300 mb-4"></i>
                        <h3 className="text-xl font-bold text-slate-500">No notes found</h3>
                        <p className="text-slate-400">Try adjusting your search or filters</p>
                    </div>
                )}
            </div>
        );
    };

    const DigitalLibrary = ({ user, isPremium, onViewNote, onGoPremium }) => {
        const [search, setSearch] = useState('');
        const [category, setCategory] = useState('all');
        
        // Get library items for the user's grade only
        const libraryItems = DATA.digitalLibrary[user.grade] || [];
        
        const filtered = libraryItems.filter(it =>
            (it.title.toLowerCase().includes(search.toLowerCase()) ||
            (it.description || '').toLowerCase().includes(search.toLowerCase())) &&
            (category === 'all' || (category === 'premium' && it.isPremium) || (category === 'free' && !it.isPremium))
        );

        const categories = [
            { id: 'all', name: 'All Resources' },
            { id: 'free', name: 'Free Resources' },
            { id: 'premium', name: 'Premium Resources' }
        ];

        return (
            <div className="section animate-fadeIn">
                <h2 className="text-3xl font-bold font-display mb-4">Digital Library - Grade {user.grade}</h2>

                <div className="mb-6 space-y-4">
                    <input
                        value={search}
                        onChange={(e) => setSearch(e.target.value)}
                        placeholder="Search library..."
                        className="w-full pl-4 pr-4 py-3 rounded-full border-2 dark:border-slate-700 bg-white dark:bg-slate-800 focus:ring-2 focus:ring-teal-500"
                    />
                    
                    <div className="flex overflow-x-auto pb-2 gap-2">
                        {categories.map(cat => (
                            <button
                                key={cat.id}
                                onClick={() => setCategory(cat.id)}
                                className={`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap touch-target ${
                                    category === cat.id 
                                    ? 'bg-teal-500 text-white' 
                                    : 'bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300'
                                }`}
                            >
                                {cat.name}
                            </button>
                        ))}
                    </div>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {filtered.map(item => (
                        <div key={item.id} className="card p-5">
                            <div className="flex justify-between items-start mb-3">
                                <div>
                                    <h4 className="font-bold text-lg">{item.title}</h4>
                                    <p className="text-sm text-slate-500 dark:text-slate-400 mt-1">{item.description}</p>
                                </div>
                                {item.isPremium && !isPremium && (
                                    <span className="text-amber-400 text-sm font-bold flex items-center">
                                        <i className="fas fa-star mr-1"></i> Premium
                                    </span>
                                )}
                            </div>

                            <div className="mt-4 flex gap-2">
                                {(!item.isPremium || isPremium) ? (
                                    <button
                                        onClick={() => onViewNote && onViewNote({
                                            id: item.id,
                                            title: item.title,
                                            link: item.link,
                                        })}
                                        className="px-4 py-2 rounded-full bg-teal-500 text-white font-semibold text-sm touch-target"
                                    >
                                        <i className="fas fa-eye mr-2"></i> Preview
                                    </button>
                                ) : (
                                    <button
                                        onClick={onGoPremium}
                                        className="px-4 py-2 rounded-full border border-amber-500 text-amber-500 font-semibold text-sm touch-target"
                                    >
                                        <i className="fas fa-lock mr-2"></i> Unlock
                                    </button>
                                )}
                                
                                {item.isPremium && isPremium && (
                                    <span className="px-3 py-2 rounded-full bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 text-sm font-medium">
                                        <i className="fas fa-check mr-1"></i> Unlocked
                                    </span>
                                )}
                            </div>
                        </div>
                    ))}
                    {filtered.length === 0 && (
                        <div className="col-span-full text-center py-12">
                            <i className="fas fa-book-open text-5xl text-slate-400 mb-4"></i>
                            <h3 className="text-xl font-bold">No resources found</h3>
                            <p className="text-slate-500">Try adjusting your search or category filter</p>
                        </div>
                    )}
                </div>
            </div>
        );
    };

    const OurBooks = ({ user, isPremium, onViewNote, onGoPremium }) => {
        const [search, setSearch] = useState('');
        const [category, setCategory] = useState('all');
        
        // Get books for the user's grade only
        const books = DATA.ourBooks[user.grade] || [];
        
        const filtered = books.filter(it =>
            (it.title.toLowerCase().includes(search.toLowerCase()) ||
            (it.description || '').toLowerCase().includes(search.toLowerCase())) &&
            (category === 'all' || (category === 'premium' && it.isPremium) || (category === 'free' && !it.isPremium))
        );

        const categories = [
            { id: 'all', name: 'All Books' },
            { id: 'free', name: 'Free Books' },
            { id: 'premium', name: 'Premium Books' }
        ];

        return (
            <div className="section animate-fadeIn">
                <h2 className="text-3xl font-bold font-display mb-4">Our Books - Grade {user.grade}</h2>

                <div className="mb-6 space-y-4">
                    <input
                        value={search}
                        onChange={(e) => setSearch(e.target.value)}
                        placeholder="Search books..."
                        className="w-full pl-4 pr-4 py-3 rounded-full border-2 dark:border-slate-700 bg-white dark:bg-slate-800 focus:ring-2 focus:ring-teal-500"
                    />
                    
                    <div className="flex overflow-x-auto pb-2 gap-2">
                        {categories.map(cat => (
                            <button
                                key={cat.id}
                                onClick={() => setCategory(cat.id)}
                                className={`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap touch-target ${
                                    category === cat.id 
                                    ? 'bg-teal-500 text-white' 
                                    : 'bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300'
                                }`}
                            >
                                {cat.name}
                            </button>
                        ))}
                    </div>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {filtered.map(item => (
                        <div key={item.id} className="card p-5">
                            <div className="flex justify-between items-start mb-3">
                                <div>
                                    <h4 className="font-bold text-lg">{item.title}</h4>
                                    <p className="text-sm text-slate-500 dark:text-slate-400 mt-1">{item.description}</p>
                                </div>
                                {item.isPremium && !isPremium && (
                                    <span className="text-amber-400 text-sm font-bold flex items-center">
                                        <i className="fas fa-star mr-1"></i> Premium
                                    </span>
                                )}
                            </div>

                            <div className="mt-4 flex gap-2">
                                {(!item.isPremium || isPremium) ? (
                                    <button
                                        onClick={() => onViewNote && onViewNote({
                                            id: item.id,
                                            title: item.title,
                                            link: item.link,
                                        })}
                                        className="px-4 py-2 rounded-full bg-teal-500 text-white font-semibold text-sm touch-target"
                                    >
                                        <i className="fas fa-eye mr-2"></i> Preview
                                    </button>
                                ) : (
                                    <button
                                        onClick={onGoPremium}
                                        className="px-4 py-2 rounded-full border border-amber-500 text-amber-500 font-semibold text-sm touch-target"
                                    >
                                        <i className="fas fa-lock mr-2"></i> Unlock
                                    </button>
                                )}
                                
                                {item.isPremium && isPremium && (
                                    <span className="px-3 py-2 rounded-full bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 text-sm font-medium">
                                        <i className="fas fa-check mr-1"></i> Unlocked
                                    </span>
                                )}
                            </div>
                        </div>
                    ))}
                    {filtered.length === 0 && (
                        <div className="col-span-full text-center py-12">
                            <i className="fas fa-book text-5xl text-slate-400 mb-4"></i>
                            <h3 className="text-xl font-bold">No books found</h3>
                            <p className="text-slate-500">Try adjusting your search or category filter</p>
                        </div>
                    )}
                </div>
            </div>
        );
    };

    const AboutSection = ({ user }) => {
        return (
            <div className="section animate-fadeIn">
                <h2 className="text-3xl font-bold font-display mb-4">About {DATA.appName}</h2>

                <div className="card p-6 space-y-4">
                    <p className="text-slate-600 dark:text-slate-300 leading-relaxed">
                        {DATA.appName} — {DATA.appSubtitle}. This learning hub bundles notes, past
                        questions, exam checklists and quick study tools for Grade 11 & 12 students.
                        Built to be small, responsive and offline-friendly.
                    </p>
                    
                    <div className="space-y-4 mt-4">
                        <h4 className="font-semibold">Disclaimer</h4>
                        <p className="text-sm text-slate-500 leading-relaxed">
                            Most of the study materials, PDFs, and documents available on this platform are created and compiled by me. 
                            However, some files have been collected from various online sources such as educational websites, Facebook groups, 
                            and public archives — solely for educational and reference purposes. 
                            The aim is to make it easier for students to find all essential resources in one place. 
                            All rights and credits go to the respective authors and content owners. 
                            If you are a copyright holder and would like your material removed or credited differently, 
                            please contact me, and I will respond promptly.
                        </p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 pt-4">
                        <div>
                            <h4 className="font-semibold">Founder</h4>
                            <p className="text-sm text-slate-500">Ganesh Dahal</p>
                        </div>
                        <div>
                            <h4 className="font-semibold">Version</h4>
                            <p className="text-sm text-slate-500">v1.0.0</p>
                        </div>

                        <div className="md:col-span-2">
                            <h4 className="font-semibold">Contact & Socials</h4>
                            <p className="text-sm text-slate-500">
                                <a href={DATA.socials.facebook} target="_blank" rel="noopener noreferrer" className="underline hover:text-teal-500 transition">Facebook</a>
                                {' · '}
                                <a href={DATA.socials.youtube} target="_blank" rel="noopener noreferrer" className="underline hover:text-teal-500 transition">YouTube</a>
                            </p>
                        </div>

                        <div className="md:col-span-2">
                            <h4 className="font-semibold">Mission</h4>
                            <p className="text-sm text-slate-500">Provide concise, exam-focused resources and practical tools to help students succeed in +2 NEB exams.</p>
                        </div>
                    </div>

                    <div className="pt-2 border-t dark:border-slate-700">
                        <button 
                            onClick={() => alert('Thanks for checking the About page!')} 
                            className="mt-3 gradient-button px-4 py-2 rounded-full text-white font-bold touch-target"
                        >
                            Say Hi
                        </button>
                    </div>
                </div>
            </div>
        );
    };

    const MyStudyList = ({ bookmarkedNotes, allNotes, onBookmark, onViewNote, isPremium, onGoPremium, setActiveSection }) => {
        const [showHelpNoteModal, setShowHelpNoteModal] = useState(false);
        const notes = useMemo(() => allNotes.filter(n => bookmarkedNotes.includes(n.id)), [bookmarkedNotes, allNotes]);
        
        return (
            <div className="section animate-fadeIn">
                <div className="flex justify-between items-center mb-6">
                    <div>
                        <h2 className="text-3xl font-bold font-display">My Study List</h2>
                        <p className="text-slate-500 dark:text-slate-400">Your hand-picked collection of important notes.</p>
                    </div>
                    <button 
                        onClick={() => setShowHelpNoteModal(true)}
                        className="gradient-button px-4 py-2 rounded-full text-white font-bold touch-target"
                    >
                        <i className="fas fa-plus mr-2"></i>Help Note
                    </button>
                </div>
                
                {notes.length > 0 ? (
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        {notes.map(note => (
                            <NoteCard 
                                key={note.id} 
                                note={note} 
                                isBookmarked={true} 
                                onBookmark={onBookmark} 
                                onView={onViewNote} 
                                isPremiumUser={isPremium} 
                                onGoPremium={onGoPremium}
                            />
                        ))}
                    </div>
                ) : (
                    <div className="text-center py-20 card">
                        <i className="far fa-bookmark text-6xl text-slate-400"></i>
                        <h3 className="mt-4 text-2xl font-bold">Your Study List is Empty</h3>
                        <p className="mt-2 text-slate-500">Click the bookmark icon on any note to add it here.</p>
                        <button 
                            onClick={() => setActiveSection({name: 'explorer'})} 
                            className="mt-6 gradient-button font-bold py-3 px-6 rounded-full touch-target"
                        >
                            Explore Notes
                        </button>
                    </div>
                )}
                
                {showHelpNoteModal && <HelpNoteModal onClose={() => setShowHelpNoteModal(false)} />}
            </div>
        );
    };

    const GpaCalculator = ({ user, onDownload }) => {
        const streamInfo = DATA.streams.find(s => s.id === user.stream);
        const userSubjects = [...(streamInfo?.compulsory || []), ...(user.optionals || [])];
        const initialSubjects = userSubjects.map(name => ({ 
            name, 
            credits: DATA.subjectData[name]?.credits ?? 0, 
            grade: '' 
        })).filter(s => s.credits > 0);
        
        const [subjects, setSubjects] = useState(initialSubjects);

        const { gpa, percentage, results } = useMemo(() => {
            let totalCredits = 0, totalWeightedPoints = 0; 
            let hasNG = false;
            
            const detailedResults = subjects.map(s => {
                if(s.grade === 'NG') hasNG = true;
                const gp = DATA.gradePoints[s.grade] || 0.0;
                const weighted = gp * s.credits;
                
                if(s.grade && s.grade !== 'NG') { 
                    totalCredits += s.credits; 
                    totalWeightedPoints += weighted; 
                }
                
                return { ...s, gp, weighted };
            });
            
            const finalGpa = totalCredits > 0 ? (totalWeightedPoints / totalCredits) : 0.0;
            
            return { 
                gpa: hasNG ? '0.00' : finalGpa.toFixed(2), 
                percentage: hasNG ? '0.00' : (finalGpa / 4 * 100).toFixed(2), 
                results: detailedResults 
            };
        }, [subjects]);

        const GPAResultCard = ({ user, gpa, results, percentage }) => (
            <div id="gpa-result-card" className="p-8 bg-white text-slate-800 rounded-lg shadow-inner">
                <div className="flex items-center justify-between pb-4 border-b-2">
                    <div className="flex items-center gap-3">
                        <img src={DATA.logoUrl} alt="Logo" className="h-16 w-16 rounded-full" />
                        <div>
                            <h2 className="text-2xl font-bold font-display">{DATA.appName}</h2>
                            <p className="text-sm text-slate-500">Grade Point Average (GPA) Report</p>
                        </div>
                    </div>
                    <div className="text-right">
                        <p className="font-bold">{user.name}</p>
                        <p className="text-sm text-slate-600">Grade {user.grade} ({user.stream})</p>
                    </div>
                </div>
                
                <div className="my-6">
                    <table className="w-full text-left">
                        <thead>
                            <tr className="bg-slate-100">
                                <th className="p-2">Subject</th>
                                <th className="p-2 text-center">Grade</th>
                                <th className="p-2 text-center">Grade Point</th>
                            </tr>
                        </thead>
                        <tbody>
                            {results.map(r => r.grade && (
                                <tr key={r.name} className="border-b border-slate-100">
                                    <td className="p-2">{r.name}</td>
                                    <td className="p-2 text-center font-semibold">{r.grade}</td>
                                    <td className="p-2 text-center">{r.grade === 'NG' ? 'N/A' : r.gp.toFixed(2)}</td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
                
                <div className="text-center mt-6 p-4 bg-teal-50 rounded-lg flex justify-around">
                    <div className="px-4">
                        <p className="text-lg font-semibold text-teal-800">Final GPA</p>
                        <p className="text-5xl font-extrabold text-teal-600 font-display">{gpa}</p>
                    </div>
                    <div className="border-l-2"></div>
                    <div className="px-4">
                        <p className="text-lg font-semibold text-teal-800">Percentage</p>
                        <p className="text-5xl font-extrabold text-teal-600 font-display">{percentage}%</p>
                    </div>
                </div>
                
                <p className="text-xs text-center text-slate-400 mt-4">Generated on {new Date().toLocaleDateString()}</p>
            </div>
        );
        
        return (
            <div className="card p-6">
                <h2 className="text-2xl font-bold font-display mb-4">NEB GPA & Percentage Calculator</h2>
                
                <div className="overflow-x-auto">
                    <table className="w-full text-left">
                        <thead>
                            <tr className="bg-slate-100 dark:bg-slate-700/50">
                                <th className="p-2 rounded-tl-lg">Subject</th>
                                <th className="p-2">Credits</th>
                                <th className="p-2 rounded-tr-lg">Grade</th>
                            </tr>
                        </thead>
                        <tbody>
                            {subjects.map((s, i) => (
                                <tr key={i} className="border-b dark:border-slate-700">
                                    <td className="p-2 font-semibold">{s.name}</td>
                                    <td className="p-2 text-center">{s.credits}</td>
                                    <td className="p-2">
                                        <select 
                                            value={s.grade} 
                                            onChange={(e) => setSubjects(subjects.map((sub, idx) => 
                                                i === idx ? {...sub, grade: e.target.value} : sub
                                            ))} 
                                            className="w-full py-2 px-3 rounded-md border dark:border-slate-600 bg-white dark:bg-slate-700"
                                        >
                                            <option value="">-</option>
                                            {Object.keys(DATA.gradePoints).map(g => (
                                                <option key={g} value={g}>{g}</option>
                                            ))}
                                        </select>
                                    </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
                
                <div className="mt-6 border-t dark:border-slate-700 pt-4">
                    <GPAResultCard user={user} gpa={gpa} results={results} percentage={percentage} />
                    
                    <button 
                        onClick={() => onDownload('gpa-result-card')} 
                        className="w-full mt-4 gradient-button font-bold py-3 rounded-full flex items-center justify-center gap-2 touch-target"
                    >
                        <i className="fas fa-download"></i> Download Report Card
                    </button>
                </div>
            </div>
        );
    };

    const UnitConverter = () => {
        const [category, setCategory] = useState('length'); 
        const [inputValue, setInputValue] = useState(1); 
        const [fromUnit, setFromUnit] = useState('m'); 
        const [toUnit, setToUnit] = useState('cm');
        
        const units = { 
            length: { m: 1, cm: 0.01, ft: 0.3048, in: 0.0254, km: 1000, yd: 0.9144, mi: 1609.34 }, 
            weight: { kg: 1, g: 0.001, lb: 0.453592 }, 
            temperature: {} 
        };
        
        const conversionResult = useMemo(() => {
            const val = parseFloat(inputValue);
            if(isNaN(val)) return 0;
            
            if (category === 'temperature') { 
                if(fromUnit === 'C' && toUnit === 'F') return (val * 9/5) + 32; 
                if(fromUnit === 'F' && toUnit === 'C') return (val - 32) * 5/9; 
                return val; 
            }
            
            const valueInBase = val * (units[category]?.[fromUnit] ?? 1); 
            const result = valueInBase / (units[category]?.[toUnit] ?? 1); 
            return parseFloat(result.toFixed(5));
        }, [inputValue, fromUnit, toUnit, category]);
        
        const handleCategoryChange = (cat) => { 
            setCategory(cat); 
            if(cat === 'length') { setFromUnit('m'); setToUnit('cm'); } 
            if(cat === 'weight') { setFromUnit('kg'); setToUnit('g'); } 
            if(cat === 'temperature') { setFromUnit('C'); setToUnit('F'); } 
        };
        
        const currentUnits = category === 'temperature' ? { 'C': 'Celsius', 'F': 'Fahrenheit' } : units[category];
        
        return (
            <div className="card p-6">
                <h3 className="font-bold text-xl mb-4">Unit Converter</h3>
                
                <div className="flex gap-2 mb-4">
                    {Object.keys(units).map(cat => (
                        <button 
                            key={cat} 
                            onClick={()=>handleCategoryChange(cat)} 
                            className={`capitalize flex-1 py-2 text-sm font-semibold rounded-full touch-target ${category === cat 
                                ? 'bg-teal-500 text-white' 
                                : 'bg-slate-200 dark:bg-slate-700'}`}
                        >
                            {cat}
                        </button>
                    ))}
                </div>
                
                <div className="flex items-center gap-2">
                    <input 
                        type="number" 
                        value={inputValue} 
                        onChange={e=>setInputValue(e.target.value)} 
                        className="w-full p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600" 
                    />
                    <select 
                        value={fromUnit} 
                        onChange={e=>setFromUnit(e.target.value)} 
                        className="p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"
                    >
                        {Object.keys(currentUnits).map(u => (
                            <option key={u} value={u}>{u}</option>
                        ))}
                    </select>
                </div>
                
                <div className="text-center my-2 font-bold text-2xl">=</div>
                
                <div className="flex items-center gap-2">
                    <input 
                        type="number" 
                        value={conversionResult} 
                        readOnly 
                        className="w-full p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600 bg-slate-100 dark:bg-slate-900" 
                    />
                    <select 
                        value={toUnit} 
                        onChange={e=>setToUnit(e.target.value)} 
                        className="p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"
                    >
                        {Object.keys(currentUnits).map(u => (
                            <option key={u} value={u}>{u}</option>
                        ))}
                    </select>
                </div>
            </div>
        );
    };

    const PomodoroTimer = () => {
        const [time, setTime] = useState(25 * 60); 
        const [isActive, setIsActive] = useState(false); 
        const [duration, setDuration] = useState(25 * 60);
        
        useEffect(() => { 
            let interval = null; 
            if (isActive && time > 0) { 
                interval = setInterval(() => { setTime(t => t - 1); }, 1000); 
            } else if (time === 0) { 
                setIsActive(false); 
            } 
            return () => clearInterval(interval); 
        }, [isActive, time]);
        
        const toggle = () => setIsActive(!isActive);
        
        const reset = (newDuration) => { 
            setDuration(newDuration); 
            setTime(newDuration); 
            setIsActive(false); 
        };
        
        const formatTime = (t) => `${String(Math.floor(t / 60)).padStart(2,'0')}:${String(t % 60).padStart(2,'0')}`;
        
        return (
            <div className="card p-6 text-center">
                <h3 className="font-bold text-xl mb-4">Pomodoro Timer</h3>
                
                <div className="flex justify-center gap-2 mb-4">
                    {[25, 45, 60].map(d => (
                        <button 
                            key={d} 
                            onClick={()=>reset(d * 60)} 
                            className={`px-3 py-1 text-sm font-semibold rounded-full touch-target ${duration === d * 60 
                                ? 'bg-teal-500 text-white' 
                                : 'bg-slate-200 dark:bg-slate-700'}`}
                        >
                            {d} min
                        </button>
                    ))}
                </div>
                
                <div className="text-6xl font-bold font-mono p-4 rounded-lg text-teal-500">
                    {formatTime(time)}
                </div>
                
                <div className="mt-4 flex gap-4 justify-center">
                    <button 
                        onClick={toggle} 
                        className="px-6 py-2 rounded-full font-semibold bg-slate-200 dark:bg-slate-700 touch-target"
                    >
                        {isActive ? 'Pause' : 'Start'}
                    </button>
                    <button 
                        onClick={()=>reset(duration)} 
                        className="px-6 py-2 rounded-full font-semibold bg-slate-200 dark:bg-slate-700 touch-target"
                    >
                        Reset
                    </button>
                </div>
            </div>
        );
    };

    const BrainTeaser = () => {
        const [teaser, setTeaser] = useState(DATA.brainTeasers[0]);
        const [guess, setGuess] = useState('');
        const [result, setResult] = useState('');
        
        const checkAnswer = (e) => {
            e.preventDefault();
            if(guess.toLowerCase().trim() === teaser.answer.toLowerCase()) { 
                setResult('correct'); 
            } else { 
                setResult('incorrect'); 
            }
        };
        
        const nextTeaser = () => {
            setResult(''); 
            setGuess('');
            setTeaser(DATA.brainTeasers[Math.floor(Math.random() * DATA.brainTeasers.length)]);
        };
        
        return (
            <div className="card p-6">
                <h3 className="font-bold text-xl mb-4">Brain Teaser</h3>
                <p className="text-slate-600 dark:text-slate-400 italic mb-4">"{teaser.question}"</p>
                
                <form onSubmit={checkAnswer} className="flex gap-2">
                    <input 
                        type="text" 
                        value={guess} 
                        onChange={e=>setGuess(e.target.value)} 
                        placeholder="Your answer..." 
                        className="w-full p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600" 
                    />
                    <button 
                        type="submit" 
                        className="px-4 py-2 font-semibold rounded-md bg-teal-500 text-white touch-target"
                    >
                        Check
                    </button>
                </form>
                
                {result && (
                    <div className={`mt-3 p-2 rounded-md text-center font-semibold ${result === 'correct' 
                        ? 'bg-green-100 text-green-700' 
                        : 'bg-red-100 text-red-700'}`}
                    >
                        {result === 'correct' ? 'Correct!' : 'Try again!'}
                    </div>
                )}
                
                <button 
                    onClick={nextTeaser} 
                    className="text-sm mt-3 text-slate-500 hover:text-teal-500 touch-target"
                >
                    Next Teaser <i className="fas fa-sync-alt"></i>
                </button>
            </div>
        );
    }

    const QuickTools = ({ user }) => {
        const handleDownload = (elementId) => {
            html2canvas(document.getElementById(elementId), { scale: 2 }).then(canvas => { 
                const link = document.createElement('a'); 
                link.download = `GDA_GPA_Report_${user.name}.png`; 
                link.href = canvas.toDataURL('image/png'); 
                link.click(); 
            });
        };
        
        return (
            <div className="section animate-fadeIn">
                <h2 className="text-3xl font-bold font-display mb-6">Quick Tools</h2>
                
                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 items-start">
                    <GpaCalculator user={user} onDownload={handleDownload} />
                    
                    <div className="space-y-6">
                        <UnitConverter />
                        <PomodoroTimer />
                        <BrainTeaser />
                    </div>
                </div>
            </div>
        );
    };

    const ExamPrepSection = ({ user }) => {
        const [activeTab, setActiveTab] = useState('routines');
        
        const ExamChecklist = ({ checklist }) => {
            const [checkedItems, setCheckedItems] = useState(() => getJSONFromLocalStorage(checklist.id, []));
            
            const handleCheck = (item) => { 
                const newChecked = checkedItems.includes(item) 
                    ? checkedItems.filter(i => i !== item) 
                    : [...checkedItems, item]; 
                setCheckedItems(newChecked); 
                setJSONToLocalStorage(checklist.id, newChecked);
            };
            
            const progress = (checklist.items.length > 0) 
                ? (checkedItems.length / checklist.items.length) * 100 
                : 0;
                
            return (
                <div className="card p-6">
                    <h3 className="font-bold text-xl mb-4">{checklist.subject} Revision Checklist</h3>
                    
                    <div className="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5 mb-4">
                        <div 
                            className="bg-teal-500 h-2.5 rounded-full transition-all duration-300" 
                            style={{width: `${progress}%`}}
                        ></div>
                    </div>
                    
                    <div className="space-y-3">
                        {checklist.items.map(item => (
                            <label key={item} className="flex items-center gap-3 cursor-pointer">
                                <input 
                                    type="checkbox" 
                                    checked={checkedItems.includes(item)} 
                                    onChange={() => handleCheck(item)} 
                                    className="h-4 w-4 rounded border-gray-300 text-teal-600 focus:ring-teal-500" 
                                />
                                <span>{item}</span>
                            </label>
                        ))}
                    </div>
                </div>
            );
        };
        
        const streamInfo = DATA.streams.find(s => s.id === user.stream);
        const userSubjects = [...(streamInfo?.compulsory || []), ...(user.optionals || [])];
        const streamChecklists = DATA.examPreps.checklists.filter(c => userSubjects.includes(c.subject));
        
        return (
            <div className="section animate-fadeIn">
                <h2 className="text-3xl font-bold font-display mb-6">Exam Preparation</h2>
                
                <div className="flex border-b-2 dark:border-slate-700 mb-6 overflow-x-auto">
                    <button 
                        onClick={()=>setActiveTab('routines')} 
                        className={`px-4 py-2 font-semibold whitespace-nowrap touch-target ${activeTab === 'routines' 
                            ? 'border-b-2 border-teal-500 text-teal-500' 
                            : 'text-slate-500'}`}
                    >
                        Upcoming Exams
                    </button>
                    <button 
                        onClick={()=>setActiveTab('checklists')} 
                        className={`px-4 py-2 font-semibold whitespace-nowrap touch-target ${activeTab === 'checklists' 
                            ? 'border-b-2 border-teal-500 text-teal-500' 
                            : 'text-slate-500'}`}
                    >
                        Checklists
                    </button>
                    <button 
                        onClick={()=>setActiveTab('models')} 
                        className={`px-4 py-2 font-semibold whitespace-nowrap touch-target ${activeTab === 'models' 
                            ? 'border-b-2 border-teal-500 text-teal-500' 
                            : 'text-slate-500'}`}
                    >
                        Model Questions
                    </button>
                    <button 
                        onClick={()=>setActiveTab('quiz')} 
                        className={`px-4 py-2 font-semibold whitespace-nowrap touch-target ${activeTab === 'quiz' 
                            ? 'border-b-2 border-teal-500 text-teal-500' 
                            : 'text-slate-500'}`}
                    >
                        Quiz
                    </button>
                </div>
                
                <div>
                    {activeTab === 'routines' && (
                        <div className="card p-6">
                            <h3 className="font-bold text-xl mb-4">NEB Exam Routine (Sample)</h3>
                            <table className="w-full text-left">
                                <thead>
                                    <tr className="border-b-2 dark:border-slate-700">
                                        <th className="p-2">Subject</th>
                                        <th className="p-2">Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {DATA.examPreps.routines.map(r => (
                                        <tr key={r.subject} className="border-b dark:border-slate-800">
                                            <td className="p-2">{r.subject}</td>
                                            <td className="p-2">{r.date}</td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    )}
                    
                    {activeTab === 'checklists' && (
                        <div className="space-y-6">
                            {streamChecklists.map(c => (
                                <ExamChecklist key={c.id} checklist={c}/>
                            ))}
                        </div>
                    )}
                    
                    {activeTab === 'models' && (
                        <div className="card p-6">
                            <div className="space-y-3">
                                {DATA.examPreps.modelQuestions.map(mq => (
                                    <a 
                                        href={mq.link} 
                                        target="_blank" 
                                        key={mq.id} 
                                        className="block p-3 bg-slate-100 dark:bg-slate-700/50 rounded-md hover:bg-slate-200 dark:hover:bg-slate-700 font-semibold"
                                    >
                                        {mq.title} 
                                        {mq.isPremium && (
                                            <i className="fas fa-star text-amber-500 text-xs ml-1"></i>
                                        )}
                                    </a>
                                ))}
                            </div>
                        </div>
                    )}
                    
                    {activeTab === 'quiz' && (
                        <SubjectMasteryComponent />
                    )}
                </div>
            </div>
        );
    };

    // =================================================================================
    // ===== MAIN APP COMPONENT =====
    // =================================================================================
    const App = () => {
        const [user, setUser] = useState(null);
        const [isLoading, setIsLoading] = useState(true);
        const [activeSection, setActiveSection] = useState({ name: 'dashboard' });
        const [isPremium, setIsPremium] = useState(false);
        const [bookmarkedNotes, setBookmarkedNotes] = useState([]);
        const [lastViewedNoteId, setLastViewedNoteId] = useState(null);
        const [viewingNote, setViewingNote] = useState(null);
        const [showPaymentModal, setShowPaymentModal] = useState(false);
        const [showPresentationModal, setShowPresentationModal] = useState(false);
        const [showWelcomeCelebration, setShowWelcomeCelebration] = useState(false);
        const [showCertificateModal, setShowCertificateModal] = useState(false);
        const [isFirstTimeUser, setIsFirstTimeUser] = useState(false);

        useEffect(() => {
            const storedUser = getJSONFromLocalStorage('gdaUser', null);
            const isFirstTime = getJSONFromLocalStorage('gdaFirstTime', true);
            
            if (storedUser && storedUser.optionals) {
                setUser(storedUser);
                setIsPremium(getJSONFromLocalStorage(`gdaPremium_${storedUser.stream}`, false));
                setBookmarkedNotes(getJSONFromLocalStorage('gdaBookmarkedNotes', []));
                setLastViewedNoteId(getJSONFromLocalStorage('gdaLastViewedNoteId', null));
                
                // Show celebration for first-time users
                if (isFirstTime) {
                    setIsFirstTimeUser(true);
                    setShowWelcomeCelebration(true);
                    setJSONToLocalStorage('gdaFirstTime', false);
                    
                    // Auto-show certificate after celebration
                    setTimeout(() => {
                        setShowWelcomeCelebration(false);
                        setShowCertificateModal(true);
                    }, 3000);
                }
            }
            setTimeout(() => setIsLoading(false), 1200);
        }, []);
        
        const handleSetupComplete = (name, stream, grade, optionals) => { 
            const newUser = { name, stream, grade, optionals }; 
            setUser(newUser); 
            setJSONToLocalStorage('gdaUser', newUser); 
            
            // Show celebration for new users
            setIsFirstTimeUser(true);
            setShowWelcomeCelebration(true);
            setJSONToLocalStorage('gdaFirstTime', false);
            
            // Auto-show certificate after celebration
            setTimeout(() => {
                setShowWelcomeCelebration(false);
                setShowCertificateModal(true);
            }, 3000);
        };
        
        const handleGradeChange = (newGrade) => {
            if (user) {
                const updatedUser = { ...user, grade: newGrade };
                setUser(updatedUser);
                setJSONToLocalStorage('gdaUser', updatedUser);
            }
        };
        
        const handleLogout = () => { 
            if (window.confirm("Are you sure you want to log out? This will clear your profile and all saved data.")) { 
                Object.keys(localStorage).filter(k => k.startsWith('gda') || k.endsWith('_checklist')).forEach(k => localStorage.removeItem(k)); 
                window.location.reload(); 
            } 
        };
        
        const handleBookmark = (noteId) => { 
            const newBookmarks = bookmarkedNotes.includes(noteId) 
                ? bookmarkedNotes.filter(id => id !== noteId) 
                : [...bookmarkedNotes, noteId]; 
            setBookmarkedNotes(newBookmarks); 
            setJSONToLocalStorage('gdaBookmarkedNotes', newBookmarks); 
        };
        
        const handleViewNote = (note) => { 
            setViewingNote(note); 
            setLastViewedNoteId(note.id); 
            setJSONToLocalStorage('gdaLastViewedNoteId', note.id); 
        };
        
        const handlePremiumUnlock = () => { 
            setIsPremium(true); 
            setJSONToLocalStorage(`gdaPremium_${user.stream}`, true); 
            setShowPaymentModal(false); 
            alert("Congratulations! Premium access for this stream has been unlocked."); 
        };

        const renderSection = () => {
            const lastViewedNote = DATA.notes[user.grade]?.find(n => n.id === lastViewedNoteId);
            
            switch(activeSection.name) {
                case 'dashboard': 
                    return <Dashboard user={user} setActiveSection={setActiveSection} lastViewedNote={lastViewedNote} onGradeChange={handleGradeChange} />;
                case 'explorer': 
                    return (
                        <NotesExplorer 
                            user={user} 
                            isPremium={isPremium} 
                            bookmarkedNotes={bookmarkedNotes} 
                            onBookmark={handleBookmark} 
                            onViewNote={handleViewNote} 
                            onGoPremium={() => setShowPaymentModal(true)} 
                        />
                    );
                case 'studylist': 
                    return (
                        <MyStudyList 
                            bookmarkedNotes={bookmarkedNotes} 
                            allNotes={DATA.notes[user.grade]} 
                            onBookmark={handleBookmark} 
                            onViewNote={handleViewNote} 
                            isPremium={isPremium} 
                            onGoPremium={() => setShowPaymentModal(true)} 
                            setActiveSection={setActiveSection}
                        />
                    );
                case 'tools': 
                    return <QuickTools user={user} />;
                case 'examprep': 
                    return <ExamPrepSection user={user} />;
                case 'library': 
                    return (
                        <DigitalLibrary 
                            user={user} 
                            isPremium={isPremium} 
                            onViewNote={handleViewNote} 
                            onGoPremium={() => setShowPaymentModal(true)} 
                        />
                    );
                case 'books': 
                    return (
                        <OurBooks 
                            user={user} 
                            isPremium={isPremium} 
                            onViewNote={handleViewNote} 
                            onGoPremium={() => setShowPaymentModal(true)} 
                        />
                    );
                case 'about': 
                    return <AboutSection user={user} />;
                default: 
                    return <Dashboard user={user} setActiveSection={setActiveSection} lastViewedNote={lastViewedNote} onGradeChange={handleGradeChange} />;
            }
        };

        if (isLoading) return <AppLoader />;
        if (!user) return <WelcomeScreen onSetupComplete={handleSetupComplete} />;

        const NavButton = ({ sectionName, icon, label, badgeCount }) => (
            <button 
                onClick={() => setActiveSection({name: sectionName})} 
                className={`w-full flex items-center justify-between gap-3 p-3 rounded-lg font-semibold text-left nav-link touch-target ${activeSection.name === sectionName ? 'active' : ''}`}
            >
                <div className="flex items-center gap-3">
                    <i className={`${icon} w-5 text-center`}></i> 
                    {label}
                </div>
                {badgeCount > 0 && (
                    <span className="text-xs font-bold bg-teal-500 text-white h-5 w-5 rounded-full grid place-items-center">
                        {badgeCount}
                    </span>
                )}
            </button>
        );
        
        const PremiumCard = () => (
            <div className="p-4 rounded-lg text-center bg-gradient-to-br from-amber-400 to-orange-500 text-white shadow-lg">
                <i className="fas fa-crown text-3xl opacity-80"></i>
                <h4 className="font-bold mt-2 font-display text-lg">Go Premium</h4>
                <p className="text-xs text-white/80 mt-1 mb-3">Unlock expert notes & model questions.</p>
                <button 
                    onClick={() => setShowPaymentModal(true)} 
                    className="bg-white text-amber-600 text-sm font-bold py-2 px-4 rounded-full w-full hover:scale-105 transition-transform animate-pulse touch-target"
                >
                    Upgrade Now
                </button>
            </div>
        );

        const MobileNavItem = ({ sectionName, icon, label, badgeCount }) => (
            <button 
                onClick={() => setActiveSection({name: sectionName})} 
                className={`mobile-nav-item ${activeSection.name === sectionName ? 'active' : ''}`}
            >
                <i className={icon}></i>
                <span>{label}</span>
                {badgeCount > 0 && (
                    <span className="absolute -top-1 -right-1 bg-teal-500 text-white text-xs h-4 w-4 rounded-full flex items-center justify-center">
                        {badgeCount}
                    </span>
                )}
            </button>
        );

        return (
            <Fragment>
                {showWelcomeCelebration && <WelcomeCelebration name={user.name} />}
                {showCertificateModal && <CertificateModal name={user.name} onContinue={() => setShowCertificateModal(false)} />}
                {viewingNote && <PdfViewerModal pdfInfo={viewingNote} onClose={() => setViewingNote(null)} />}
                {showPaymentModal && (
                    <PaymentModal 
                        onPaymentSuccess={handlePremiumUnlock} 
                        onClose={() => setShowPaymentModal(false)} 
                        userName={user.name} 
                        stream={user.stream} 
                    />
                )}
                {showPresentationModal && (
                    <PresentationRequestModal 
                        user={user} 
                        onClose={() => setShowPresentationModal(false)} 
                    />
                )}
                
                <div className="flex flex-col md:flex-row min-h-screen">
                    <aside className="desktop-sidebar w-full md:w-64 bg-white dark:bg-slate-900 p-4 flex-shrink-0 md:border-r border-slate-200 dark:border-slate-800 flex flex-col">
                        <div>
                            <div className="text-center md:text-left mb-6 flex items-center gap-3">
                                <img src={DATA.logoUrl} alt="Logo" className="h-12 w-12 rounded-full" />
                                <div>
                                    <h2 className="text-xl font-bold font-display">{DATA.appName}</h2>
                                    <p className="text-sm text-slate-500">({user.grade}) {user.name}</p>
                                </div>
                            </div>
                            
                            <nav className="space-y-2">
                               <NavButton sectionName="dashboard" icon="fas fa-home-alt" label="Dashboard" />
                               <NavButton sectionName="explorer" icon="fas fa-compass" label="Note Explorer" />
                               <NavButton sectionName="studylist" icon="fas fa-bookmark" label="My Study List" badgeCount={bookmarkedNotes.length}/>
                               <NavButton sectionName="examprep" icon="fas fa-feather-alt" label="Exam Preps" />
                               <NavButton sectionName="tools" icon="fas fa-tools" label="Quick Tools" />
                               <NavButton sectionName="library" icon="fas fa-book-open" label="Digital Library" />
                               <NavButton sectionName="books" icon="fas fa-book" label="Our Books" />
                               <NavButton sectionName="about"   icon="fas fa-info-circle" label="About" />

                               <button 
                                   onClick={() => setShowPresentationModal(true)} 
                                   className="w-full flex items-center gap-3 p-3 rounded-lg font-semibold text-left nav-link touch-target"
                               >
                                   <i className="fas fa-chalkboard-teacher w-5 text-center"></i> 
                                   Request Presentation
                               </button>
                            </nav>
                        </div>
                        
                        <div className="mt-auto pt-6">
                            {!isPremium ? <PremiumCard /> : (
                                <div className="p-4 text-center">
                                    <p className="font-semibold text-amber-500 flex items-center justify-center gap-2">
                                        <i className="fas fa-check-circle"></i> Premium Member
                                    </p>
                                </div>
                            )}
                            
                            <div className="mt-4 flex justify-center gap-6">
                                <a href={DATA.socials.youtube} target="_blank" className="text-slate-400 hover:text-red-500">
                                    <i className="fab fa-youtube text-xl"></i>
                                </a>
                                <a href={DATA.socials.facebook} target="_blank" className="text-slate-400 hover:text-blue-500">
                                    <i className="fab fa-facebook text-xl"></i>
                                </a>
                                <button onClick={handleLogout} className="text-slate-400 hover:text-red-500">
                                    <i className="fas fa-sign-out-alt text-xl"></i>
                                </button>
                            </div>
                        </div>
                    </aside>
                    
                    <main className="flex-1 bg-slate-50 dark:bg-slate-900">
                        <ErrorBoundary>
                            {renderSection()}
                        </ErrorBoundary>
                    </main>
                </div>
                
                {/* Mobile Navigation */}
                <div className="mobile-nav">
                    <MobileNavItem sectionName="dashboard" icon="fas fa-home-alt" label="Home" />
                    <MobileNavItem sectionName="explorer" icon="fas fa-compass" label="Notes" />
                    <MobileNavItem sectionName="studylist" icon="fas fa-bookmark" label="Study List" badgeCount={bookmarkedNotes.length} />
                    <MobileNavItem sectionName="examprep" icon="fas fa-feather-alt" label="Exam" />
                    <MobileNavItem sectionName="tools" icon="fas fa-tools" label="Tools" />
                </div>
            </Fragment>
        );
    };

    ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>
