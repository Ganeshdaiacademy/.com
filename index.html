
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ganesh Dai Academy - Grade 11 & 12 Study Hub</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet" />
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- html2canvas for downloads -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary-500: #14b8a6;
            --primary-600: #0d9488;
            --warning-500: #f59e0b;
            --danger-500: #ef4444;
        }
        
        body { 
            font-family: 'Inter', system-ui, sans-serif; 
            background-color: #f8fafc; 
            margin: 0;
            padding: 0;
            color: #1e293b;
            line-height: 1.6;
        }
        .dark body { 
            background-color: #0f172a; 
            color: #f1f5f9;
        }
        h1, h2, h3, h4, h5, h6, .font-display { font-family: 'Poppins', sans-serif; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fadeIn { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes popIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .animate-popIn { animation: popIn 0.4s ease-out forwards; }
        @keyframes slideInUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .slide-in-up { animation: slideInUp 0.5s ease-out forwards; }
        @keyframes slideInDown { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .animate-slideInDown { animation: slideInDown 0.5s ease-out forwards; }
        @keyframes slideInLeft { from { transform: translateX(-20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .animate-slideInLeft { animation: slideInLeft 0.5s ease-out forwards; }
        @keyframes slideInRight { from { transform: translateX(20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .animate-slideInRight { animation: slideInRight 0.5s ease-out forwards; }
        @keyframes tada { 
            0% { transform: scale(1); } 
            10%, 20% { transform: scale(0.9) rotate(-3deg); } 
            30%, 50%, 70%, 90% { transform: scale(1.1) rotate(3deg); } 
            40%, 60%, 80% { transform: scale(1.1) rotate(-3deg); } 
            100% { transform: scale(1) rotate(0); } 
        }
        .animate-tada { animation: tada 1s ease-in-out; }
        
        .gradient-button { 
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600)); 
            color: white; 
            transition: all .3s ease; 
            box-shadow: 0 4px 15px rgba(13, 148, 136, 0.3);
            border: none;
            font-weight: 600;
        }
        .gradient-button:hover:not(:disabled) { 
            transform: translateY(-3px); 
            box-shadow: 0 12px 25px rgba(13, 148, 136, 0.4); 
        }
        
        .nav-link { transition: all .2s ease-in-out; }
        .nav-link.active { 
            color: var(--primary-500); 
            background-color: rgba(20, 184, 166, 0.1); 
            font-weight: 600; 
        }
        .dark .nav-link.active { 
            color: #5eead4; 
            background-color: rgba(30, 41, 59, 0.8); 
        }
        .nav-link:not(.active):hover { background-color: #f1f5f9; }
        .dark .nav-link:not(.active):hover { background-color: #1e293b; }

        .overlay { 
            position: fixed; 
            inset: 0; 
            background-color: rgba(0,0,0,.7); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            z-index: 1000; 
            padding: 1rem; 
            backdrop-filter: blur(4px); 
            animation: fadeIn 0.3s ease; 
        }
        .modal-box { 
            padding: 0; 
            border-radius: 1rem; 
            box-shadow: 0 20px 40px rgba(0,0,0,.3); 
            text-align: center; 
            color: #1e293b;
            background: white;
            animation: popIn .4s ease-out; 
            max-width: 95%; 
            width: 500px; 
            overflow: hidden; 
        }
        .dark .modal-box { 
            color: #f1f5f9; 
            background: #1e293b;
        }
        
        .pdf-viewer-modal { 
            background: #0f172a; 
            padding: 0; 
            border-radius: .75rem; 
            overflow: hidden; 
            width: 98vw; 
            height: 95vh; 
            max-width: 1600px; 
            display: flex; 
            flex-direction: column; 
            position: relative; 
        }
        .pdf-viewer-modal .header { 
            padding: .75rem 1.5rem; 
            background: #020617; 
            display:flex; 
            justify-content: space-between; 
            align-items: center; 
            border-bottom: 1px solid #334155; 
            flex-shrink: 0; 
        }
        .pdf-viewer-modal iframe { 
            flex-grow: 1; 
            border: none; 
            background-color: #334155; 
            pointer-events: auto; 
        }
        
        /* Card styles */
        .card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            color: #1e293b;
            transition: all 0.3s ease;
        }
        .dark .card {
            background: #1e293b;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.05);
            color: #f1f5f9;
        }
        
        /* Quiz styles */
        .btn-grad {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            color: white;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(13, 148, 136, 0.3);
            border: none;
        }
        .btn-grad:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(13, 148, 136, 0.4);
        }
        
        /* Section styles */
        .section {
            padding: 2rem 1rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        @media (min-width: 768px) {
            .section {
                padding: 2.5rem 1.5rem;
            }
        }
        
        /* Mobile sidebar */
        @media (max-width: 767px) {
            .desktop-sidebar {
                position: fixed;
                top: 0;
                left: -100%;
                height: 100vh;
                width: 280px;
                z-index: 1000;
                transition: left 0.3s ease;
                overflow-y: auto;
                box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            }
            
            .desktop-sidebar.mobile-open {
                left: 0;
            }
            
            .mobile-menu-toggle {
                display: block;
                position: fixed;
                top: 1rem;
                left: 1rem;
                z-index: 1001;
                background: var(--primary-500);
                color: white;
                border: none;
                border-radius: 50%;
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            }
            
            main {
                padding-top: 1rem;
            }
            
            .overlay-mobile {
                position: fixed;
                inset: 0;
                background: rgba(0,0,0,0.5);
                z-index: 999;
            }
        }
        @media (min-width: 768px) {
            .mobile-menu-toggle {
                display: none;
            }
        }
        
        /* Progress bar */
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }
        .dark .progress-bar {
            background-color: #334155;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-500), var(--primary-600));
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        .dark ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        /* Glass effect */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .dark .glass {
            background: rgba(15, 23, 42, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Touch target improvements */
        .touch-target {
            min-height: 44px;
            min-width: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Celebration styles */
        .animated-gradient-bg {
            background: linear-gradient(45deg, #14b8a6, #0d9488, #0f766e, #115e59);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f59e0b;
            top: 0;
            opacity: 0;
        }
        
        .confetti:nth-child(even) {
            background-color: #ef4444;
        }
        
        .confetti:nth-child(3n) {
            background-color: #10b981;
        }
        
        .confetti:nth-child(5n) {
            background-color: #8b5cf6;
        }
        
        @keyframes confettiRain {
            0% {
                opacity: 1;
                top: -100px;
                transform: rotate(0deg);
            }
            100% {
                opacity: 0;
                top: 100vh;
                transform: rotate(360deg);
            }
        }
        
        /* Certificate styles */
        .font-serif-display {
            font-family: 'Georgia', serif;
            font-weight: 700;
        }
        
        .font-handwriting {
            font-family: 'Dancing Script', cursive;
        }
        
        .spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Quiz improvements */
        .quiz-option {
            transition: all 0.2s ease;
        }
        
        .quiz-option:hover {
            transform: translateY(-2px);
        }
        
        .quiz-option.selected {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            color: white;
            box-shadow: 0 4px 12px rgba(13, 148, 136, 0.3);
        }
        
        /* Premium badge */
        .premium-badge {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }
        
        /* Card hover effect */
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        /* Glassmorphism effect */
        .glassmorphism {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Better text sizing for mobile */
        @media (max-width: 768px) {
            body {
                font-size: 16px;
            }
            
            .section {
                padding: 1.5rem 1rem;
            }
            
            h1, h2, h3 {
                line-height: 1.3;
            }
        }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200">
    <div id="root"></div>

<script type="text/babel">
    const { useState, useEffect, useMemo, useCallback, Fragment, Component, useRef } = React;

    // =================================================================================
    // ===== CONFIGURATION & DATA =====
    // =================================================================================
    const DATA = {
        appName: "Ganesh Dai Academy",
        appSubtitle: "Grade 11 & 12 Study Hub",
        logoUrl: "https://raw.githubusercontent.com/MissionBalenScholarshipQuiz/12/55fa0b325c116947dc1736ebb3c6fcf45b997777/2a4a2158-0beb-445d-81d0-ccfc3e8ad099.jpg",
        socials: {
            youtube: "https://www.youtube.com/@Grade11-12StudyHub",
            facebook: "https://www.facebook.com/ganesh.dahal.627352/",
        },
        esewaId: "9767496685",
        whatsAppContactLink: "https://wa.me/9826594548?text=" + encodeURIComponent("I have paid for Ganesh Dai Academy premium. Please provide my activation code."),
        presentationRequestNumber: "9826594548",
        whatsAppContactNumber: "9826594548",
        streams: [
            { 
                id: 'science', 
                name: 'Science', 
                compulsory: ['English', 'Nepali', 'Physics', 'Chemistry', 'Mathematics'], 
                optional: [['Biology', 'Computer Science']], 
                optional_count: 1,
                color: 'from-blue-500 to-cyan-500',
                icon: 'fas fa-atom'
            },
            { 
                id: 'management', 
                name: 'Management', 
                compulsory: ['English', 'Nepali', 'Accountancy', 'Economics'], 
                optional: [['Business Studies', 'Business Mathematics', 'Computer Science', 'Social']], 
                optional_count: 2,
                color: 'from-emerald-500 to-teal-500',
                icon: 'fas fa-chart-line'
            }
        ],

        subjectData: {
            'English': { credits: 4, color: 'from-purple-500 to-indigo-500' }, 
            'Nepali': { credits: 3, color: 'from-rose-500 to-pink-500' }, 
            'Mathematics': { credits: 5, color: 'from-blue-500 to-cyan-500' }, 
            'Physics': { credits: 5, color: 'from-orange-500 to-amber-500' }, 
            'Chemistry': { credits: 5, color: 'from-green-500 to-emerald-500' }, 
            'Biology': { credits: 5, color: 'from-lime-500 to-green-500' }, 
            'Computer Science': { credits: 5, color: 'from-violet-500 to-purple-500' }, 
            'Accountancy': { credits: 5, color: 'from-teal-500 to-cyan-500' }, 
            'Economics': { credits: 5, color: 'from-amber-500 to-yellow-500' }, 
            'Business Studies': { credits: 5, color: 'from-indigo-500 to-blue-500' }, 
            'Business Mathematics': { credits: 5, color: 'from-cyan-500 to-teal-500' }, 
            'Social': { credits: 5, color: 'from-pink-500 to-rose-500' },
        },
        gradePoints: { 'A+': 4.0, 'A': 3.6, 'B+': 3.2, 'B': 2.8, 'C+': 2.4, 'C': 2.0, 'D': 1.6, 'NG': 0.0 },
        
        // Quiz Data
        quizzes: {
            'Physics': {
                title: 'Physics Quiz',
                icon: 'fas fa-atom',
                color: 'from-orange-500 to-amber-500',
                chapters: {
                    'Mechanics': {
                        questions: [
                            {
                                question: 'What is the SI unit of force?',
                                options: ['Newton', 'Joule', 'Watt', 'Pascal'],
                                correctAnswer: 'Newton'
                            },
                            {
                                question: 'Which law states that every action has an equal and opposite reaction?',
                                options: ['Newton\'s First Law', 'Newton\'s Second Law', 'Newton\'s Third Law', 'Law of Gravitation'],
                                correctAnswer: 'Newton\'s Third Law'
                            },
                            {
                                question: 'What is the formula for kinetic energy?',
                                options: ['1/2 mv²', 'mgh', 'F.d', 'P.V'],
                                correctAnswer: '1/2 mv²'
                            },
                            {
                                question: 'What is the acceleration due to gravity on Earth?',
                                options: ['9.8 m/s²', '10 m/s²', '8.9 m/s²', '11 m/s²'],
                                correctAnswer: '9.8 m/s²'
                            },
                            {
                                question: 'Which of the following is a vector quantity?',
                                options: ['Mass', 'Speed', 'Distance', 'Velocity'],
                                correctAnswer: 'Velocity'
                            }
                        ]
                    },
                    'Optics': {
                        questions: [
                            {
                                question: 'What is the speed of light in vacuum?',
                                options: ['3 × 10^8 m/s', '3 × 10^5 m/s', '3 × 10^10 m/s', '3 × 10^3 m/s'],
                                correctAnswer: '3 × 10^8 m/s'
                            },
                            {
                                question: 'Which lens is used to correct myopia?',
                                options: ['Convex lens', 'Concave lens', 'Cylindrical lens', 'Bifocal lens'],
                                correctAnswer: 'Concave lens'
                            },
                            {
                                question: 'What is the unit of power of a lens?',
                                options: ['Diopter', 'Watt', 'Newton', 'Joule'],
                                correctAnswer: 'Diopter'
                            }
                        ]
                    },
                    'Electricity and Magnetism': {
                        questions: [
                            {
                                question: 'What is the SI unit of electric current?',
                                options: ['Ampere', 'Volt', 'Ohm', 'Watt'],
                                correctAnswer: 'Ampere'
                            },
                            {
                                question: 'Ohm\'s law states that:',
                                options: ['V = IR', 'I = VR', 'R = IV', 'V = I/R'],
                                correctAnswer: 'V = IR'
                            }
                        ]
                    }
                }
            },
            'Chemistry': {
                title: 'Chemistry Quiz',
                icon: 'fas fa-flask',
                color: 'from-green-500 to-emerald-500',
                chapters: {
                    'Atomic Structure': {
                        questions: [
                            {
                                question: 'Who discovered the electron?',
                                options: ['J.J. Thomson', 'Ernest Rutherford', 'James Chadwick', 'Niels Bohr'],
                                correctAnswer: 'J.J. Thomson'
                            },
                            {
                                question: 'What is the maximum number of electrons in the M shell?',
                                options: ['2', '8', '18', '32'],
                                correctAnswer: '18'
                            }
                        ]
                    },
                    'Chemical Bonding': {
                        questions: [
                            {
                                question: 'Which type of bond is formed by sharing of electrons?',
                                options: ['Ionic bond', 'Covalent bond', 'Metallic bond', 'Hydrogen bond'],
                                correctAnswer: 'Covalent bond'
                            },
                            {
                                question: 'What is the shape of methane molecule?',
                                options: ['Linear', 'Trigonal planar', 'Tetrahedral', 'Octahedral'],
                                correctAnswer: 'Tetrahedral'
                            }
                        ]
                    },
                    'Organic Chemistry': {
                        questions: [
                            {
                                question: 'Which functional group defines an alcohol?',
                                options: ['-OH', '-COOH', '-CHO', '-NH2'],
                                correctAnswer: '-OH'
                            },
                            {
                                question: 'What is the general formula for alkanes?',
                                options: ['CnH2n+2', 'CnH2n', 'CnH2n-2', 'CnH2n-6'],
                                correctAnswer: 'CnH2n+2'
                            }
                        ]
                    }
                }
            },
            'Economics': {
                title: 'Economics Quiz',
                icon: 'fas fa-chart-line',
                color: 'from-amber-500 to-yellow-500',
                chapters: {
                    'Basic Concepts': {
                        questions: [
                            {
                                question: 'What is the study of how individuals and societies choose to use scarce resources?',
                                options: ['Economics', 'Sociology', 'Psychology', 'Political Science'],
                                correctAnswer: 'Economics'
                            },
                            {
                                question: 'What does GDP stand for?',
                                options: ['Gross Domestic Product', 'General Domestic Price', 'Gross Development Product', 'General Development Plan'],
                                correctAnswer: 'Gross Domestic Product'
                            }
                        ]
                    },
                    'Demand and Supply': {
                        questions: [
                            {
                                question: 'What happens to price when demand increases and supply remains constant?',
                                options: ['Price increases', 'Price decreases', 'Price remains same', 'Cannot determine'],
                                correctAnswer: 'Price increases'
                            }
                        ]
                    }
                }
            },
            'Accountancy': {
                title: 'Accountancy Quiz',
                icon: 'fas fa-calculator',
                color: 'from-teal-500 to-cyan-500',
                chapters: {
                    'Basic Accounting': {
                        questions: [
                            {
                                question: 'What is the basic accounting equation?',
                                options: ['Assets = Liabilities + Capital', 'Assets = Liabilities - Capital', 'Assets + Liabilities = Capital', 'Assets - Liabilities = Capital'],
                                correctAnswer: 'Assets = Liabilities + Capital'
                            },
                            {
                                question: 'Which financial statement shows the financial position of a business?',
                                options: ['Income Statement', 'Balance Sheet', 'Cash Flow Statement', 'Trial Balance'],
                                correctAnswer: 'Balance Sheet'
                            }
                        ]
                    },
                    'Journal and Ledger': {
                        questions: [
                            {
                                question: 'What is the book of original entry?',
                                options: ['Journal', 'Ledger', 'Trial Balance', 'Balance Sheet'],
                                correctAnswer: 'Journal'
                            }
                        ]
                    }
                }
            }
        },
        
        notes: {
            '11': [
                { id: 1, grade: 11, subject: 'Physics', title: 'Chapter 1: Unit and Dimension', link: 'https://drive.google.com/file/d/178ortL2-MP8zK9pOaSX-0KTKFUz5OhUI/view?usp=sharing', isPremium: false },
                { id: 2, grade: 11, subject: 'Physics', title: 'Chapter 2: Vectors', link: 'https://drive.google.com/file/d/19q88Gi6sk4TXrwkP-Pmql4KDDX0sPd3u/view', isPremium: false },
                { id: 3, grade: 11, subject: 'Physics', title: 'Chapter 3: Kinematics', link: 'https://drive.google.com/file/d/1A3z-ZPzLIOdy7e6eC5TX35KGyfvOqzZh/view', isPremium: false },
                { id: 4, grade: 11, subject: 'Physics', title: 'Chapter 4: Dynamics', link: 'https://drive.google.com/file/d/1A3z-ZPzLIOdy7e6eC5TX35KGyfvOqzZh/view', isPremium: false },
                { id: 40000, grade: 11, subject: 'Physics', title: 'Chapter 4: Dynamics Notes 2', link: 'https://drive.google.com/file/d/1_2Qy9xum2kwST-E6Khs6jA3270Q9v1-L/view?usp=drive_link', isPremium: false },        
                { id: 5, grade: 11, subject: 'Physics', title: 'Chapter 5: Work, Energy and Power', link: 'https://drive.google.com/file/d/1JqUcWrMuhBFuCFaGso5Sd6uxt_D1iSvP/view?usp=sharing', isPremium: false },
                { id: 6, grade: 11, subject: 'Physics', title: 'Chapter 6: Circular Motion', link: 'https://drive.google.com/file/d/1-pvhSMupNVW0QJGcVykufJFVqXfk5jRE/view?usp=drive_link', isPremium: false },
                { id: 7, grade: 11, subject: 'Physics', title: 'Chapter 7: Gravitation', link: 'https://drive.google.com/file/d/1Iw7U6r1tGnmPH6QLnkiOgDl9vGS55zCv/view?usp=drive_link', isPremium: false },
                { id: 13, grade: 11, subject: 'Physics', title: 'Chapter 13: Ideal Gas', link: 'https://drive.google.com/file/d/18Lw1yowtIzcuDfeeVr2wa6Wor7U71PCk/view?usp=drive_link', isPremium: false },
                { id: 15, grade: 11, subject: 'Physics', title: 'Chapter 15: Refraction at Plane Surface', link: 'https://drive.google.com/file/d/1UXPH9X2H-kJNyVG0CRgZT0O_iV4U-JMu/view?usp=drive_link', isPremium: false },
                { id: 20, grade: 11, subject: 'Physics', title: 'Chapter 20: Electric Field', link: 'https://drive.google.com/file/d/1qVXMBMc4DHuFEkNAmgsSZ9gY-6_q6Zj_/view?usp=drive_link', isPremium: false },
                { id: 22, grade: 11, subject: 'Physics', title: 'Chapter 22: Capacitor and Capacitance', link: 'https://drive.google.com/file/d/1GjUkgrsmyRv3RJbvHUqmXiRIkHceIDa7/view?usp=drive_link', isPremium: false },
                { id: 24, grade: 11, subject: 'Physics', title: 'Chapter 24: Nuclear Physics', link: 'https://drive.google.com/file/d/1vGHhytFU97B9XpIn2aWaerZqWzfhWKdg/view?usp=drive_link', isPremium: false },
                { id: 2400, grade: 11, subject: 'Physics', title: 'Kinetic Theory of Gases', link: 'https://drive.google.com/file/d/1LmRl2CNWPIUAfoyR1hch84UkHhG5r3NT/view', isPremium: false },
                { id: 24001, grade: 11, subject: 'Physics', title: 'NEB SOLUTION PHYSIC', link: 'https://drive.google.com/file/d/1CuuW9hsH195ChmSl1q5Enmgy3jNzeqyS/view?usp=drive_link', isPremium: true },
                { id: 24001, grade: 11, subject: 'Chemistry', title: 'NEB SOLUTION CHEMISTRY', link: 'https://drive.google.com/file/d/1Svasx5b2iQbr9KjA6rdU5rHzkkVuBdTl/view?usp=drive_link', isPremium: true },
                { id: 25, grade: 11, subject: 'Physics', title: 'Chapter 25: Solid', link: 'https://drive.google.com/file/d/1tnyzm4N_YsVUd6uW1--oaHZMsNP12ITb/view?usp=drive_link', isPremium: false },
                { id: 1001, grade: 11, subject: 'Mathematics', title: 'All Required Formula', link: 'https://drive.google.com/file/d/1LmRl2CNWPIUAfoyR1hch84UkHhG5r3NT/view', isPremium: true  },
                { id: 1002, grade: 11, subject: 'Mathematics', title: 'Application of Derivatives', link: 'https://drive.google.com/file/d/1pQtaBDd0RBLf1Et4d_S6KIHPkOwVtPwA/view', isPremium: false },
                { id: 1003, grade: 11, subject: 'Mathematics', title: 'Antiderivatives', link: 'https://drive.google.com/file/d/1q-NpT-ueLZvjHZHjlGLRL1A3X_MHYXrV/view', isPremium: false },
                { id: 2001, grade: 11, subject: 'Biology', title: 'Cell Biology', link: 'https://drive.google.com/file/d/14Ohb60T-q3sI5XXbXTiz43hY-UxWb80n/view', isPremium: false },
                { id: 27, grade: 11, subject: 'Chemistry', title: 'Chapter 1: Foundation and Fundamentals', link: 'https://drive.google.com/file/d/1AuHGWyxBDjBtH4rGMH7JaBaVvgREOKJR/view?usp=sharing', isPremium: false },
                { id: 28, grade: 11, subject: 'Chemistry', title: 'Chapter 2: Stoichiometry', link: 'https://drive.google.com/file/d/1AnNzZ_KejeWSbBTATk9gNc_6zz0uwByP/view?usp=sharing', isPremium: false },
                { id: 29, grade: 11, subject: 'Chemistry', title: 'Redox Reaction', link: 'https://drive.google.com/file/d/1LaSQwV4abLBa0PewrikGWCp5geRm9vwF/view?usp=drive_link', isPremium: false },
                { id: 31, grade: 11, subject: 'Chemistry', title: 'Chapter 5: Chemical Bonding and Shape of Molecules', link: '#', isPremium: false },
                { id: 39, grade: 11, subject: 'Chemistry', title: 'Hydrocarbon', link: 'https://drive.google.com/file/d/1isy9p4pW1RGnakYSTV7m7eTV1lW6pqAR/view?usp=drive_link', isPremium: false },
                { id: 40, grade: 11, subject: 'Chemistry', title: 'Chapter 14: Hydrocarbons', link: 'https://drive.google.com/file/d/1isy9p4pW1RGnakYSTV7m7eTV1lW6pqAR/view?usp=drive_link', isPremium: false },
                { id: 43, grade: 11, subject: 'Chemistry', title: 'Mole Concept', link: 'https://drive.google.com/file/d/1jxCaNO8ztUR_tXseI_SUvJPzRK4enfOu/view?usp=drive_link', isPremium: false },
                { id: 56, grade: 11, subject: 'Nepali', title: 'Chapter 1: वीर पुर्खा (कविता)', link: 'https://drive.google.com/file/d/14o1jiIKU6CxSQw7pAu_ofmASW9j3ET62/view?usp=sharing', isPremium: false },
                { id: 57, grade: 11, subject: 'Nepali', title: 'Chapter 2: गाउँको माया (सामाजिक कथा)', link: 'https://drive.google.com/file/d/1QXJGVAPRw_Sn3x7XTcXZSz-F2gJwm_GH/view?usp=drive_link', isPremium: false },
                { id: 58, grade: 11, subject: 'Nepali', title: 'Chapter 3: संस्कृतिको नयाँ यात्रा (आत्मपरक निबन्ध)', link: 'https://drive.google.com/file/d/1xtfOah6kXFZJZ1kttcYJB0EPIc_pmJre/view?usp=drive_link', isPremium: false },
                { id: 59, grade: 11, subject: 'Nepali', title: 'Chapter 4: योगमाया (राष्ट्रिय जीवनी)', link: 'https://drive.google.com/file/d/1xtfOah6kXFZJZ1kttcYJB0EPIc_pmJre/view?usp=drive_link', isPremium: false },
                { id: 60, grade: 11, subject: 'Nepali', title: 'Chapter 5: साथीलाई चिठी (चिठी)', link: 'https://drive.google.com/file/d/1c58gPPDRi3oXIBv4Q78w3sZ0MnijrR4M/view?usp=drive_link', isPremium: false },
                { id: 61, grade: 11, subject: 'Nepali', title: 'Chapter 6: त्यो फेरि फर्कला ? (मनोवैज्ञानिक कथा)', link: 'https://drive.google.com/file/d/1DTuckBk17asB7jyt7nxDPupM-ArIdTQN/view?usp=drive_link', isPremium: false },
                { id: 62, grade: 11, subject: 'Nepali', title: 'Chapter 7: पर्यापर्यटनका सम्भावना र आयाम (वस्तुपरक निबन्ध)', link: 'https://drive.google.com/file/d/1KmSgmBGFuplBHWL7t-g8pNavDszk1CJX/view?usp=drive_link', isPremium: false },
                { id: 63, grade: 11, subject: 'Nepali', title: 'Chapter 8: लौ आयो ताजा खबर (लघु नाटक)', link: 'https://drive.google.com/file/d/1ZCEuV5Uk8JcvkEQ_BpWpkCiUQwKydPkF/view?usp=drive_link', isPremium: false },
                { id: 64, grade: 11, subject: 'Nepali', title: 'Chapter 9: सफलताको कथा (रिपोर्ताजमूलक रचना)', link: 'https://drive.google.com/file/d/1dZtM1SIUXF84hC0FMHyn-N1pNRgLHLNk/view?usp=drive_link', isPremium: false },
                { id: 65, grade: 11, subject: 'Nepali', title: 'Chapter 10: कृषिशालामा एक दिन (संवाद)', link: 'https://drive.google.com/file/d/1KIAkEeir7EvLs_5m3gmGbWv3bycrWQyL/view?usp=drive_link', isPremium: false },
                { id: 66, grade: 11, subject: 'Nepali', title: 'Chapter 11: रारा भ्रमण (दैनिकी)', link: 'https://drive.google.com/file/d/1QJONcOzYBEJ1zcvWXk-wdjlDvjcol1yv/view?usp=drive_link', isPremium: false },
                { id: 67, grade: 11, subject: 'Nepali', title: 'Chapter 12: जलस्रोत र ऊर्जा (वक्तृता)', link: 'https://drive.google.com/file/d/1QJONcOzYBEJ1zcvWXk-wdjlDvjcol1yv/view?usp=drive_link', isPremium: false },
                { id: 870, grade: 11, subject: 'English', title: 'English All Chapter Summary', link: 'https://drive.google.com/file/d/1sg7AS_XY_fCjXVQtMh5KOjocSYJsy6aH/view?usp=sharing', isPremium: false },
                { id: 68, grade: 11, subject: 'English', title: 'Short Story 1: The Selfish Giant', link: 'https://drive.google.com/file/d/1WZLcd_cF2OQOkb94ROJo248IeTzksJlz/view?usp=drive_link', isPremium: false },
                { id: 69, grade: 11, subject: 'English', title: 'Short Story 2: The Oval Portrait', link: 'https://drive.google.com/file/d/1GFra9h7f99v5PQowLbc1C9SrJQ4vr9NX/view?usp=drive_link', isPremium: false },
                { id: 70, grade: 11, subject: 'English', title: 'Short Story 3: God Sees the Truth but Waits', link: 'https://drive.google.com/file/d/1or-fUzIpVib4TKV4obxtWTmF4Sq_uoAT/view?usp=drive_link', isPremium: false },
                { id: 71, grade: 11, subject: 'English', title: 'Short Story 4: The Wish', link: 'https://drive.google.com/file/d/1GvVpSpxu-gBYO3vcTeyqUUq-rDNdvN4Q/view?usp=drive_link', isPremium: false },
                { id: 72, grade: 11, subject: 'English', title: 'Short Story 5: Civil Peace', link: 'https://drive.google.com/file/d/1oVWYQHjqOjuU-pNXHw7qwwS6QM6UHcSi/view?usp=drive_link', isPremium: false },
                { id: 73, grade: 11, subject: 'English', title: 'Short Story 6: Two Little Soldiers', link: 'https://drive.google.com/file/d/11dncnQtHkiIkijcT8mV1YRJyqiSFqYZX/view?usp=drive_link', isPremium: false },
                { id: 74, grade: 11, subject: 'English', title: 'Short Story 7: An Astrologer’s Day', link: 'https://drive.google.com/file/d/1tPbLQW_0oE6q1JixGbPZr6q4g6QOVnJz/view?usp=drive_link', isPremium: false },
                { id: 75, grade: 11, subject: 'English', title: 'Poem 1: Corona Says', link: 'https://drive.google.com/file/d/1S9A49FBnAw3ISzjO3TZnC_JlutqXJtPV/view?usp=drive_link', isPremium: false },
                { id: 76, grade: 11, subject: 'English', title: 'Poem 2: A Red, Red Rose', link: 'https://drive.google.com/file/d/1YjeVe1YWNFb8kg_FciGowWlU1zRldn-C/view?usp=drive_link', isPremium: false },
                { id: 77, grade: 11, subject: 'English', title: 'Poem 3: All the World’s a Stage', link: 'https://drive.google.com/file/d/1YjeVe1YWNFb8kg_FciGowWlU1zRldn-C/view?usp=drive_link', isPremium: false },
                { id: 78, grade: 11, subject: 'English', title: 'Poem 4: Who are you, little i?', link: 'https://drive.google.com/file/d/1ERog4fo4dXscQYbV2WRcsnRiFn2ZEVZl/view?usp=drive_link', isPremium: false },
                { id: 79, grade: 11, subject: 'English', title: 'Poem 5: The Gift in Wartime', link: 'https://drive.google.com/file/d/1PLbzZlJajMQZnfOpLNtG2MZVaYrfEST1/view?usp=drive_link', isPremium: false },
                { id: 80, grade: 11, subject: 'English', title: 'Essay 1: Sharing Tradition', link: 'https://drive.google.com/file/d/16C1MWTlPpwa9RooXQ7iegUr83bBAqHLr/view?usp=drive_link', isPremium: false },
                { id: 81, grade: 11, subject: 'English', title: 'Essay 2: How to Live Before You Die', link: 'Summary and Exercise', isPremium: false },
                { id: 82, grade: 11, subject: 'English', title: 'Essay 3: What I Require from Life', link: 'Summary and Exercise', isPremium: false },
                { id: 83, grade: 11, subject: 'English', title: 'Essay 4: What is Poverty?', link: 'https://drive.google.com/file/d/1WCiA50pxL4-U2L34oiy58CFhzH4lxu0L/view?usp=drive_link', isPremium: false },
                { id: 84, grade: 11, subject: 'English', title: 'Essay 5: Scientific Research is a Token of Humankind’s Survival', link: 'https://drive.google.com/file/d/1jSLzmB8_Ga8xHOBpZAP8naPur_5Tjjfv/view?usp=drive_link', isPremium: false },
                { id: 85, grade: 11, subject: 'English', title: 'One Act Play 1: Trifles', link: 'https://drive.google.com/file/d/1xO0jjNFWFM8aG1PQzoAsTWoYt1nXXOO9/view?usp=drive_link', isPremium: false },
                { id: 86, grade: 11, subject: 'English', title: 'One Act Play 2: A Sunny Morning', link: 'https://drive.google.com/file/d/1PPCE_ZlmcRfpGwlSenpR9PYFHYdnVjOL/view?usp=drive_link', isPremium: false },
                { id: 87, grade: 11, subject: 'English', title: 'One Act Play 3: Refund', link: 'https://drive.google.com/file/d/1MNPZk9zEaQKkPPexdBdf5TL9jmJ9O91D/view?usp=drive_link', isPremium: false },
                { id: 105, grade: 11, subject: 'Computer Science', title: 'Computer System', link: 'https://drive.google.com/file/d/10XsdgPqsIcxVk-OgkVdCgTjUwRXzad9T/view', isPremium: false },
                { id: 106, grade: 11, subject: 'Computer Science', title: 'Number System', link: 'https://drive.google.com/file/d/1NG6wBIswzHTNUs0M_o1KEETF42zzTJDO/view', isPremium: false },
                { id: 103, grade: 11, subject: 'Economics', title: 'Basic Concept of Economics and Allocation of Resource', link: 'https://drive.google.com/file/d/1NSkP2fRnDRajGjekFAhYQpb1yujkUg8Y/view', isPremium: false },
                { id: 104, grade: 11, subject: 'Economics', title: 'Demand, Supply and Market Equilibrium', link: 'https://drive.google.com/file/d/1HEF4vS2yj3I3G_zJ0nI2i8DIlJIc8F6f/view', isPremium: false }
            ],
            '12': [
                { id: 67, grade: 12, subject: 'English', title: 'All chapter Notes', link: 'https://drive.google.com/file/d/1BqvnQbwHArrfTJyayfvMpO6K4w_qHYxu/view?usp=sharing', isPremium: false },
                { id: 56, grade: 12, subject: 'Nepali', title: 'All chapter Notes', link: 'https://drive.google.com/file/d/1tXMGn94Kc3-DOhNaoXJgMqzXL9uuFiwq/view?usp=drive_link', isPremium: false },
                { id: 44, grade: 12, subject: 'Nepali', title: 'Chapter 1: आमाको सपना', link: 'https://drive.google.com/file/d/17k0Pn06jyisTNs9NWg3uI2yUtlc2A2Ns/view?usp=drive_link', isPremium: false },
                { id: 45, grade: 12, subject: 'Nepali', title: 'Chapter 2: विरहिणी दमयन्ती', link: 'https://drive.google.com/file/d/1Cd8K4t86nSyYL1xgvyQgU1Vfm_P59pj-/view?usp=drive_link', isPremium: false },
                { id: 46, grade: 12, subject: 'Nepali', title: 'Chapter 3: घनघस्याको उकालो काट्ता', link: '#', isPremium: false },
                { id: 47, grade: 12, subject: 'Nepali', title: 'Chapter 4: व्यावसायिक पत्र', link: '#', isPremium: false },
                { id: 48, grade: 12, subject: 'Nepali', title: 'Chapter 5: एक चिहान', link: '#', isPremium: false },
                { id: 49, grade: 12, subject: 'Nepali', title: 'Chapter 6: स्टिफन विलियम हकिङ', link: '#', isPremium: false },
                { id: 50, grade: 12, subject: 'Nepali', title: 'Chapter 7: हामीलाई बोलाउँछन् हिमचुली', link: '#', isPremium: false },
                { id: 51, grade: 12, subject: 'Nepali', title: 'Chapter 8: मातृत्व', link: '#', isPremium: false },
                { id: 52, grade: 12, subject: 'Nepali', title: 'Chapter 9: गोर्खे', link: '#', isPremium: false },
                { id: 53, grade: 12, subject: 'Nepali', title: 'Chapter 10: नेपाली पहिचान', link: '#', isPremium: false },
                { id: 54, grade: 12, subject: 'Nepali', title: 'Chapter 11: सहकारी', link: '#', isPremium: false },
                { id: 55, grade: 12, subject: 'Nepali', title: 'Chapter 12: जीवन मार्ग', link: '#', isPremium: false },
                { id: 90, grade: 12, subject: 'Physics', title: 'NEB Solution of Physic', link: 'https://drive.google.com/file/d/1L85dj2NZpQNdh-WJ436-lfq5Xxeg6gHb/view?usp=drive_link', isPremium: true },
                { id: 888, grade: 12, subject: 'Physics', title: 'PYQ part 1', link: 'https://drive.google.com/file/d/18iD477VUE6xzQFfaaWvkQx7d3PvZK7k3/view', isPremium: false },
                { id: 889, grade: 12, subject: 'Physics', title: 'PYQ part 2', link: 'https://drive.google.com/file/d/1evkTPn89SR8SKWuUMmk5txbMkO524d1a/view', isPremium: false },
                { id: 890, grade: 12, subject: 'Physics', title: 'PYQ part 3', link: 'https://drive.google.com/file/d/10pNcsw0Hsl6D1aRm7QgUyKExyVz0Fhnc/view', isPremium: false },     
                { id: 91, grade: 12, subject: 'Chemistry', title: 'NEB Solution of CHEMISTRY ', link: 'https://drive.google.com/file/d/16-zrrjnyWsgKFRRjBkoQC-lHOMbclhUo/view?usp=drive_link', isPremium: true },
                { id: 92, grade: 12, subject: 'Chemistry', title: 'Chemistry (Old Course) Model Question', link: 'https://drive.google.com/file/d/1jtYvAHccbyaQJvSrArK8GkR7td4pQG_F/view?usp=drive_link', isPremium: false },
                { id: 93, grade: 12, subject: 'Chemistry', title: 'Chemistry (New Course) Model Question', link: 'https://drive.google.com/file/d/1LbdV2IJ3_l5bS7x7Y4adO-NQdLxxiAjL/view?usp=drive_link', isPremium: false },
                { id: 94, grade: 12, subject: 'Chemistry', title: 'Organic Chemistry All Reaction', link: 'https://drive.google.com/file/d/1GfCRiOT3DRgs0pMQVq4lWii7CKdrL9Zh/view?usp=sharing', isPremium: false },
                { id: 88, grade: 12, subject: 'Computer Science', title: 'Chapter 1: Database Management System-DBMS', link: 'https://drive.google.com/file/d/1DtSP6LLwHNyjoocexF27JqufbCCWk5xW/view?usp=drive_link', isPremium: false },
                { id: 89, grade: 12, subject: 'Computer Science', title: 'Chapter 2: C Programming', link: 'https://drive.google.com/file/d/17jaxvRuaGkUPgxaoj09z53EpA7sTbe6X/view?usp=drive_link', isPremium: false },
                { id: 97, grade: 12, subject: 'Computer Science', title: 'Chapter 3: Web Technology', link: 'https://drive.google.com/file/d/1eBIC14NIjS0OrQ2noOr-bazkf8I6AUqg/view?usp=drive_link', isPremium: false },
                { id: 98, grade: 12, subject: 'Computer Science', title: 'Chapter 6: Software Process Model-SPM', link: 'https://drive.google.com/file/d/11HjWSVEM6dBpaRgaz8pHjs7e1DdrUzN7/view?usp=drive_link', isPremium: false },
                { id: 99, grade: 12, subject: 'Computer Science', title: 'Chapter 4: Data-Communication and Networking', link: 'https://drive.google.com/file/d/12BHeC0oavhFZSBMdG4uFpmq4xIDLqhfO/view?usp=drive_link', isPremium: false },
                { id: 100, grade: 12, subject: 'Computer Science', title: 'Model Questions Papers', link: 'https://drive.google.com/file/d/1I9AsK1N4rpr5Knn77kOYvZXCWJuGzNze/view?usp=drive_link', isPremium: false },
                { id: 101, grade: 12, subject: 'Computer Science', title: 'Important Questions', link: 'https://drive.google.com/file/d/1qgWiKrtiOWFBUsayWyaKrd7UbMJyBFwK/view?usp=drive_link', isPremium: false },
                { id: 102, grade: 12, subject: 'Computer Science', title: 'Extra C Programming Solution', link: 'https://drive.google.com/file/d/1JWEsgCwlMlJSZnjpqcVRfkdq4ormqiGD/view?usp=drive_link', isPremium: false },
                { id: 9888, grade: 12, subject: 'Mathematics', title: 'PYQ part 1', link: 'https://drive.google.com/file/d/1be2JQyA_7_Z7Qf8GKwyMrTPQahiqBJEg/view', isPremium: false },
                { id: 9889, grade: 12, subject: 'Mathematics', title: 'PYQ part 2', link: 'https://drive.google.com/file/d/1Uc2IGX_TSWcpLXMij2ANeBt0I33ZCXWY/view', isPremium: false },
                { id: 9890, grade: 12, subject: 'Mathematics', title: 'PYQ part 3', link: 'https://drive.google.com/file/d/1FHrtcaL4JQfAAEgVDSKKQJbvw9ywuCW4/view', isPremium: false }
            ]
        },
        examPreps: {
            routines: [ { subject: "Compulsory English", date: "2081/01/14" }, { subject: "Physics / Accountancy", date: "2081/01/16" }, ],
            checklists: [ { subject: 'Physics', id: 'phy_checklist', items: ['Revise all derivations in Mechanics', 'Practice numericals from Wave & Optics', 'Memorize key formulas for Modern Physics'] }, { subject: 'Accountancy', id: 'acc_checklist', items: ['Practice Company Account final statements', 'Revise partnership admission and retirement', 'Solve one complete model set'] }, ],
            modelQuestions: [ { id: 1, title: 'NEB Grade 11 All Subject Model set 2082 Grade 11', link: 'https://drive.google.com/file/d/1Twsmqo8m0HILemG2jub78Vk_DngB40bn/view?usp=drive_link', isPremium: true }, { id: 2, title: 'OLD is GOLD Question Bank Grade 12', link: 'https://drive.google.com/file/d/1Xc9EBCoFfBQCe7cEWTvboOCXe1sEaRWO/view?usp=drive_link', isPremium: true },  { id: 3, grade: 11, subject: 'All subject', title: 'OLD is GOLD Question Bank Grade 11', link: 'https://drive.google.com/file/d/1H92WYzcYca456OIgi-xx78sdwAv35tsJ/view?usp=drive_link', isPremium: true }, ]
        },
        motivationalQuotes: ["The secret of getting ahead is getting started.", "Believe you can and you're halfway there.", "The expert in anything was once a beginner."],
        brainTeasers: [
            { question: "I speak without a mouth and hear without ears. I have no body, but I come alive with wind. What am I?", answer: "echo" },
            { question: "What has an eye, but cannot see?", answer: "needle" },
            { question: "What is full of holes but still holds water?", answer: "sponge" }
        ],
        digitalLibrary: {
            '11': [
                {
                    id: 2001,
                    title: 'NEB Grade 11 — Physics',
                    link: 'https://drive.google.com/file/d/1CuuW9hsH195ChmSl1q5Enmgy3jNzeqyS/view?usp=drive_link',
                    description: 'Complete PDF notes for Grade 11 Physics.',
                    isPremium: false
                },
                {
                    id: 2002,
                    title: 'Chemistry – NEB Solutions & Model Papers',
                    link: 'https://drive.google.com/file/d/1Svasx5b2iQbr9KjA6rdU5rHzkkVuBdTl/view?usp=drive_link',
                    description: 'Past-year solutions and model question sets.',
                    isPremium: false
                },
                {
                    id: 2003,
                    title: 'ALL PHYSICS FORMULA',
                    link: 'https://drive.google.com/file/d/1CuuW9hsH195ChmSl1q5Enmgy3jNzeqyS/view?usp=drive_link',
                    description: 'All required formula for +2',
                    isPremium: true
                },
                 {
                    id: 20003,
                    title: 'ALL Mathematics FORMULA from 10 to 12',
                    link: 'https://drive.google.com/file/d/1vWBF0pINsJhRHXRzndRVS3OdS00mEhNq/view?usp=drive_link',
                    description: 'All required formula for +2',
                    isPremium: true
                },
                { 
                    id: 2004, 
                    title: 'All Past Year Model Question Saint Xavier', 
                    link: 'https://drive.google.com/file/d/10m-T2hfjyQ-7AWTlDeTY-TrS9cYlL8DQ/view?usp=drive_link', 
                    description: 'All NEB chemistry model question papers in one PDF.',
                    isPremium: true 
                },
                { 
                    id: 2005, 
                    title: 'OLD is GOLD Question Bank', 
                    link: 'https://drive.google.com/file/d/1hL58rjsIdlkm82SdbncHVVmU8sh4wWZ6/view?usp=sharing',
                    description: 'All NEB chemistry model question papers in one PDF.',
                    isPremium: true 
                },
                { 
                    id: 2007, 
                    title: 'Basic Mathematics Book ',
                    link: 'https://drive.google.com/file/d/1mKSZbb2P20uwRh4x3QamtjlK0iTFG9Wh/view?usp=sharing',
                    description: 'Sukunda Publication Mathematics Book XI',
                    isPremium: true 
                },   
                { 
                    id: 2009, 
                    title: 'Mathematics Mindmap Revision ',
                    link: 'https://drive.google.com/file/d/1xw8gj6J_xFY8Kq6z89vtVuTkhusn7JUh/view?usp=drive_link',
                    description: 'All chapter one short revision Mindmap',
                    isPremium: true 
                },  
                { 
                    id: 2008, 
                    title: 'Basic Mathematics Book',
                    link: 'https://drive.google.com/file/d/1mKSZbb2P20uwRh4x3QamtjlK0iTFG9Wh/view?usp=drive_link',
                    description: 'Sukunda Publication Mathematics Book XI',
                    isPremium: false
                },
                { 
                    id: 2010, 
                    title: 'Physics Revision ',
                    link: 'https://drive.google.com/file/d/14pusyzYyLzTMc__ZIZrL9RqcIa43CQgL/view?usp=sharing',
                    description: 'Chapterwise important Points and formula',
                    isPremium: false
                },
                { 
                    id: 2011, 
                    title: 'Chemistry Revision ',
                    link: 'https://drive.google.com/file/d/1otvuEtlzi0b1qM8OQYZ4MBoFdPwW8l2S/view?usp=drive_link',
                    description: 'Chapterwise important Points and formula',
                    isPremium: true
                },
                { 
                    id: 2012, 
                    title: 'Biology Revision ',
                    link: 'https://drive.google.com/file/d/19hZnmRliOizD1ODXFlFH-eIWgOO5BPTa/view?usp=drive_link',
                    description: 'Chapterwise important Points and formula',
                    isPremium: true
                },
                { 
                    id: 2013, 
                    title: 'Mathematics Revision ',
                    link: 'https://drive.google.com/file/d/1GdaMxRcl0uXJpGOJ4SpE1thtit75zR74/view?usp=drive_link',
                    description: 'Chapterwise important Points and formula',
                    isPremium: true
                },
                 { 
                    id: 20131, 
                    title: 'English All Chapter Summary',
                    link: 'https://drive.google.com/file/d/1sg7AS_XY_fCjXVQtMh5KOjocSYJsy6aH/view?usp=sharing',
                    description: 'Short summary of all chapter',
                    isPremium: false
                },
            ],
            '12': [
                {
                    id: 3001,
                    title: 'NEB Grade 12 — Physics Solutions',
                    link: 'https://drive.google.com/file/d/1L85dj2NZpQNdh-WJ436-lfq5Xxeg6gHb/view?usp=drive_link',
                    description: 'Complete solutions for Grade 12 Physics.',
                    isPremium: false
                },
                {
                    id: 300001,
                    title: 'All Organic Chemistry Reaction',
                    link: 'https://drive.google.com/file/d/1GfCRiOT3DRgs0pMQVq4lWii7CKdrL9Zh/view?usp=drive_link',
                    description: 'Complete solutions for Grade 12 Physics.',
                    isPremium: false
                },
                 {
                    id: 3003,
                    title: 'NEB Grade 12 — Biology Solutions',
                    link: 'https://drive.google.com/file/d/1TYaaJiS6e2TAUIujJwrm3MLfAvul2zo7/view?usp=drive_link',
                    description: 'Complete solutions for Grade 12 Physics.',
                    isPremium: false
                },
                {
                    id: 20003,
                    title: 'ALL Mathematics FORMULA from 10 to 12',
                    link: 'https://drive.google.com/file/d/1vWBF0pINsJhRHXRzndRVS3OdS00mEhNq/view?usp=drive_link',
                    description: 'All required formula for +2',
                    isPremium: true
                },
                {
                    id: 3002,
                    title: 'Chemistry – NEB Solutions Grade 12',
                    link: 'https://drive.google.com/file/d/16-zrrjnyWsgKFRRjBkoQC-lHOMbclhUo/view?usp=drive_link',
                    description: 'Past-year solutions for Grade 12 Chemistry.',
                    isPremium: false
                },
                { 
                    id: 3004, 
                    title: 'Mathematics Mindmap Revision ',
                    link: 'https://drive.google.com/file/d/1xw8gj6J_xFY8Kq6z89vtVuTkhusn7JUh/view?usp=drive_link',
                    description: 'All chapter one short revision Mindmap ',
                    isPremium: true 
                },  
                { 
                    id: 2010, 
                    title: 'Physics Revision ',
                    link: 'https://drive.google.com/file/d/14pusyzYyLzTMc__ZIZrL9RqcIa43CQgL/view?usp=sharing',
                    description: 'Chapterwise important Points and formula',
                    isPremium: false
                },
                { 
                    id: 2011, 
                    title: 'Chemistry Revision ',
                    link: 'https://drive.google.com/file/d/1otvuEtlzi0b1qM8OQYZ4MBoFdPwW8l2S/view?usp=drive_link',
                    description: 'Chapterwise important Points and formula',
                    isPremium: true
                },
                { 
                    id: 2012, 
                    title: 'Biology Revision ',
                    link: 'https://drive.google.com/file/d/19hZnmRliOizD1ODXFlFH-eIWgOO5BPTa/view?usp=drive_link',
                    description: 'Chapterwise important Points and formula',
                    isPremium: true
                },
                { 
                    id: 2013, 
                    title: 'Mathematics Revision ',
                    link: 'https://drive.google.com/file/d/1GdaMxRcl0uXJpGOJ4SpE1thtit75zR74/view?usp=drive_link',
                    description: 'Chapterwise important Points and formula',
                    isPremium: true
                },
                
            ]
        },
        ourBooks: {
            '11': [
                {
                    id: 5001,
                    title: 'Rich Dad Poor Dad',
                    link: 'https://drive.google.com/file/d/0Bxui5Z2avE4wbVFNdG1uaFFfRE0/view?resourcekey=0-ZitNMoCTYpIqvYEzUlBe7Q',
                    description: '......',
                    isPremium: false
                },
                {
                    id: 5002,
                    title: 'Atomic Habit',
                    link: 'https://drive.google.com/file/d/1eAZMdXO-Zn4_90TV365KMpIqfxUy7J0t/view',
                    description: '......',
                    isPremium: true
                },
                {
    id: 5013,
    title: 'The 7 Habits of Highly Effective People',
    link: 'https://drive.google.com/file/d/0B59A49E2AGkCNW9DN016NFdmZVk/edit?etreirorvers=hisdylara&resourcekey=0-fsknkB_VurKKRCocBCeCAg',
    description: 'Stephen Covey\'s classic on personal and professional effectiveness, teaching principles for success in life through 7 powerful habits that transform mindset and productivity.',
    isPremium: true
},
{
    id: 5014,
    title: 'How to Win Friends and Influence People',
    link: 'https://drive.google.com/file/d/0B6PFH-cFZihVdE9LbG5NbHA1Nzg/edit?resourcekey=0-DJuttNJ28uFasos32CDT7w',
    description: 'Dale Carnegie\'s timeless guide to building relationships, improving communication skills, and becoming more influential in both personal and professional settings.',
    isPremium: true
},
{
    id: 5015,
    title: 'The Power of Now',
    link: 'https://drive.google.com/file/d/0B_pxydvD-SjhQnR4bk96YUJsaVE/edit?resourcekey=0-kMKtWaVWq1q974t-qQwc0Q',
    description: 'Eckhart Tolle\'s spiritual guide to living in the present moment, reducing anxiety, and finding inner peace through mindfulness and awareness practices.',
    isPremium: true
},
{
    id: 5016,
    title: 'Thinking, Fast and Slow',
    link: 'https://drive.google.com/file/d/0B7y91D08k6X8RkRranBfd05fTEU/preview?resourcekey=0-dYgxzjaJ0yMVuRZ1PMdP3A',
    description: 'Daniel Kahneman explores the two systems that drive how we think - the intuitive, emotional system and the deliberate, logical system - and how they shape our judgments.',
    isPremium: true
},
{
    id: 5017,
    title: 'The Subtle Art of Not Giving a F*ck',
    link: '#',
    description: 'Mark Manson\'s counterintuitive approach to living a good life through embracing limitations, choosing meaningful values, and caring about what truly matters.',
    isPremium: true
},
{
    id: 5018,
    title: 'Deep Work',
    link: '#',
    description: 'Cal Newport\'s guide to mastering focused work in an increasingly distracted world, providing rules for developing deep concentration skills essential for success.',
    isPremium: true
},
{
    id: 5019,
    title: 'The Alchemist',
    link: '#',
    description: 'Paulo Coelho\'s inspirational novel about following your dreams and personal legend, teaching valuable lessons about destiny, perseverance, and life\'s journey.',
    isPremium: false 
},
{
    id: 5020,
    title: 'Mindset: The New Psychology of Success',
    link: '#',
    description: 'Carol Dweck explores how our beliefs about our abilities - fixed vs growth mindset - profoundly impact our success in school, work, sports, and relationships.',
    isPremium: true
},
{
    id: 5021,
    title: 'The 5 AM Club',
    link: '#',
    description: 'Robin Sharma\'s method for mastering your morning, increasing productivity, and transforming your life through the revolutionary morning routine used by high achievers.',
    isPremium: true
},
// Nepali Books
{
    id: 5022,
    title: 'कर्णाली ब्लुज',
    link: '#',
    description: 'बुद्धिसागरको प्रसिद्ध उपन्यास जसले पश्चिम नेपालको जीवन, संस्कृति र सामाजिक यथार्थको मार्मिक चित्रण गर्दछ।',
    isPremium: true
},
{
    id: 5023,
    title: 'पाल्पासा कैफे',
    link: '#',
    description: 'नारायण वाग्ले प्रवक्ताको लोकप्रिय उपन्यास जसले युवा मनको आकांक्षा, प्रेम र जीवनका जटिलताहरूको बर्णन गर्दछ।',
    isPremium: true
},
{
    id: 5024,
    title: 'सेतो धरती',
    link: '#',
    description: 'अमर न्यौपानेको कृति जसले नेपाली समाजको सामाजिक, आर्थिक र राजनीतिक यथार्थलाई उत्कृष्ट रूपमा चित्रण गरेको छ।',
    isPremium: true
}
                
            ],
            '12': [
                 {
                    id: 5001,
                    title: 'Rich Dad Poor Dad',
                    link: 'https://drive.google.com/file/d/0Bxui5Z2avE4wbVFNdG1uaFFfRE0/view?resourcekey=0-ZitNMoCTYpIqvYEzUlBe7Q',
                    description: '......',
                    isPremium: false
                },
                {
                    id: 5002,
                    title: 'Atomic Habit',
                    link: 'https://drive.google.com/file/d/1eAZMdXO-Zn4_90TV365KMpIqfxUy7J0t/view',
                    description: '......',
                    isPremium: true
                },
                {
    id: 5013,
    title: 'The 7 Habits of Highly Effective People',
    link: 'https://drive.google.com/file/d/0B59A49E2AGkCNW9DN016NFdmZVk/edit?etreirorvers=hisdylara&resourcekey=0-fsknkB_VurKKRCocBCeCAg',
    description: 'Stephen Covey\'s classic on personal and professional effectiveness, teaching principles for success in life through 7 powerful habits that transform mindset and productivity.',
    isPremium: true
},
{
    id: 5014,
    title: 'How to Win Friends and Influence People',
    link: 'https://drive.google.com/file/d/0B6PFH-cFZihVdE9LbG5NbHA1Nzg/edit?resourcekey=0-DJuttNJ28uFasos32CDT7w',
    description: 'Dale Carnegie\'s timeless guide to building relationships, improving communication skills, and becoming more influential in both personal and professional settings.',
    isPremium: true
},
{
    id: 5015,
    title: 'The Power of Now',
    link: 'https://drive.google.com/file/d/0B_pxydvD-SjhQnR4bk96YUJsaVE/edit?resourcekey=0-kMKtWaVWq1q974t-qQwc0Q',
    description: 'Eckhart Tolle\'s spiritual guide to living in the present moment, reducing anxiety, and finding inner peace through mindfulness and awareness practices.',
    isPremium: true
},
{
    id: 5016,
    title: 'Thinking, Fast and Slow',
    link: 'https://drive.google.com/file/d/0B7y91D08k6X8RkRranBfd05fTEU/preview?resourcekey=0-dYgxzjaJ0yMVuRZ1PMdP3A',
    description: 'Daniel Kahneman explores the two systems that drive how we think - the intuitive, emotional system and the deliberate, logical system - and how they shape our judgments.',
    isPremium: true
},
{
    id: 5017,
    title: 'The Subtle Art of Not Giving a F*ck',
    link: '#',
    description: 'Mark Manson\'s counterintuitive approach to living a good life through embracing limitations, choosing meaningful values, and caring about what truly matters.',
    isPremium: true
},
{
    id: 5018,
    title: 'Deep Work',
    link: '#',
    description: 'Cal Newport\'s guide to mastering focused work in an increasingly distracted world, providing rules for developing deep concentration skills essential for success.',
    isPremium: true
},
{
    id: 5019,
    title: 'The Alchemist',
    link: '#',
    description: 'Paulo Coelho\'s inspirational novel about following your dreams and personal legend, teaching valuable lessons about destiny, perseverance, and life\'s journey.',
    isPremium: false 
},
{
    id: 5020,
    title: 'Mindset: The New Psychology of Success',
    link: '#',
    description: 'Carol Dweck explores how our beliefs about our abilities - fixed vs growth mindset - profoundly impact our success in school, work, sports, and relationships.',
    isPremium: true
},
{
    id: 5021,
    title: 'The 5 AM Club',
    link: '#',
    description: 'Robin Sharma\'s method for mastering your morning, increasing productivity, and transforming your life through the revolutionary morning routine used by high achievers.',
    isPremium: true
},
// Nepali Books
{
    id: 5022,
    title: 'कर्णाली ब्लुज',
    link: '#',
    description: 'बुद्धिसागरको प्रसिद्ध उपन्यास जसले पश्चिम नेपालको जीवन, संस्कृति र सामाजिक यथार्थको मार्मिक चित्रण गर्दछ।',
    isPremium: true
},
{
    id: 5023,
    title: 'पाल्पासा कैफे',
    link: '#',
    description: 'नारायण वाग्ले प्रवक्ताको लोकप्रिय उपन्यास जसले युवा मनको आकांक्षा, प्रेम र जीवनका जटिलताहरूको बर्णन गर्दछ।',
    isPremium: true
},
{
    id: 5024,
    title: 'सेतो धरती',
    link: '#',
    description: 'अमर न्यौपानेको कृति जसले नेपाली समाजको सामाजिक, आर्थिक र राजनीतिक यथार्थलाई उत्कृष्ट रूपमा चित्रण गरेको छ।',
    isPremium: true
}
                 ]
        },
        // Add this to your DATA object, after the 'ourBooks' section
videos: {
  '11': [
    //{
     // id: 1,
      //title: 'Physics - Mechanics Complete Guide',
     // youtubeId: 'dQw4w9WgXcQ', // Replace with actual YouTube ID
      //description: 'Complete guide to mechanics for Grade 11 students',
     // subject: 'Physics',
      //duration: '45:30',
     // isPremium: false
   // },
   { id: 9, title: "Class-11 Nepali Chapter 1 Exercise | वीर पुर्खा", youtubeId: "bk0jjqy-H_A", description: "वीर पुर्खा अध्याय-1 को सम्पूर्ण अभ्यास (Class-11 Nepali)." },

    { id: 1, title: "Class 11 English | The Selfish Giant Exercise", youtubeId: "ScFa3JeWcuo", description: "Class 11 English The Selfish Giant complete exercise." },
{ id: 2, title: "Class 11 Nepali Bir Purkha Summary | वीर पुर्खा", youtubeId: "BaQJuYDC0JQ", description: "Bir Purkha full summary for Class 11 Nepali." },
{ id: 3, title: "Nepali Shabdakosh Guide | How to Use Dictionary | Grade 11", youtubeId: "Z3VKMxjmyEk", description: "Grade 11 मा नेपाली शब्दकोश प्रयोग गर्ने तरिका र अभ्यासहरू." },
{ id: 4, title: "Free Study Website for Class 11 & 12 Students", youtubeId: "iiZRlMdPvFI", description: "All notes and books free for Class 11 & 12." },
{ id: 5, title: "Class 11 Nepali | Tyo Feri Farkala Summary", youtubeId: "_5IVxkfNpZs", description: "Tyo Feri Farkala summary for Class 11 Nepali." },
{ id: 6, title: "Class 11 Nepali | Gaun Ko Maya Summary | गाउँको माया", youtubeId: "ZJrYDPVvcBM", description: "Gaun Ko Maya full summary for Class 11 Nepali." },
  ],
  '12': [
    { id: 7, title: "Class 12 Nepali Chapter 1 Exercise | आमाको सपना", youtubeId: "GwogQRlvbQ0", description: "Aama Ko Sapana chapter 1 full exercise for Class 12 Nepali." },
{ id: 8, title: "Class 12 Nepali Chapter 2 Summary | विरहिणी दमयन्ती", youtubeId: "3775_-xQjCY", description: "Birahini Damayanti full summary for Class 12 Nepali." },

  ]
},
    };

    // =================================================================================
    // ===== HELPER FUNCTIONS & UTILITIES =====
    // =================================================================================
    const getJSONFromLocalStorage = (key, defaultValue) => { 
        try { 
            const item = localStorage.getItem(key); 
            return item ? JSON.parse(item) : defaultValue; 
        } catch (error) { 
            return defaultValue; 
        } 
    };
    
    const setJSONToLocalStorage = (key, value) => { 
        try { 
            localStorage.setItem(key, JSON.stringify(value)); 
        } catch (error) { 
            console.error("Could not save to localStorage", error); 
        } 
    };
    
    const getEmbedUrl = (url, page) => { 
        if (!url) return null; 
        const regex = /drive\.google\.com\/file\/d\/([a-zA-Z0-9_-]+)/; 
        const match = url.match(regex); 
        let embedUrl = match ? `https://drive.google.com/file/d/${match[1]}/preview` : null;
        if (page && embedUrl) { 
            embedUrl += `#page=${page}`; 
        }
        return embedUrl; 
    };
    
    const generatePremiumCode = (name, stream) => {
        if (!name || name.length < 1 || !stream) return null;
        const getPrecedingAndSuccessiveChars = (char) => {
            const lowerChar = char.toLowerCase(); 
            const code = lowerChar.charCodeAt(0);
            if (code < 97 || code > 122) return { preceding: 'x', successive: 'y' };
            const preceding = String.fromCharCode(code === 97 ? 122 : code - 1);
            const successive = String.fromCharCode(code === 122 ? 97 : code + 1);
            return { preceding, successive };
        };
        const thirdLetter = stream.length >= 3 ? stream.charAt(2) : 'x';
        const { preceding, successive } = getPrecedingAndSuccessiveChars(thirdLetter);
        return `${name.replace(/\s/g, '')}@1234${stream}${preceding}${successive}`;
    };

    class ErrorBoundary extends Component {
        constructor(props) { 
            super(props); 
            this.state = { hasError: false }; 
        }
        
        static getDerivedStateFromError(error) { 
            return { hasError: true }; 
        }
        
        render() { 
            if (this.state.hasError) { 
                return (
                    <div className="p-8 text-center bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 rounded-lg">
                        <h2 className="font-bold text-2xl">Something went wrong.</h2>
                        <p>This part of the app encountered an error. Please try refreshing.</p>
                    </div>
                ); 
            } 
            return this.props.children; 
        }
    }
    
    const AppLoader = () => (
        <div className="fixed inset-0 bg-slate-50 dark:bg-slate-900 flex flex-col items-center justify-center z-[10000]">
            <div className="text-center">
                <img src={DATA.logoUrl} alt="Logo" className="h-24 w-24 mx-auto mb-4 animate-pulse rounded-full" />
                <h1 className="text-4xl font-bold text-slate-800 dark:text-white mt-4 font-display">{DATA.appName}</h1>
                <p className="text-slate-500 dark:text-slate-400">({DATA.appSubtitle})</p>
                <div className="mt-8">
                    <div className="inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary-500 border-r-transparent"></div>
                </div>
            </div>
        </div>
    );
    
    // =================================================================================
    // ===== IMPROVED COMPONENTS =====
    // =================================================================================
    
    // Improved Section Component
    const Section = ({ title, subtitle, children }) => (
        <div className="container mx-auto px-4 py-8">
            {title && (
                <div className="text-center mb-8">
                    <h2 className="text-3xl font-bold text-slate-800 dark:text-white">{title}</h2>
                    {subtitle && <p className="text-slate-500 dark:text-slate-400 mt-2">{subtitle}</p>}
                </div>
            )}
            {children}
        </div>
    );

    // Improved PDF Viewer Modal
    const PdfViewerModal = ({ pdfInfo, onClose }) => { 
        if (!pdfInfo || !pdfInfo.link) return null; 
        const [isLoading, setIsLoading] = useState(true); 
        const viewerRef = useRef(null); 
        const pdfId = useMemo(() => pdfInfo.title.replace(/\s+/g, '_'), [pdfInfo]); 
        const [progressPage, setProgressPage] = useState(''); 
        const [savedPage, setSavedPage] = useState(null); 
        const [showSavedConfirmation, setShowSavedConfirmation] = useState(false);
        const [isFullscreen, setIsFullscreen] = useState(false);

        const getEmbedUrl = useCallback((url, page) => { 
            const fileIdMatch = url.match(/drive\.google\.com\/(?:file\/d\/|drive\/folders\/)([a-zA-Z0-9_-]+)/); 
            if (!fileIdMatch) return null; 
            let embedUrl = `https://drive.google.com/file/d/${fileIdMatch[1]}/preview`; 
            if (page) { embedUrl += `#page=${page}`; } 
            return embedUrl; 
        }, []); 

        useEffect(() => { 
            const savedPageData = localStorage.getItem(`pdfProgress_${pdfId}`); 
            if (savedPageData) { setSavedPage(savedPageData); setProgressPage(savedPageData); } 
        }, [pdfId]); 

        const handleSaveProgress = (e) => { 
            e.preventDefault(); 
            localStorage.setItem(`pdfProgress_${pdfId}`, progressPage); 
            setSavedPage(progressPage); 
            setShowSavedConfirmation(true); 
            setTimeout(() => setShowSavedConfirmation(false), 2500); 
        }; 

        const handleFullscreen = () => {
            if (!document.fullscreenElement) {
                viewerRef.current.requestFullscreen().then(() => {
                    setIsFullscreen(true);
                }).catch(err => {
                    console.error(`Error attempting to enable full-screen mode: ${err.message}`);
                });
            } else {
                document.exitFullscreen().then(() => {
                    setIsFullscreen(false);
                });
            }
        };

        const handlePdfLoad = () => {
            setIsLoading(false);
        };

        const preventContextMenu = (e) => e.preventDefault(); 

        const iframeUrl = useMemo(() => getEmbedUrl(pdfInfo.link, savedPage), [pdfInfo.link, savedPage, getEmbedUrl]); 
        
        return ( 
            <div className="overlay" onClick={onClose} onContextMenu={preventContextMenu}> 
                <div ref={viewerRef} className={`pdf-viewer-modal bg-slate-900 border border-slate-700 animate-popIn ${isFullscreen ? 'fixed inset-0 z-[2000]' : ''}`} onClick={e => e.stopPropagation()}> 
                    <div className="header flex-shrink-0"> 
                        <h3 className="truncate pr-4 text-white">{pdfInfo.title}</h3> 
                        <div className="flex items-center gap-2"> 
                            <form onSubmit={handleSaveProgress} className="hidden sm:flex items-center gap-2 relative"> 
                                <label htmlFor="page-input" className="text-sm text-slate-400">Bookmark Page:</label> 
                                <input id="page-input" type="number" value={progressPage} onChange={(e) => setProgressPage(e.target.value)} className="bg-slate-700 rounded-md px-2 py-1 w-20 text-center text-white placeholder-slate-400" placeholder="#" required /> 
                                <button type="submit" className="bg-indigo-600 hover:bg-indigo-700 text-white font-bold text-sm py-1 px-3 rounded-md">Save</button> 
                                {showSavedConfirmation && <div className="absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full shadow-lg animate-popIn">Saved!</div>} 
                            </form> 
                            <button onClick={handleFullscreen} title="Fullscreen" className="bg-white/10 hover:bg-white/20 text-white rounded-full w-8 h-8 flex items-center justify-center"> 
                                <i className="fas fa-expand"></i> 
                            </button> 
                            <button onClick={onClose} title="Close" className="close-button text-xl text-white">&times;</button> 
                        </div> 
                    </div> 
                    <div className="relative flex-grow bg-gray-800"> 
                        {isLoading && ( 
                            <div className="absolute inset-0 flex flex-col justify-center items-center text-white bg-gray-800/90 backdrop-blur-sm z-10 p-4 text-center"> 
                                <i className="fas fa-spinner fa-spin text-4xl mb-6"></i> 
                                <p className="font-bold text-lg">Loading HD Document...</p> 
                                {savedPage && <p className="text-sm text-gray-400 mt-2">Jumping to your bookmark on page {savedPage}...</p>} 
                                <div className="mt-8 bg-indigo-900/50 border border-indigo-500 rounded-lg p-4 max-w-md"> 
                                    <h4 className="font-semibold text-indigo-300 flex items-center justify-center gap-2"><i className="fas fa-info-circle"></i> Heads Up!</h4> 
                                    <p className="text-slate-300 text-sm mt-2"> To <strong>zoom</strong>, print, or go to a page, move your cursor to the <strong>top-right corner</strong> of the document viewer. A toolbar will appear. </p> 
                                </div> 
                            </div> 
                        )} 
                        <iframe 
                            src={iframeUrl} 
                            onLoad={handlePdfLoad}
                            className={`w-full h-full border-0 transition-opacity duration-500 ${isLoading ? 'opacity-0' : 'opacity-100'}`} 
                            title="HD PDF Viewer" 
                            sandbox="allow-scripts allow-same-origin allow-forms"
                        ></iframe> 
                    </div> 
                </div> 
            </div> 
        ); 
    };

    // Help Note Modal
    const HelpNoteModal = ({ onClose }) => {
        const [title, setTitle] = useState('');
        const [description, setDescription] = useState('');
        const [file, setFile] = useState(null);
        
        const handleSubmit = (e) => {
            e.preventDefault();
            if (!title.trim() || !description.trim()) {
                alert('Please fill in all fields');
                return;
            }
            
            const message = `*Help Note Submission*\n\n*Title:* ${title}\n*Description:* ${description}\n\nSubmitted via Ganesh Dai Academy`;
            const whatsappUrl = `https://wa.me/${DATA.whatsAppContactNumber}?text=${encodeURIComponent(message)}`;
            
            window.open(whatsappUrl, '_blank');
            onClose();
        };
        
        return (
            <div className="overlay">
                <div className="modal-box glassmorphism text-white relative max-w-md">
                    <button onClick={onClose} className="absolute top-4 right-4 text-white/50 hover:text-white text-2xl font-bold">&times;</button>
                    <h2 className="text-2xl font-bold mb-4">Submit Help Note</h2>
                    <form onSubmit={handleSubmit} className="space-y-4">
                        <div>
                            <label className="block text-sm font-medium mb-2">Title</label>
                            <input 
                                type="text" 
                                value={title}
                                onChange={(e) => setTitle(e.target.value)}
                                className="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/60 focus:ring-2 focus:ring-indigo-400 focus:outline-none"
                                placeholder="Enter note title"
                                required
                            />
                        </div>
                        <div>
                            <label className="block text-sm font-medium mb-2">Description</label>
                            <textarea 
                                value={description}
                                onChange={(e) => setDescription(e.target.value)}
                                className="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/60 focus:ring-2 focus:ring-indigo-400 focus:outline-none"
                                placeholder="Describe your note or question"
                                rows="4"
                                required
                            />
                        </div>
                        <div>
                            <label className="block text-sm font-medium mb-2">Upload PDF (Optional)</label>
                            <input 
                                type="file"
                                accept=".pdf"
                                onChange={(e) => setFile(e.target.files[0])}
                                className="w-full p-2 rounded-lg bg-white/10 border border-white/20 text-white file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-500 file:text-white hover:file:bg-indigo-600"
                            />
                        </div>
                        <button type="submit" className="w-full gradient-button text-white font-bold py-3 px-6 rounded-full">
                            <i className="fab fa-whatsapp mr-2"></i>Send via WhatsApp
                        </button>
                    </form>
                </div>
            </div>
        );
    };

    // Donut Chart Component
    const DonutChart = ({ percentage }) => {
        const size = 150; const strokeWidth = 15; const radius = (size - strokeWidth) / 2; const circumference = 2 * Math.PI * radius; const offset = circumference - (percentage / 100) * circumference;
        return (
            <div className="relative" style={{ width: size, height: size }}>
                <svg width={size} height={size} className="transform -rotate-90">
                    <circle className="text-slate-200 dark:text-slate-700" stroke="currentColor" strokeWidth={strokeWidth} fill="transparent" r={radius} cx={size / 2} cy={size / 2} />
                    <circle className="text-primary-500 text-green-500" stroke="currentColor" strokeWidth={strokeWidth} strokeDasharray={circumference} strokeDashoffset={offset} strokeLinecap="round" fill="transparent" r={radius} cx={size / 2} cy={size / 2} style={{ transition: 'stroke-dashoffset 0.5s ease-out' }} />
                </svg>
                <div className="absolute inset-0 flex items-center justify-center"> <span className="text-3xl font-bold text-slate-800 dark:text-white">{percentage}%</span> </div>
            </div>
        );
    };
    
    // Improved Quiz Component
    const SubjectMasteryComponent = () => {
        const [view, setView] = useState('subject_select');
        const [activeSubject, setActiveSubject] = useState(null);
        const [activeQuizData, setActiveQuizData] = useState(null);
        const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
        const [userAnswers, setUserAnswers] = useState([]);
        const [timer, setTimer] = useState(15);
        const [isTimeUp, setIsTimeUp] = useState(false);
        const timerRef = useRef(null);

        useEffect(() => {
            if (view === 'quiz') {
                timerRef.current = setInterval(() => {
                    setTimer(prev => {
                        if (prev === 1) {
                            clearInterval(timerRef.current);
                            setIsTimeUp(true);
                            setTimeout(() => {
                                handleNext(true);
                            }, 1500);
                            return 0;
                        }
                        return prev - 1;
                    });
                }, 1000);
            }
            return () => clearInterval(timerRef.current);
        }, [view, currentQuestionIndex]);
        
        const resetTimer = () => {
            clearInterval(timerRef.current);
            setTimer(15);
            setIsTimeUp(false);
        };
        
        const handleNext = (isTimeUp = false) => {
            resetTimer();
            if (currentQuestionIndex < activeQuizData.questions.length - 1) {
                setCurrentQuestionIndex(prev => prev + 1);
            } else {
                setView('results');
            }
        };

        const QuizResults = ({ quizData, userAnswers, onRestart, onSelectNew }) => {
            const { score, correctAnswers, wrongAnswers, percentage } = useMemo(() => {
                let correct = 0;
                quizData.questions.forEach((q, i) => { if (q.correctAnswer === userAnswers[i]) correct++; });
                const total = quizData.questions.length;
                return { score: correct, correctAnswers: correct, wrongAnswers: total - correct, percentage: total > 0 ? Math.round((correct / total) * 100) : 0 };
            }, [quizData, userAnswers]);
            
            useEffect(() => {
                const timer = setTimeout(() => {}, 100);
                return () => clearTimeout(timer);
            }, []);

            return (
                <div className="w-full max-w-4xl mx-auto animate-fadeIn">
                    <div className="bg-white dark:bg-slate-800 p-6 md:p-8 text-center rounded-lg shadow-lg transition-all duration-500 ease-in-out">
                        <h2 className="font-serif text-3xl font-bold text-slate-800 dark:text-white mb-2">Quiz Results</h2>
                        <p className="text-slate-500 dark:text-slate-400 mb-6">You completed the {quizData.title} quiz!</p>
                        <div className="my-8 flex flex-col md:flex-row items-center justify-center gap-8 transition-all duration-700">
                            <DonutChart percentage={percentage} />
                            <div className="flex gap-4 text-left animate-slideInUp">
                                <div className="bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800/50 p-4 flex-1 rounded-lg transition-transform hover:scale-105"> 
                                    <div className="font-bold text-3xl text-green-600 dark:text-green-400">{correctAnswers}</div> 
                                    <div className="text-sm font-semibold text-green-800 dark:text-green-300">Correct</div> 
                                </div>
                                <div className="bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800/50 p-4 flex-1 rounded-lg transition-transform hover:scale-105"> 
                                    <div className="font-bold text-3xl text-red-600 dark:text-red-400">{wrongAnswers}</div> 
                                    <div className="text-sm font-semibold text-red-800 dark:text-red-300">Incorrect</div> 
                                </div>
                                <div className="bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800/50 p-4 flex-1 rounded-lg transition-transform hover:scale-105"> 
                                    <div className="font-bold text-3xl text-blue-600 dark:text-blue-400">{score}/{quizData.questions.length}</div> 
                                    <div className="text-sm font-semibold text-blue-800 dark:text-blue-300">Score</div> 
                                </div>
                            </div>
                        </div>
                        <div className="flex flex-col md:flex-row gap-4 justify-center mt-8 animate-fadeIn" style={{animationDelay: '200ms'}}>
                            <button onClick={onRestart} className="gradient-button px-8 py-3 rounded-full font-semibold transition-transform hover:scale-105">
                                <i className="fa-solid fa-redo mr-2"></i>Play Again
                            </button>
                            <button onClick={onSelectNew} className="px-8 py-3 rounded-full font-semibold bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 transition hover:scale-105">
                                Choose Another Quiz
                            </button>
                        </div>
                    </div>
                    <div className="bg-white dark:bg-slate-800 p-6 md:p-8 mt-6 text-left rounded-lg shadow-lg animate-fadeIn" style={{animationDelay: '400ms'}}>
                        <h3 className="font-serif text-2xl font-bold text-slate-800 dark:text-white mb-4">Review Answers</h3>
                        <div className="space-y-6">
                            {quizData.questions.map((q, i) => {
                                const userAnswer = userAnswers[i];
                                const isCorrect = q.correctAnswer === userAnswer;
                                return (
                                    <div key={i} className="border-b border-slate-200 dark:border-slate-700 pb-4 animate-fadeIn" style={{animationDelay: `${i * 100}ms`}}>
                                        <p className="font-semibold text-slate-800 dark:text-white">{i + 1}. {q.question}</p>
                                        <p className={`mt-2 text-sm ${isCorrect ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}> 
                                            <i className={`fa-solid ${isCorrect ? 'fa-check-circle' : 'fa-times-circle'} mr-2`}></i> 
                                            Your answer: <span className="font-bold">{userAnswer || "Not answered"}</span> 
                                        </p>
                                        {!isCorrect && (
                                            <p className="mt-1 text-sm text-green-600 dark:text-green-400"> 
                                                <i className="fa-solid fa-check-circle mr-2"></i> 
                                                Correct answer: <span className="font-bold">{q.correctAnswer}</span> 
                                            </p>
                                        )}
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                </div>
            );
        };
        
        const startQuiz = (quizData) => { 
            setActiveQuizData(quizData); 
            setUserAnswers(Array(quizData.questions.length).fill(null)); 
            setCurrentQuestionIndex(0); 
            resetTimer(); 
            setView('quiz'); 
        };
        
        const generateMixedQuiz = (subject, numQuestions) => {
            const allQuestions = Object.values(DATA.quizzes[subject].chapters).flatMap(chapter => chapter.questions);
            for (let i = allQuestions.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [allQuestions[i], allQuestions[j]] = [allQuestions[j], allQuestions[i]]; }
            const selectedQuestions = allQuestions.slice(0, numQuestions);
            return { title: `Mixed ${subject} Quiz (${selectedQuestions.length} Qs)`, questions: selectedQuestions };
        };

        const handleAnswerSelect = (answer) => {
            if (userAnswers[currentQuestionIndex] !== null) return;
            const newAnswers = [...userAnswers];
            newAnswers[currentQuestionIndex] = answer;
            setUserAnswers(newAnswers);
        };

        if (view === 'results') { 
            return (
                <Section>
                    <QuizResults 
                        quizData={activeQuizData} 
                        userAnswers={userAnswers} 
                        onRestart={() => startQuiz(activeQuizData)} 
                        onSelectNew={() => setView('subject_select')} 
                    />
                </Section>
            ); 
        }
        
        if (view === 'quiz') {
            const currentQuestion = activeQuizData.questions[currentQuestionIndex];
            const timerColor = timer > 10 ? 'text-green-500' : timer > 5 ? 'text-yellow-500' : 'text-red-500';
            return (
                <Section>
                    <div className="w-full max-w-3xl mx-auto bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl shadow-2xl animate-popIn relative overflow-hidden">
                        {isTimeUp && (
                            <div className="absolute inset-0 bg-red-800/80 backdrop-blur-sm flex flex-col justify-center items-center z-20 animate-popIn">
                                <i className="far fa-clock text-7xl text-white animate-tada"></i>
                                <h2 className="text-5xl font-extrabold text-white mt-4">Time's Up!</h2>
                            </div>
                        )}
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="font-serif text-xl font-bold text-slate-800 dark:text-white">{activeQuizData.title}</h2>
                            <div className="flex items-center gap-4">
                                <div className={`flex items-center gap-2 font-bold text-lg ${timerColor} animate-pulse`}>
                                    <i className="far fa-clock"></i>
                                    <span>{timer}s</span>
                                </div>
                                <span className="font-semibold text-slate-500 dark:text-slate-400">{currentQuestionIndex + 1} / {activeQuizData.questions.length}</span>
                            </div>
                        </div>
                        <div className="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5 mb-6"> 
                            <div 
                                className="bg-indigo-600 h-2.5 rounded-full transition-all duration-300 ease-out" 
                                style={{ width: `${((currentQuestionIndex + 1) / activeQuizData.questions.length) * 100}%` }}
                            ></div> 
                        </div>
                        <h3 className="text-xl md:text-2xl font-semibold text-slate-900 dark:text-white mb-8 text-center min-h-[6rem] flex items-center justify-center animate-fadeIn">
                            {currentQuestion.question}
                        </h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {currentQuestion.options.map(option => {
                                const isSelected = userAnswers[currentQuestionIndex] === option;
                                
                                let buttonClass = 'p-4 rounded-lg text-left font-semibold border-2 transition-all duration-300 ';
                                if(isSelected) {
                                   buttonClass += 'bg-indigo-500 border-indigo-500 text-white shadow-lg transform scale-105';
                                } else {
                                   buttonClass += 'bg-slate-100 dark:bg-slate-900/50 border-transparent hover:border-indigo-400 dark:hover:border-indigo-500 hover:scale-105';
                                }
                                return (
                                    <button 
                                        key={option} 
                                        onClick={() => handleAnswerSelect(option)} 
                                        disabled={userAnswers[currentQuestionIndex] !== null}
                                        className={buttonClass}
                                    >
                                        {option}
                                    </button>
                                );
                            })}
                        </div>
                        <div className="mt-8 text-right">
                             <button 
                                onClick={() => handleNext()} 
                                disabled={userAnswers[currentQuestionIndex] === null}
                                className="gradient-button px-10 py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:scale-105"
                            >
                                {currentQuestionIndex < activeQuizData.questions.length - 1 ? 'Next' : 'Finish'} 
                                <i className="fa-solid fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>
                </Section>
            );
        }

        if (view === 'quiz_config') {
            const questionOptions = [10, 20, 30, 50];
            return (
                <Section title={`Configure Mixed ${activeSubject} Quiz`} subtitle="How many questions would you like?">
                    <div className="max-w-xl mx-auto text-center">
                        <div className="bg-white dark:bg-slate-800 p-6 grid grid-cols-2 gap-4 rounded-lg shadow-lg">
                            {questionOptions.map(num => (
                                <button 
                                    key={num} 
                                    onClick={() => startQuiz(generateMixedQuiz(activeSubject, num))} 
                                    className="gradient-button text-xl font-bold p-6 rounded-xl shadow-lg hover:shadow-2xl transition-all hover:scale-105"
                                >
                                    {num}
                                    <span className="block text-sm font-semibold opacity-80">Questions</span>
                                </button>
                            ))}
                        </div>
                        <button onClick={() => setView('chapter_select')} className="mt-8 text-sm font-semibold text-slate-500 hover:text-indigo-500 transition-colors">
                            <i className="fa-solid fa-arrow-left mr-2"></i>Back to Chapters 
                        </button>
                    </div>
                </Section>
            );
        }

        if (view === 'chapter_select') {
            const subjectData = DATA.quizzes[activeSubject];
            return (
                <Section title={`${activeSubject} Quizzes`} subtitle="Choose a chapter or try a mix of all chapters.">
                    <div className="max-w-2xl mx-auto">
                        <button 
                            onClick={() => setView('quiz_config')} 
                            className="w-full gradient-button text-lg font-semibold p-6 rounded-xl mb-6 shadow-lg hover:shadow-2xl transition-all hover:scale-105 text-left flex justify-between items-center"
                        >
                            <span><i className="fa-solid fa-random mr-3"></i>Mixed Chapter Quiz</span> 
                            <i className="fa-solid fa-arrow-right"></i> 
                        </button>
                        <div className="bg-white dark:bg-slate-800 p-6 space-y-3 rounded-lg shadow-lg">
                            {Object.entries(subjectData.chapters).map(([chapterTitle, chapterData]) => (
                                <button 
                                    key={chapterTitle} 
                                    onClick={() => startQuiz({ title: chapterTitle, questions: chapterData.questions })} 
                                    className="w-full text-left p-4 rounded-lg font-medium bg-slate-100 dark:bg-slate-900/50 hover:bg-slate-200 dark:hover:bg-slate-700 transition-all hover:scale-105 flex justify-between items-center"
                                >
                                    <span>{chapterTitle}</span> 
                                    <span className="text-xs font-semibold text-slate-500">{chapterData.questions.length} Questions</span> 
                                </button>
                            ))}
                        </div>
                        <button onClick={() => setView('subject_select')} className="mt-8 text-sm font-semibold text-slate-500 hover:text-indigo-500 transition-colors">
                            <i className="fa-solid fa-arrow-left mr-2"></i>Back to Subjects 
                        </button>
                    </div>
                </Section>
            );
        }

        return (
            <Section title="Subject Mastery" subtitle="Select a subject to test your knowledge and improve your skills.">
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {Object.entries(DATA.quizzes).map(([subject, quizMeta]) => (
                        <div key={subject} className="bg-white dark:bg-slate-800 p-6 text-center rounded-2xl shadow-lg animate-slideInUp card-hover flex flex-col transition-all hover:scale-105">
                            <div className="h-20 w-20 mx-auto rounded-full bg-gradient-to-br from-indigo-200 to-purple-200 dark:from-indigo-900/40 dark:to-purple-900/40 grid place-items-center text-indigo-500 text-4xl mb-4"> 
                                <i className={quizMeta.icon}></i> 
                            </div>
                            <h3 className="font-serif text-2xl font-bold text-slate-800 dark:text-white">{subject}</h3>
                            <p className="text-slate-500 dark:text-slate-400 mt-1 mb-6 flex-grow">{quizMeta.title}</p>
                            <button 
                                onClick={() => { setActiveSubject(subject); setView('chapter_select'); }} 
                                className="gradient-button w-full px-6 py-3 rounded-lg font-semibold mt-auto transition-transform hover:scale-105"
                            >
                                Start Quiz 
                            </button>
                        </div>
                    ))}
                </div>
            </Section>
        );
    };

    // =================================================================================
    // ===== MODALS & POPUPS =====
    // =================================================================================
   const PaymentModal = ({ onPaymentSuccess, onClose, userName, stream }) => {
    const [premiumCode, setPremiumCode] = useState('');
    const [isLoading, setIsLoading] = useState(false);
    const [error, setError] = useState('');
    
    const generatePassword = (name) => {
        if (!name || name.length < 3) return '';
        
        const thirdLetter = name[2].toLowerCase();
        const nextLetter = String.fromCharCode(thirdLetter.charCodeAt(0) + 1);
        
        return `${name}@1234${thirdLetter}${nextLetter}`;
    };
    
    const handleVerify = (e) => {
        e.preventDefault(); 
        setError(''); 
        const expectedPassword = generatePassword(userName);
        
        if (premiumCode === expectedPassword) {
            setIsLoading(true); 
            setTimeout(() => { 
                setIsLoading(false); 
                onPaymentSuccess(); 
            }, 1500);
        } else { 
            setError('Invalid Premium Code. Please check and try again.'); 
        }
    };
    
    const whatsappMessage = `Hello! I have sent Rs.99 via eSewa for premium access. My name is ${userName}. Please provide my activation code.`;
    const whatsappLink = `https://wa.me/9779826594548?text=${encodeURIComponent(whatsappMessage)}`;
    
    return (
        <div className="overlay fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4">
            <div className="modal-box bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white border-2 border-purple-500/30 rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto">
                {/* Header */}
                <div className="p-6 bg-gradient-to-r from-purple-600 to-pink-600 rounded-t-2xl relative overflow-hidden">
                    <div className="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16"></div>
                    <div className="absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-12 -translate-x-12"></div>
                    
                    <div className="relative z-10 text-center">
                        <div className="w-16 h-16 mx-auto mb-3 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm">
                            <i className="fas fa-crown text-2xl text-yellow-300"></i>
                        </div>
                        <h2 className="text-2xl font-bold font-display drop-shadow-lg">Premium Access</h2>
                        <p className="text-white/90 mt-1 text-sm">Unlock Exclusive Content & Features</p>
                    </div>
                </div>

                {/* Content */}
                <div className="p-6 text-left space-y-6">
                    {/* Payment Step */}
                    <div className="bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10">
                        <div className="flex items-center gap-3 mb-3">
                            <div className="w-7 h-7 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center text-white font-bold text-xs">1</div>
                            <span className="text-base font-bold bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent">Make Payment</span>
                        </div>
                        <p className="text-white/80 mb-2 text-sm">Send <span className="font-bold text-white text-lg">Rs. 99</span> to eSewa ID:</p>
                        <div className="bg-black/30 border-2 border-emerald-500/50 p-3 rounded-xl text-center group hover:border-emerald-400 transition-all duration-300">
                            <div className="text-lg font-mono font-bold tracking-wider bg-gradient-to-r from-emerald-300 to-green-300 bg-clip-text text-transparent break-all">
                                {DATA.esewaId}
                            </div>
                            <div className="flex items-center justify-center gap-1 mt-1 text-emerald-300 text-xs">
                                <i className="fas fa-copy"></i>
                                <span>Click to copy</span>
                            </div>
                        </div>
                    </div>

                    {/* Activation Step */}
                    <div className="bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10">
                        <div className="flex items-center gap-3 mb-3">
                            <div className="w-7 h-7 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full flex items-center justify-center text-white font-bold text-xs">2</div>
                            <span className="text-base font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent">Get Activation Code</span>
                        </div>
                        <p className="text-white/80 mb-3 text-sm">Contact us on WhatsApp after payment to receive your unique activation code</p>
                        
                        <a 
                            href={whatsappLink} 
                            target="_blank" 
                            rel="noopener noreferrer" 
                            className="w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold py-3 px-4 rounded-xl text-base transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center gap-2 mb-4 group"
                        >
                            <i className="fab fa-whatsapp text-xl group-hover:scale-110 transition-transform"></i>
                            <span>Contact on WhatsApp</span>
                            <i className="fas fa-external-link-alt text-xs opacity-70"></i>
                        </a>

                        <form onSubmit={handleVerify} className="space-y-3">
                            <div className="relative">
                                <input 
                                    type="text" 
                                    value={premiumCode} 
                                    onChange={(e) => setPremiumCode(e.target.value)} 
                                    placeholder="Enter your activation code here..." 
                                    className="w-full p-3 bg-black/30 border-2 border-purple-500/30 rounded-xl text-white placeholder-white/50 focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 focus:outline-none transition-all duration-300 text-base"
                                    required 
                                />
                                <i className="fas fa-key absolute right-3 top-1/2 transform -translate-y-1/2 text-purple-400 text-sm"></i>
                            </div>
                            
                            {error && (
                                <div className="bg-red-500/20 border border-red-500/50 rounded-xl p-2 flex items-center gap-2">
                                    <i className="fas fa-exclamation-triangle text-red-400 text-sm"></i>
                                    <p className="text-red-300 text-xs">{error}</p>
                                </div>
                            )}
                            
                            <button 
                                type="submit" 
                                disabled={isLoading}
                                className="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 font-bold py-3 px-4 rounded-xl text-base transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg flex items-center justify-center gap-2"
                            >
                                {isLoading ? (
                                    <>
                                        <i className="fas fa-spinner fa-spin text-sm"></i>
                                        <span>Activating Premium...</span>
                                    </>
                                ) : (
                                    <>
                                        <i className="fas fa-gem text-sm"></i>
                                        <span>Activate Premium</span>
                                    </>
                                )}
                            </button>
                        </form>
                    </div>

                    {/* Maybe Later Button - At the bottom */}
                    <button 
                        onClick={onClose} 
                        className="w-full text-white/60 hover:text-white py-2 text-base transition-all duration-300 hover:bg-white/5 rounded-xl flex items-center justify-center gap-2 border border-white/10 hover:border-white/20"
                    >
                        <i className="fas fa-clock text-sm"></i>
                        <span>Maybe Later</span>
                    </button>
                </div>
            </div>
        </div>
    );
};
    const PresentationRequestModal = ({ user, onClose }) => {
        const [formData, setFormData] = useState({ subject: '', topic: '', specifics: '' });
        
        const handleSendRequest = () => {
            const message = `*Presentation Request*\n\n*Name:* ${user.name}\n*Grade:* ${user.grade}\n*Stream:* ${user.stream}\n\n*Subject:* ${formData.subject}\n*Topic:* ${formData.topic}\n\n*Specific Points to Cover:*\n${formData.specifics || 'N/A'}\n\n---\n_Sent from Ganesh Dai Academy_`;
            const whatsappUrl = `https://wa.me/${DATA.presentationRequestNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
            onClose();
        };
        
        return (
            <div className="overlay">
                <div className="modal-box bg-white dark:bg-slate-900">
                    <div className="p-8 text-left">
                        <h2 className="text-2xl font-bold font-display">Request a Presentation</h2>
                        <p className="text-slate-500 dark:text-slate-400 mt-1 mb-6">Need a presentation on a specific topic? Fill out the form below.</p>
                        <div className="space-y-4">
                            <input 
                                type="text" 
                                placeholder="Subject (e.g., Physics)" 
                                value={formData.subject} 
                                onChange={e => setFormData({...formData, subject: e.target.value})} 
                                className="w-full p-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 rounded-md" 
                            />
                            <input 
                                type="text" 
                                placeholder="Topic (e.g., Projectile Motion)" 
                                value={formData.topic} 
                                onChange={e => setFormData({...formData, topic: e.target.value})} 
                                className="w-full p-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 rounded-md" 
                            />
                            <textarea 
                                placeholder="Specific points or questions to cover..." 
                                value={formData.specifics} 
                                onChange={e => setFormData({...formData, specifics: e.target.value})} 
                                rows="3" 
                                className="w-full p-3 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 rounded-md"
                            ></textarea>
                        </div>
                        <div className="flex gap-4 mt-6">
                            <button onClick={onClose} className="w-full py-3 rounded-full bg-slate-200 dark:bg-slate-700 font-bold touch-target">Cancel</button>
                            <button onClick={handleSendRequest} className="w-full gradient-button font-bold py-3 rounded-full flex items-center justify-center gap-2 touch-target">
                                <i className="fab fa-whatsapp"></i> Send Request
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        );
    };
    
    // =================================================================================
    // ===== CELEBRATION & CERTIFICATE =====
    // =================================================================================
    const WelcomeCelebration = ({ name }) => {
        useEffect(() => {
            const confettiElements = document.querySelectorAll('.confetti');
            confettiElements.forEach((confetti, index) => {
                const left = Math.random() * 100;
                const animationDuration = 1 + Math.random() * 2;
                const animationDelay = Math.random() * 2;
                
                confetti.style.left = `${left}%`;
                confetti.style.animation = `confettiRain ${animationDuration}s ease-out ${animationDelay}s forwards`;
            });
        }, []);
        
        return (
            <div className="overlay overflow-hidden animated-gradient-bg">
                <div className="text-center text-white relative z-10">
                    <h1 className="text-5xl md:text-7xl font-display font-bold" style={{ animation: `slideInDown .8s ease-out`}}>Welcome, {name}!</h1>
                    <p className="mt-4 text-xl" style={{ animation: `fadeIn 1s .5s ease-out backwards` }}>We're so glad you're here.</p>
                </div>
                {Array.from({length: 10}).map((_, i) => (
                    <div key={i} className="confetti"></div>
                ))}
            </div>
        );
    };

    const CertificateModal = ({ name, onContinue }) => { 
    const certificateRef = useRef(null); 
    const [downloading, setDownloading] = useState(false); 
    
    const handleDownload = async () => { 
        if (certificateRef.current && !downloading && window.html2canvas) { 
            setDownloading(true); 
            try { 
                const canvas = await html2canvas(certificateRef.current, { 
                    scale: 2, 
                    useCORS: true, 
                    backgroundColor: '#fdfdfd',
                    logging: false
                }); 
                const link = document.createElement('a'); 
                link.href = canvas.toDataURL('image/png'); 
                link.download = `Ganesh_Dai_Academy_Certificate_${name}.png`; 
                document.body.appendChild(link);
                link.click(); 
                document.body.removeChild(link);
            } catch (error) { 
                console.error("Download failed:", error); 
                alert("Download failed. Please try again.");
            } finally { 
                setDownloading(false); 
            } 
        } else if (!window.html2canvas) {
            alert("Download feature is not available right now. Please try again later.");
        }
    }; 
    
    return (
        <div className="overlay">
            <div className="w-full max-w-4xl bg-white dark:bg-slate-900 rounded-xl max-h-[90vh] flex flex-col slide-in-up" onClick={e=>e.stopPropagation()}>
                <div className="p-4 sm:p-6 overflow-y-auto">
                    <div ref={certificateRef} id="certificate" className="text-slate-800 bg-white p-8 rounded-lg">
                        <div className="text-center border-4 border-gold-500 p-8 bg-gradient-to-b from-white to-amber-50">
                            <img src={DATA.logoUrl} className="w-24 h-24 mx-auto mb-4 rounded-full border-4 border-amber-400" alt="Academy Logo"/>
                            <h1 className="font-serif text-4xl text-amber-600 mb-6">Certificate of Membership</h1>
                            <div className="my-8 border-t-2 border-b-2 border-amber-300 py-6">
                                <p className="text-lg text-slate-600 mb-4">This certificate is proudly presented to</p>
                                <p className="font-handwriting text-6xl font-bold text-slate-800 my-6" style={{color: '#1f2937'}}>
                                    {name}
                                </p>
                                <p className="text-lg text-slate-600 max-w-2xl mx-auto">
                                    for joining the Ganesh Dai Academy. We wish you the very best for your 
                                    academic journey and future endeavors.
                                </p>
                            </div>
                            <div className="mt-8 flex justify-between items-end">
                                <div className="text-left">
                                    <div className="border-t-2 border-slate-400 pt-2">
                                        <p className="font-semibold" style={{color: '#1f2937'}}>{new Date().toLocaleDateString('en-CA')}</p>
                                        <p className="text-sm text-slate-500">Date</p>
                                    </div>
                                </div>
                                <div className="text-center">
                                    <div className="mb-2">
                                        <img src={DATA.logoUrl} className="w-16 h-16 mx-auto rounded-full" alt="Signature"/>
                                    </div>
                                    <div className="border-t-2 border-slate-400 pt-2">
                                        <p className="font-handwriting text-2xl text-amber-600">Ganesh Dahal</p>
                                        <p className="text-sm text-slate-500">Founder, Ganesh Dai Academy</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div className="flex flex-col sm:flex-row gap-3 p-4 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 rounded-b-xl">
                    <button 
                        onClick={handleDownload} 
                        disabled={downloading}
                        className="flex-1 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center transition-all disabled:opacity-70 disabled:cursor-not-allowed touch-target shadow-lg"
                    >
                        {downloading ? (
                            <>
                                <i className="fa-solid fa-spinner spinner mr-2"></i> 
                                Downloading...
                            </>
                        ) : (
                            <>
                                <i className="fa-solid fa-download mr-2"></i>
                                Download Certificate
                            </>
                        )}
                    </button>
                    <button 
                        onClick={onContinue} 
                        className="flex-1 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center transition-all touch-target shadow-lg"
                    >
                        Continue to Academy 
                        <i className="fa-solid fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </div>
    ); 
};
    
    // =================================================================================
    // ===== ONBOARDING =====
    // =================================================================================
    const WelcomeScreen = ({ onSetupComplete }) => {
        const [step, setStep] = useState(1);
        const [userData, setUserData] = useState({ name: '', stream: '', grade: '', optionals: [] });
        const selectedStreamData = DATA.streams.find(s => s.id === userData.stream);
        
        const handleOptionalSelect = (subject, max) => {
             if (max === 1) { 
                 setUserData(prev => ({ ...prev, optionals: [subject] })); 
             } else { 
                 const newOptionals = userData.optionals.includes(subject) 
                     ? userData.optionals.filter(s => s !== subject) 
                     : [...userData.optionals, subject]; 
                 if (newOptionals.length <= max) { 
                     setUserData(prev => ({ ...prev, optionals: newOptionals })); 
                 } 
             }
        };

        const handleSubmit = (e) => {
            e.preventDefault();
            if(step === 1 && userData.name && userData.stream && userData.grade) { 
                setStep(2); 
            } else if (step === 2) { 
                onSetupComplete(userData.name, userData.stream, userData.grade, userData.optionals); 
            }
        };
        
        return (
            <div className="min-h-screen w-full flex items-center justify-center p-4 bg-slate-900 bg-cover bg-center" style={{backgroundImage: "linear-gradient(rgba(2,6,23,0.8), rgba(2,6,23,0.8)), url('https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?q=80&w=2070&auto=format&fit=crop')"}}>
                <div className="w-full max-w-md bg-slate-800/50 backdrop-blur-md rounded-2xl p-8 shadow-2xl animate-popIn">
                    <div className="text-center mb-8">
                        <img src={DATA.logoUrl} alt="Logo" className="h-20 w-20 mx-auto rounded-full" />
                        <h1 className="text-4xl font-bold text-white mt-4 font-display">Welcome to {DATA.appName}</h1>
                        <p className="text-slate-300 mt-2">Your +2 academic command center.</p>
                    </div>
                    <form onSubmit={handleSubmit}>
                        {step === 1 ? (
                            <div className="space-y-4 animate-fadeIn">
                                <input 
                                    type="text" 
                                    value={userData.name} 
                                    onChange={(e) => setUserData(p => ({...p, name: e.target.value}))} 
                                    placeholder="Enter Your Name" 
                                    className="w-full px-4 py-3 rounded-lg border-0 bg-slate-900/50 text-white placeholder-slate-400 focus:ring-2 focus:ring-teal-400" 
                                    required 
                                />
                                <select 
                                    value={userData.grade} 
                                    onChange={(e) => setUserData(p => ({...p, grade: e.target.value}))} 
                                    className="w-full px-4 py-3 rounded-lg border-0 bg-slate-900/50 text-white" 
                                    required
                                >
                                    <option value="" disabled>Select Your Grade</option>
                                    <option value="11">Grade 11</option>
                                    <option value="12">Grade 12</option>
                                </select>
                                <select 
                                    value={userData.stream} 
                                    onChange={(e) => setUserData(p => ({...p, stream: e.target.value, optionals: []}))} 
                                    className="w-full px-4 py-3 rounded-lg border-0 bg-slate-900/50 text-white" 
                                    required
                                >
                                    <option value="" disabled>Select Your Stream</option>
                                    {DATA.streams.map(s => (
                                        <option key={s.id} value={s.id}>{s.name}</option>
                                    ))}
                                </select>
                                <button 
                                    type="submit" 
                                    className="w-full gradient-button font-bold py-3 rounded-full text-lg mt-4 touch-target" 
                                    disabled={!userData.stream}
                                >
                                    Next <i className="fas fa-arrow-right ml-2"></i>
                                </button>
                            </div>
                        ) : (
                            <div className="space-y-4 animate-fadeIn">
                                <h3 className="text-white font-bold text-lg">Select Your Optional Subjects</h3>
                                {selectedStreamData && selectedStreamData.optional.flat().map(sub => (
                                    <label 
                                        key={sub} 
                                        className={`flex items-center p-3 rounded-lg border-2 ${userData.optionals.includes(sub) 
                                            ? 'bg-teal-500/30 border-teal-400' 
                                            : 'bg-slate-900/50 border-slate-700'}`}
                                    >
                                        <input 
                                            type={selectedStreamData.optional_count === 1 ? 'radio' : 'checkbox'} 
                                            name="optional" 
                                            checked={userData.optionals.includes(sub)} 
                                            onChange={() => handleOptionalSelect(sub, selectedStreamData.optional_count)} 
                                            className="h-4 w-4 text-teal-500 bg-slate-800 border-slate-600 focus:ring-teal-500" 
                                        />
                                        <span className="ml-3 text-white">{sub}</span>
                                    </label>
                                ))}
                                <button 
                                    type="submit" 
                                    className="w-full gradient-button font-bold py-3 rounded-full text-lg mt-4 touch-target" 
                                    disabled={userData.optionals.length === 0 || userData.optionals.length > selectedStreamData.optional_count}
                                >
                                    Start Studying
                                </button>
                            </div>
                        )}
                    </form>
                </div>
            </div>
        );
    };
    
    // =================================================================================
    // ===== PAGE SECTIONS & COMPONENTS =====
    // =================================================================================
    const NoteCard = ({ note, isBookmarked, onBookmark, onView, isPremiumUser, onGoPremium }) => {
        const subjectColor = DATA.subjectData[note.subject]?.color || 'from-slate-500 to-slate-700';
        
        return (
            <div 
                onClick={() => (note.isPremium && !isPremiumUser) ? onGoPremium() : onView(note)} 
                className={`p-5 rounded-xl shadow-lg hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 cursor-pointer flex flex-col justify-between text-white relative overflow-hidden bg-gradient-to-br ${subjectColor}`}
            >
                <div className="absolute inset-0 bg-black/30"></div>
                <div className="relative z-10">
                    <div className="flex justify-between items-start">
                        <h4 className="font-bold text-lg pr-2">{note.title}</h4>
                        <button 
                            onClick={(e) => { e.stopPropagation(); onBookmark(note.id); }} 
                            className={`flex-shrink-0 text-2xl touch-target ${isBookmarked ? 'text-teal-300' : 'text-white/50 hover:text-white'}`}
                        >
                            <i className={`${isBookmarked ? 'fas' : 'far'} fa-bookmark`}></i>
                        </button>
                    </div>
                    <p className="text-sm text-white/70 mt-1">Grade {note.grade} &bull; {note.subject}</p>
                </div>
                <div className="mt-4 flex justify-between items-center relative z-10">
                    {note.isPremium && (
                        <span className="flex items-center gap-2 text-xs font-bold text-amber-300 uppercase">
                            <i className="fas fa-star"></i>Premium
                        </span>
                    )}
                    <div className={`${!note.isPremium ? 'invisible' : ''}`}></div>
                    <i className={`fas ${note.isPremium && !isPremiumUser ? 'fa-lock' : 'fa-arrow-right'} text-white/50`}></i>
                </div>
            </div>
        );
    };
    
const Dashboard = ({ user, setActiveSection, lastViewedNote, onGradeChange }) => {
    const streamInfo = DATA.streams.find(s => s.id === user.stream);
    const quote = DATA.motivationalQuotes[new Date().getDate() % DATA.motivationalQuotes.length];
    
    // Get user's subjects and recent notes
    const userSubjects = [...(streamInfo?.compulsory || []), ...(user.optionals || [])];
    const recentNotes = DATA.notes[user.grade]?.filter(note => 
        userSubjects.includes(note.subject)
    )?.slice(0, 3) || [];

    // Calculate stats
    const totalNotes = DATA.notes[user.grade]?.filter(note => 
        userSubjects.includes(note.subject)
    )?.length || 0;

    const today = new Date();
    const greetings = ["Rise and shine!", "Hello there!", "Welcome back!", "Great to see you!", "Let's learn!"];
    const greeting = greetings[today.getHours() % greetings.length];

    return (
        <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-cyan-50 dark:from-slate-900 dark:via-blue-900/20 dark:to-cyan-900/20">
            {/* Decorative Background Elements */}
            <div className="absolute top-0 left-0 w-72 h-72 bg-teal-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob"></div>
            <div className="absolute top-0 right-0 w-72 h-72 bg-yellow-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-2000"></div>
            <div className="absolute -bottom-8 left-20 w-72 h-72 bg-pink-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-4000"></div>

            <div className="relative z-10">
                {/* Main Header */}
                <div className="pt-8 pb-4 px-4">
                    <div className="max-w-7xl mx-auto">
                        {/* Welcome Section */}
                        <div className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-white/20 dark:border-slate-700/50 mb-8 relative overflow-hidden">
                            {/* Animated background pattern */}
                            <div className="absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-teal-500/10 to-cyan-500/10 rounded-full -translate-y-32 translate-x-32"></div>
                            <div className="absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-amber-500/10 to-orange-500/10 rounded-full translate-y-24 -translate-x-24"></div>
                            
                            <div className="relative z-10">
                                <div className="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6">
                                    <div className="flex-1">
                                        <div className="flex items-center gap-4 mb-4">
                                            <div className="relative">
                                                <div className="w-20 h-20 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-2xl flex items-center justify-center shadow-lg">
                                                    <i className="fas fa-user-graduate text-2xl text-white"></i>
                                                </div>
                                                <div className="absolute -bottom-2 -right-2 w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center border-4 border-white dark:border-slate-800">
                                                    <i className="fas fa-star text-xs text-white"></i>
                                                </div>
                                            </div>
                                            <div>
                                                <p className="text-teal-600 dark:text-teal-400 font-semibold mb-1">{greeting}</p>
                                                <h1 className="text-4xl font-bold text-slate-800 dark:text-white font-display">
                                                    Hello, {user.name}! 
                                                </h1>
                                                <p className="text-slate-600 dark:text-slate-400 text-lg mt-1">
                                                    Ready to conquer your <span className="font-semibold text-teal-600 dark:text-teal-400">{streamInfo?.name}</span> studies today?
                                                </p>
                                            </div>
                                        </div>

                                        {/* Quick Stats */}
                                        <div className="flex flex-wrap gap-3 mt-6">
                                            <div className="flex items-center gap-2 bg-teal-500/10 dark:bg-teal-500/20 px-4 py-2 rounded-xl border border-teal-500/20">
                                                <i className="fas fa-book text-teal-600 dark:text-teal-400"></i>
                                                <span className="text-sm font-medium text-slate-700 dark:text-slate-300">{totalNotes} study notes</span>
                                            </div>
                                            <div className="flex items-center gap-2 bg-blue-500/10 dark:bg-blue-500/20 px-4 py-2 rounded-xl border border-blue-500/20">
                                                <i className="fas fa-graduation-cap text-blue-600 dark:text-blue-400"></i>
                                                <span className="text-sm font-medium text-slate-700 dark:text-slate-300">Grade {user.grade}</span>
                                            </div>
                                            <div className="flex items-center gap-2 bg-amber-500/10 dark:bg-amber-500/20 px-4 py-2 rounded-xl border border-amber-500/20">
                                                <i className="fas fa-subscript text-amber-600 dark:text-amber-400"></i>
                                                <span className="text-sm font-medium text-slate-700 dark:text-slate-300">{user.optionals?.length || 0} subjects</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="flex flex-col items-end gap-3">
                                        <div className="bg-gradient-to-br from-slate-800 to-slate-900 dark:from-slate-700 dark:to-slate-800 p-4 rounded-2xl shadow-lg">
                                            <p className="text-white/80 text-sm mb-2">Current Grade</p>
                                            <select 
                                                value={user.grade} 
                                                onChange={(e) => onGradeChange(e.target.value)} 
                                                className="bg-white/10 backdrop-blur-sm text-white border border-white/20 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-white/50 min-w-[140px]"
                                            >
                                                <option value="11">Grade 11</option>
                                                <option value="12">Grade 12</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Main Actions Grid */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                            {/* Explore Notes */}
                            <div 
                                onClick={() => setActiveSection({name: 'explorer'})}
                                className="group cursor-pointer transform hover:scale-105 transition-all duration-300"
                            >
                                <div className="bg-gradient-to-br from-teal-500 to-cyan-600 rounded-2xl p-1 shadow-2xl">
                                    <div className="bg-white dark:bg-slate-800 rounded-xl p-6 h-full group-hover:bg-transparent group-hover:backdrop-blur-sm transition-all duration-300">
                                        <div className="flex items-center gap-4 mb-4">
                                            <div className="w-14 h-14 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg">
                                                <i className="fas fa-compass text-xl text-white"></i>
                                            </div>
                                            <div>
                                                <h3 className="font-bold text-lg text-slate-800 dark:text-white group-hover:text-white transition-colors">Explore Notes</h3>
                                                <p className="text-slate-600 dark:text-slate-400 group-hover:text-white/80 text-sm">Browse all study materials</p>
                                            </div>
                                        </div>
                                        <div className="flex justify-between items-center">
                                            <span className="text-teal-600 dark:text-teal-400 group-hover:text-white text-sm font-semibold">Get Started →</span>
                                            <div className="w-8 h-8 bg-teal-500/20 rounded-full flex items-center justify-center group-hover:bg-white/20">
                                                <i className="fas fa-arrow-right text-teal-600 dark:text-teal-400 group-hover:text-white text-sm"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Digital Library */}
                            <div 
                                onClick={() => setActiveSection({name: 'library'})}
                                className="group cursor-pointer transform hover:scale-105 transition-all duration-300"
                            >
                                <div className="bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl p-1 shadow-2xl">
                                    <div className="bg-white dark:bg-slate-800 rounded-xl p-6 h-full group-hover:bg-transparent group-hover:backdrop-blur-sm transition-all duration-300">
                                        <div className="flex items-center gap-4 mb-4">
                                            <div className="w-14 h-14 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg">
                                                <i className="fas fa-book-open text-xl text-white"></i>
                                            </div>
                                            <div>
                                                <h3 className="font-bold text-lg text-slate-800 dark:text-white group-hover:text-white transition-colors">Digital Library</h3>
                                                <p className="text-slate-600 dark:text-slate-400 group-hover:text-white/80 text-sm">Reference books & resources</p>
                                            </div>
                                        </div>
                                        <div className="flex justify-between items-center">
                                            <span className="text-blue-600 dark:text-blue-400 group-hover:text-white text-sm font-semibold">Explore Now →</span>
                                            <div className="w-8 h-8 bg-blue-500/20 rounded-full flex items-center justify-center group-hover:bg-white/20">
                                                <i className="fas fa-arrow-right text-blue-600 dark:text-blue-400 group-hover:text-white text-sm"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Exam Prep */}
                            <div 
                                onClick={() => setActiveSection({name: 'examprep'})}
                                className="group cursor-pointer transform hover:scale-105 transition-all duration-300"
                            >
                                <div className="bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-1 shadow-2xl">
                                    <div className="bg-white dark:bg-slate-800 rounded-xl p-6 h-full group-hover:bg-transparent group-hover:backdrop-blur-sm transition-all duration-300">
                                        <div className="flex items-center gap-4 mb-4">
                                            <div className="w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg">
                                                <i className="fas fa-feather-alt text-xl text-white"></i>
                                            </div>
                                            <div>
                                                <h3 className="font-bold text-lg text-slate-800 dark:text-white group-hover:text-white transition-colors">Exam Prep</h3>
                                                <p className="text-slate-600 dark:text-slate-400 group-hover:text-white/80 text-sm">Quizzes & model questions</p>
                                            </div>
                                        </div>
                                        <div className="flex justify-between items-center">
                                            <span className="text-purple-600 dark:text-purple-400 group-hover:text-white text-sm font-semibold">Practice Now →</span>
                                            <div className="w-8 h-8 bg-purple-500/20 rounded-full flex items-center justify-center group-hover:bg-white/20">
                                                <i className="fas fa-arrow-right text-purple-600 dark:text-purple-400 group-hover:text-white text-sm"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Bottom Section */}
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            {/* Recent Activity & Quick Access */}
                            <div className="space-y-6">
                                <div className="bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-xl border border-slate-200 dark:border-slate-700">
                                    <div className="flex items-center justify-between mb-6">
                                        <h2 className="text-2xl font-bold text-slate-800 dark:text-white font-display">
                                            Quick Access
                                        </h2>
                                        <div className="w-10 h-10 bg-teal-500/10 rounded-xl flex items-center justify-center">
                                            <i className="fas fa-bolt text-teal-600 dark:text-teal-400"></i>
                                        </div>
                                    </div>

                                    <div className="space-y-4">
                                        {recentNotes.map((note, index) => (
                                            <div 
                                                key={note.id}
                                                onClick={() => setActiveSection({name: 'explorer'})}
                                                className="group flex items-center gap-4 p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-teal-300 dark:hover:border-teal-600 hover:bg-teal-50 dark:hover:bg-teal-900/20 cursor-pointer transition-all duration-300"
                                            >
                                                <div className={`w-12 h-12 rounded-xl bg-gradient-to-br ${
                                                    index === 0 ? 'from-amber-500 to-orange-500' :
                                                    index === 1 ? 'from-blue-500 to-cyan-500' :
                                                    'from-purple-500 to-pink-500'
                                                } flex items-center justify-center shadow-lg`}>
                                                    <i className="fas fa-file-alt text-white text-sm"></i>
                                                </div>
                                                <div className="flex-1">
                                                    <h3 className="font-semibold text-slate-800 dark:text-white group-hover:text-teal-600 dark:group-hover:text-teal-400 transition-colors">
                                                        {note.title}
                                                    </h3>
                                                    <p className="text-sm text-slate-500 dark:text-slate-400">
                                                        {note.subject} • Grade {note.grade}
                                                    </p>
                                                </div>
                                                <i className="fas fa-arrow-right text-slate-400 group-hover:text-teal-500 transform group-hover:translate-x-1 transition-all duration-300"></i>
                                            </div>
                                        ))}
                                    </div>

                                    {lastViewedNote && (
                                        <div className="mt-6 p-4 bg-gradient-to-r from-teal-500/10 to-cyan-500/10 rounded-xl border border-teal-500/20">
                                            <div className="flex items-center gap-3">
                                                <div className="w-10 h-10 bg-teal-500 rounded-xl flex items-center justify-center">
                                                    <i className="fas fa-play text-white"></i>
                                                </div>
                                                <div className="flex-1">
                                                    <p className="font-semibold text-slate-800 dark:text-white">Continue Studying</p>
                                                    <p className="text-sm text-slate-600 dark:text-slate-400 truncate">{lastViewedNote.title}</p>
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                </div>

                                {/* Additional Tools */}
                                <div className="grid grid-cols-2 gap-4">
                                    <div 
                                        onClick={() => setActiveSection({name: 'tools'})}
                                        className="bg-white dark:bg-slate-800 p-4 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer group"
                                    >
                                        <div className="w-12 h-12 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300">
                                            <i className="fas fa-calculator text-white"></i>
                                        </div>
                                        <h3 className="font-semibold text-slate-800 dark:text-white mb-1">GPA Calculator</h3>
                                        <p className="text-sm text-slate-500 dark:text-slate-400">Calculate your grades</p>
                                    </div>
                                    <div 
                                        onClick={() => setActiveSection({name: 'books'})}
                                        className="bg-white dark:bg-slate-800 p-4 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer group"
                                    >
                                        <div className="w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300">
                                            <i className="fas fa-book text-white"></i>
                                        </div>
                                        <h3 className="font-semibold text-slate-800 dark:text-white mb-1">Out Books</h3>
                                        <p className="text-sm text-slate-500 dark:text-slate-400">Study guides</p>
                                    </div>
                                </div>
                            </div>

                            {/* Motivation & Progress */}
                            <div className="space-y-6">
                                {/* Inspiration Card */}
                                <div className="bg-gradient-to-br from-amber-500 to-orange-500 rounded-2xl p-6 shadow-2xl relative overflow-hidden">
                                    <div className="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16"></div>
                                    <div className="absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-12 -translate-x-12"></div>
                                    
                                    <div className="relative z-10">
                                        <div className="flex items-center gap-3 mb-4">
                                            <div className="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm">
                                                <i className="fas fa-lightbulb text-white text-xl"></i>
                                            </div>
                                            <div>
                                                <h3 className="font-bold text-white text-lg">Daily Inspiration</h3>
                                                <p className="text-white/80 text-sm">Words to motivate you</p>
                                            </div>
                                        </div>
                                        <p className="text-white text-lg italic leading-relaxed mb-4">
                                            "{quote}"
                                        </p>
                                        <div className="flex items-center gap-2 text-white/60 text-sm">
                                            <i className="fas fa-quote-left"></i>
                                            <span>Ganesh Dai Academy</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Progress Card */}
                                <div className="bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-xl border border-slate-200 dark:border-slate-700">
                                    <h3 className="font-bold text-slate-800 dark:text-white text-lg mb-6 flex items-center gap-3">
                                        <div className="w-10 h-10 bg-teal-500/10 rounded-xl flex items-center justify-center">
                                            <i className="fas fa-trophy text-teal-600 dark:text-teal-400"></i>
                                        </div>
                                        Your Study Journey
                                    </h3>

                                    <div className="space-y-5">
                                        <div>
                                            <div className="flex justify-between text-sm text-slate-600 dark:text-slate-400 mb-2">
                                                <span>Weekly Progress</span>
                                                <span className="font-semibold text-teal-600 dark:text-teal-400">65%</span>
                                            </div>
                                            <div className="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3">
                                                <div className="bg-gradient-to-r from-teal-500 to-cyan-500 h-3 rounded-full transition-all duration-1000 ease-out" style={{width: '65%'}}></div>
                                            </div>
                                        </div>

                                        <div>
                                            <div className="flex justify-between text-sm text-slate-600 dark:text-slate-400 mb-2">
                                                <span>Notes Completed</span>
                                                <span className="font-semibold text-blue-600 dark:text-blue-400">12/20</span>
                                            </div>
                                            <div className="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3">
                                                <div className="bg-gradient-to-r from-blue-500 to-indigo-500 h-3 rounded-full transition-all duration-1000 ease-out" style={{width: '60%'}}></div>
                                            </div>
                                        </div>

                                        <div>
                                            <div className="flex justify-between text-sm text-slate-600 dark:text-slate-400 mb-2">
                                                <span>Quiz Mastery</span>
                                                <span className="font-semibold text-purple-600 dark:text-purple-400">78%</span>
                                            </div>
                                            <div className="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3">
                                                <div className="bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full transition-all duration-1000 ease-out" style={{width: '78%'}}></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="mt-6 pt-4 border-t border-slate-200 dark:border-slate-700">
                                        <div className="flex items-center justify-between">
                                            <span className="text-sm text-slate-600 dark:text-slate-400">Next milestone in</span>
                                            <span className="text-sm font-semibold text-amber-600 dark:text-amber-400">3 days</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Quick Tip */}
                                <div className="bg-gradient-to-br from-slate-800 to-slate-900 dark:from-slate-700 dark:to-slate-800 rounded-2xl p-5 shadow-xl">
                                    <div className="flex items-center gap-3 mb-3">
                                        <div className="w-10 h-10 bg-cyan-500/20 rounded-xl flex items-center justify-center">
                                            <i className="fas fa-tips text-cyan-400"></i>
                                        </div>
                                        <div>
                                            <h4 className="font-semibold text-white">Pro Tip</h4>
                                            <p className="text-cyan-100 text-sm">Study smarter, not harder</p>
                                        </div>
                                    </div>
                                    <p className="text-white/80 text-sm leading-relaxed">
                                        Review your notes within 24 hours of learning - it boosts retention by up to 60%!
                                    </p>
                                </div>
                            </div>
                        </div>

                        {/* Bottom CTA */}
                        <div className="mt-8 text-center">
                            <div className="bg-gradient-to-r from-teal-500 via-cyan-500 to-blue-500 rounded-2xl p-8 shadow-2xl relative overflow-hidden">
                                <div className="absolute inset-0 bg-black/10"></div>
                                <div className="relative z-10">
                                    <h2 className="text-3xl font-bold text-white font-display mb-3">
                                        Ready to Excel? 🌟
                                    </h2>
                                    <p className="text-white/90 text-lg mb-6 max-w-2xl mx-auto">
                                        Your academic success story starts here. Access premium resources, master your subjects, and achieve your dreams.
                                    </p>
                                    <button 
                                        onClick={() => setActiveSection({name: 'explorer'})}
                                        className="bg-white text-teal-600 font-bold py-4 px-8 rounded-full hover:bg-slate-100 transition-colors shadow-2xl hover:shadow-3xl transform hover:-translate-y-1 transition-all duration-300 text-lg"
                                    >
                                        <i className="fas fa-rocket mr-2"></i>Start Learning Journey
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <style jsx>{`
                @keyframes blob {
                    0% { transform: translate(0px, 0px) scale(1); }
                    33% { transform: translate(30px, -50px) scale(1.1); }
                    66% { transform: translate(-20px, 20px) scale(0.9); }
                    100% { transform: translate(0px, 0px) scale(1); }
                }
                .animate-blob {
                    animation: blob 7s infinite;
                }
                .animation-delay-2000 {
                    animation-delay: 2s;
                }
                .animation-delay-4000 {
                    animation-delay: 4s;
                }
            `}</style>
        </div>
    );
};

    const NotesExplorer = ({ user, isPremium, bookmarkedNotes, onBookmark, onViewNote, onGoPremium }) => {
        const streamSubjects = useMemo(() => { 
            const streamInfo = DATA.streams.find(s => s.id === user.stream); 
            return [...(streamInfo?.compulsory || []), ...(user.optionals || [])]; 
        }, [user]);
        
        const [searchTerm, setSearchTerm] = useState('');
        const [filters, setFilters] = useState({ grade: user.grade, subject: 'all' });
        
        const filteredNotes = useMemo(() => 
            DATA.notes[user.grade].filter(note => 
                (filters.subject === 'all' ? streamSubjects.includes(note.subject) : note.subject === filters.subject) && 
                (note.title.toLowerCase().includes(searchTerm.toLowerCase()))
            ), 
            [searchTerm, filters, streamSubjects, user.grade]
        );

        return (
            <div className="section animate-fadeIn">
                <h2 className="text-3xl font-bold font-display mb-6">Note Explorer</h2>
                
                <div className="sticky top-0 z-30 bg-slate-50/80 dark:bg-slate-900/80 backdrop-blur-sm p-4 -mx-4 md:-mx-6 mb-6 rounded-b-lg">
                    <div className="relative mb-4">
                        <i className="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"></i>
                        <input 
                            type="text" 
                            placeholder="Search notes by title..." 
                            value={searchTerm} 
                            onChange={e => setSearchTerm(e.target.value)} 
                            className="w-full pl-12 pr-4 py-3 rounded-full border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 focus:ring-2 focus:ring-teal-500 focus:border-transparent transition" 
                        />
                    </div>
                    <div className="flex items-center gap-4">
                        <select 
                            value={filters.grade} 
                            onChange={e => setFilters(p => ({...p, grade: e.target.value}))} 
                            className="w-1/3 py-3 px-4 rounded-full border-2 dark:border-slate-700 bg-white dark:bg-slate-800"
                        >
                            <option value={user.grade}>Grade {user.grade}</option>
                        </select>
                        <select 
                            value={filters.subject} 
                            onChange={e => setFilters(p => ({...p, subject: e.target.value}))} 
                            className="w-2/3 py-3 px-4 rounded-full border-2 dark:border-slate-700 bg-white dark:bg-slate-800"
                        >
                            <option value="all">All My Subjects</option>
                            {streamSubjects.map(sub => (
                                <option key={sub} value={sub}>{sub}</option>
                            ))}
                        </select>
                    </div>
                </div>
                
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    {filteredNotes.map((note, i) => (
                        <div 
                            key={note.id} 
                            style={{ animationDelay: `${i * 30}ms` }} 
                            className="animate-fadeIn"
                        >
                            <NoteCard 
                                note={note} 
                                isBookmarked={bookmarkedNotes.includes(note.id)} 
                                onBookmark={onBookmark} 
                                onView={onViewNote} 
                                isPremiumUser={isPremium} 
                                onGoPremium={onGoPremium}
                            />
                        </div>
                    ))}
                </div>
                
                {filteredNotes.length === 0 && (
                    <div className="text-center py-12">
                        <i className="fas fa-search text-5xl text-slate-300 mb-4"></i>
                        <h3 className="text-xl font-bold text-slate-500">No notes found</h3>
                        <p className="text-slate-400">Try adjusting your search or filters</p>
                    </div>
                )}
            </div>
        );
    };

    const DigitalLibrary = ({ user, isPremium, onViewNote, onGoPremium }) => {
    const [search, setSearch] = useState('');
    const [category, setCategory] = useState('all');
    const [hoveredCard, setHoveredCard] = useState(null);
    
    const libraryItems = DATA.digitalLibrary[user.grade] || [];
    
    const filteredItems = libraryItems.filter(item =>
        (item.title.toLowerCase().includes(search.toLowerCase()) ||
        (item.description || '').toLowerCase().includes(search.toLowerCase())) &&
        (category === 'all' || (category === 'premium' && item.isPremium) || (category === 'free' && !item.isPremium))
    );

    const categories = [
        { 
            id: 'all', 
            name: 'All Resources', 
            icon: 'fas fa-layer-group', 
            color: 'from-teal-500 to-cyan-500',
            bgColor: 'bg-gradient-to-r from-teal-500 to-cyan-500'
        },
        { 
            id: 'free', 
            name: 'Free Access', 
            icon: 'fas fa-unlock', 
            color: 'from-green-500 to-emerald-500',
            bgColor: 'bg-gradient-to-r from-green-500 to-emerald-500'
        },
        { 
            id: 'premium', 
            name: 'Premium', 
            icon: 'fas fa-crown', 
            color: 'from-amber-500 to-orange-500',
            bgColor: 'bg-gradient-to-r from-amber-500 to-orange-500'
        }
    ];

    const ResourceCard = ({ item, index }) => (
        <div 
            className="group relative"
            onMouseEnter={() => setHoveredCard(index)}
            onMouseLeave={() => setHoveredCard(null)}
        >
            {/* Animated Background Glow */}
            <div className={`absolute -inset-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-0 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 ${
                hoveredCard === index ? 'animate-pulse' : ''
            }`}></div>
            
            {/* Main Card */}
            <div className="relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-2xl border border-white/20 dark:border-slate-700/50 hover:shadow-3xl transition-all duration-500 group-hover:-translate-y-3 backdrop-blur-sm">
                {/* Floating Icon Container */}
                <div className="absolute -top-4 left-6">
                    <div className="relative">
                        <div className={`w-12 h-12 ${item.isPremium ? 'bg-gradient-to-br from-amber-500 to-orange-500' : 'bg-gradient-to-br from-blue-500 to-indigo-500'} rounded-2xl flex items-center justify-center shadow-2xl transform group-hover:scale-110 group-hover:rotate-12 transition-all duration-500`}>
                            <i className={`${item.isPremium ? 'fas fa-crown' : 'fas fa-book-open'} text-white text-lg`}></i>
                        </div>
                        {/* Floating Particles */}
                        <div className="absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full opacity-0 group-hover:opacity-100 animate-ping"></div>
                        <div className="absolute -bottom-1 -left-1 w-3 h-3 bg-cyan-400 rounded-full opacity-0 group-hover:opacity-100 animate-ping animation-delay-300"></div>
                    </div>
                </div>

                {/* Premium Ribbon */}
                {item.isPremium && (
                    <div className="absolute -top-2 -right-2">
                        <div className="bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-1 rounded-full text-xs font-bold shadow-2xl flex items-center gap-1 transform group-hover:scale-110 transition-transform duration-300">
                            <i className="fas fa-bolt text-xs"></i>
                            PREMIUM
                        </div>
                    </div>
                )}

                {/* Content Area */}
                <div className="pt-8">
                    {/* Title with Gradient Text */}
                    <h3 className="font-bold text-xl text-slate-800 dark:text-white mb-3 leading-tight group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:to-purple-600 group-hover:bg-clip-text group-hover:text-transparent transition-all duration-500">
                        {item.title}
                    </h3>
                    
                    {/* Description */}
                    <p className="text-slate-600 dark:text-slate-400 text-sm leading-relaxed mb-6 line-clamp-2">
                        {item.description}
                    </p>

                    {/* Status Badge */}
                    <div className="flex items-center gap-2 mb-6">
                        {item.isPremium && !isPremium ? (
                            <div className="flex items-center gap-2 bg-amber-500/10 border border-amber-500/20 px-3 py-1 rounded-full">
                                <i className="fas fa-lock text-amber-500 text-xs"></i>
                                <span className="text-amber-600 dark:text-amber-400 text-xs font-semibold">Locked</span>
                            </div>
                        ) : item.isPremium && isPremium ? (
                            <div className="flex items-center gap-2 bg-green-500/10 border border-green-500/20 px-3 py-1 rounded-full">
                                <i className="fas fa-check text-green-500 text-xs"></i>
                                <span className="text-green-600 dark:text-green-400 text-xs font-semibold">Unlocked</span>
                            </div>
                        ) : (
                            <div className="flex items-center gap-2 bg-teal-500/10 border border-teal-500/20 px-3 py-1 rounded-full">
                                <i className="fas fa-unlock text-teal-500 text-xs"></i>
                                <span className="text-teal-600 dark:text-teal-400 text-xs font-semibold">Free Access</span>
                            </div>
                        )}
                    </div>

                    {/* Action Button */}
                    <div className="flex gap-3">
                        {(!item.isPremium || isPremium) ? (
                            <button
                                onClick={() => onViewNote && onViewNote({
                                    id: item.id,
                                    title: item.title,
                                    link: item.link,
                                })}
                                className="flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 group/btn"
                            >
                                <i className="fas fa-eye text-sm group-hover/btn:animate-bounce"></i>
                                Explore Resource
                                <i className="fas fa-arrow-right text-xs transform group-hover/btn:translate-x-1 transition-transform duration-300"></i>
                            </button>
                        ) : (
                            <button
                                onClick={onGoPremium}
                                className="flex-1 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 group/btn"
                            >
                                <i className="fas fa-crown text-sm group-hover/btn:animate-bounce"></i>
                                Unlock Premium
                                <i className="fas fa-sparkles text-xs opacity-0 group-hover/btn:opacity-100 transition-opacity duration-300"></i>
                            </button>
                        )}
                    </div>
                </div>

                {/* Animated Border */}
                <div className="absolute inset-0 rounded-2xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 opacity-0 group-hover:opacity-100 transition duration-500 -z-10">
                    <div className="absolute inset-[2px] rounded-2xl bg-white dark:bg-slate-800"></div>
                </div>
            </div>
        </div>
    );

    return (
        <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-purple-50/30 dark:from-slate-900 dark:via-blue-900/10 dark:to-purple-900/10">
            {/* Animated Background Elements */}
            <div className="fixed top-10 left-10 w-72 h-72 bg-teal-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float"></div>
            <div className="fixed top-20 right-20 w-96 h-96 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-2000"></div>
            <div className="fixed bottom-20 left-1/3 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-4000"></div>

            <div className="relative z-10">
                <div className="pt-12 pb-20 px-4">
                    <div className="max-w-7xl mx-auto">
                        {/* Hero Header */}
                        <div className="text-center mb-16">
                            {/* Animated Title Container */}
                            <div className="inline-block relative mb-8">
                                <div className="absolute -inset-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl blur-2xl opacity-30 animate-pulse"></div>
                                <div className="relative bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl px-8 py-6 shadow-2xl border border-white/20 dark:border-slate-700/50">
                                    <h1 className="text-6xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent font-display mb-4">
                                        Digital Library
                                    </h1>
                                    <p className="text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto leading-relaxed">
                                        Your gateway to <span className="font-semibold text-blue-600 dark:text-blue-400">premium educational resources</span> and exclusive study materials
                                    </p>
                                </div>
                            </div>

                            {/* Animated Search Bar */}
                            <div className="max-w-2xl mx-auto relative">
                                <div className="absolute -inset-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl blur opacity-30 animate-pulse"></div>
                                <div className="relative">
                                    <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                        <i className="fas fa-search text-blue-500 text-lg"></i>
                                    </div>
                                    <input
                                        value={search}
                                        onChange={(e) => setSearch(e.target.value)}
                                        placeholder="Discover amazing resources... ✨"
                                        className="w-full pl-12 pr-4 py-4 bg-white/90 dark:bg-slate-800/90 border border-blue-200 dark:border-blue-800 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-slate-800 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 shadow-2xl backdrop-blur-sm text-lg"
                                    />
                                    <div className="absolute inset-y-0 right-0 pr-4 flex items-center">
                                        <div className="bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-semibold shadow-lg">
                                            {filteredItems.length}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Animated Category Selector */}
                        <div className="flex justify-center mb-12">
                            <div className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl p-2 shadow-2xl border border-white/20 dark:border-slate-700/50">
                                <div className="flex gap-2">
                                    {categories.map((cat, index) => (
                                        <button
                                            key={cat.id}
                                            onClick={() => setCategory(cat.id)}
                                            className={`group relative px-6 py-3 rounded-xl font-bold transition-all duration-500 transform hover:scale-105 ${
                                                category === cat.id 
                                                ? `${cat.bgColor} text-white shadow-2xl`
                                                : 'text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white hover:bg-white/50 dark:hover:bg-slate-700/50'
                                            }`}
                                        >
                                            <div className="flex items-center gap-3">
                                                <i className={`${cat.icon} ${category === cat.id ? 'text-white' : cat.color.replace('from-', 'text-').split('-')[0] + '-500'}`}></i>
                                                <span>{cat.name}</span>
                                            </div>
                                            
                                            {/* Active Indicator */}
                                            {category === cat.id && (
                                                <div className="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-white rounded-full animate-bounce"></div>
                                            )}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* Resources Grid with Staggered Animation */}
                        {filteredItems.length > 0 ? (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                {filteredItems.map((item, index) => (
                                    <div 
                                        key={item.id}
                                        className="animate-fadeInUp"
                                        style={{ animationDelay: `${index * 150}ms` }}
                                    >
                                        <ResourceCard item={item} index={index} />
                                    </div>
                                ))}
                            </div>
                        ) : (
                            /* Spectacular Empty State */
                            <div className="text-center py-24">
                                <div className="relative inline-block mb-8">
                                    <div className="w-40 h-40 bg-gradient-to-br from-blue-400 to-purple-500 rounded-3xl flex items-center justify-center mx-auto shadow-2xl transform rotate-6 animate-float">
                                        <i className="fas fa-search text-white text-5xl"></i>
                                    </div>
                                    <div className="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full animate-ping"></div>
                                    <div className="absolute -bottom-2 -left-2 w-6 h-6 bg-cyan-400 rounded-full animate-ping animation-delay-1000"></div>
                                </div>
                                
                                <h3 className="text-3xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 dark:from-white dark:to-slate-300 bg-clip-text text-transparent mb-4">
                                    No Resources Found
                                </h3>
                                <p className="text-slate-600 dark:text-slate-400 text-lg mb-8 max-w-md mx-auto">
                                    Try different search terms or explore our other categories. Magic is everywhere!
                                </p>
                                
                                <button 
                                    onClick={() => { setSearch(''); setCategory('all'); }}
                                    className="bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-bold py-4 px-8 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-2xl hover:shadow-3xl flex items-center gap-3 mx-auto"
                                >
                                    <i className="fas fa-sparkles animate-pulse"></i>
                                    Reset & Explore
                                    <i className="fas fa-arrow-right transform group-hover:translate-x-1 transition-transform duration-300"></i>
                                </button>
                            </div>
                        )}

                        {/* Premium CTA Section */}
                        {!isPremium && libraryItems.some(item => item.isPremium) && (
                            <div className="mt-20 relative">
                                {/* Background Effects */}
                                <div className="absolute -inset-4 bg-gradient-to-r from-amber-400 to-orange-500 rounded-3xl blur-3xl opacity-20 animate-pulse"></div>
                                
                                <div className="relative bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 rounded-3xl p-12 shadow-3xl overflow-hidden">
                                    {/* Floating Elements */}
                                    <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32 animate-float"></div>
                                    <div className="absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-24 -translate-x-24 animate-float animation-delay-2000"></div>
                                    
                                    <div className="relative z-10 text-center text-white">
                                        {/* Animated Icon */}
                                        <div className="w-24 h-24 bg-white/20 rounded-3xl flex items-center justify-center mx-auto mb-8 backdrop-blur-sm transform hover:scale-110 hover:rotate-12 transition-all duration-500 shadow-2xl">
                                            <i className="fas fa-crown text-3xl text-white"></i>
                                        </div>
                                        
                                        <h2 className="text-4xl font-bold font-display mb-6">
                                            Unlock the <span className="bg-gradient-to-r from-white to-amber-200 bg-clip-text text-transparent">Magic</span> of Premium
                                        </h2>
                                        
                                        <p className="text-white/90 text-xl mb-8 max-w-2xl mx-auto leading-relaxed">
                                            Access exclusive resources, advanced study materials, and premium content designed to skyrocket your academic success! 🚀
                                        </p>
                                        
                                        <button 
                                            onClick={onGoPremium}
                                            className="bg-white text-amber-600 font-bold py-4 px-12 rounded-2xl hover:bg-slate-100 transition-all duration-300 transform hover:scale-105 shadow-2xl hover:shadow-3xl text-lg flex items-center gap-3 mx-auto group"
                                        >
                                            <i className="fas fa-rocket group-hover:animate-bounce"></i>
                                            Upgrade to Premium Experience
                                            <i className="fas fa-sparkles text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            </div>

            <style jsx>{`
                @keyframes float {
                    0%, 100% { transform: translateY(0px) rotate(0deg); }
                    50% { transform: translateY(-20px) rotate(5deg); }
                }
                @keyframes fadeInUp {
                    from {
                        opacity: 0;
                        transform: translateY(30px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                .animate-float {
                    animation: float 6s ease-in-out infinite;
                }
                .animate-fadeInUp {
                    animation: fadeInUp 0.6s ease-out forwards;
                }
                .animation-delay-2000 {
                    animation-delay: 2s;
                }
                .animation-delay-4000 {
                    animation-delay: 4s;
                }
                .animation-delay-300 {
                    animation-delay: 300ms;
                }
                .animation-delay-1000 {
                    animation-delay: 1000ms;
                }
                .line-clamp-2 {
                    display: -webkit-box;
                    -webkit-line-clamp: 2;
                    -webkit-box-orient: vertical;
                    overflow: hidden;
                }
            `}</style>
        </div>
    );
};
    const OutBooks = ({ user, isPremium, onViewNote, onGoPremium }) => {
    const [search, setSearch] = useState('');
    const [category, setCategory] = useState('all');
    const [hoveredCard, setHoveredCard] = useState(null);
    
    const books = DATA.ourBooks[user.grade] || [];
    
    const filteredBooks = books.filter(book =>
        (book.title.toLowerCase().includes(search.toLowerCase()) ||
        (book.description || '').toLowerCase().includes(search.toLowerCase())) &&
        (category === 'all' || (category === 'premium' && book.isPremium) || (category === 'free' && !book.isPremium))
    );

    const categories = [
        { 
            id: 'all', 
            name: 'All Books', 
            icon: 'fas fa-books', 
            color: 'from-purple-500 to-pink-500',
            bgColor: 'bg-gradient-to-r from-purple-500 to-pink-500'
        },
        { 
            id: 'free', 
            name: 'Free Books', 
            icon: 'fas fa-book-open', 
            color: 'from-green-500 to-emerald-500',
            bgColor: 'bg-gradient-to-r from-green-500 to-emerald-500'
        },
        { 
            id: 'premium', 
            name: 'Premium Books', 
            icon: 'fas fa-crown', 
            color: 'from-amber-500 to-orange-500',
            bgColor: 'bg-gradient-to-r from-amber-500 to-orange-500'
        }
    ];

    const BookCard = ({ book, index }) => (
        <div 
            className="group relative"
            onMouseEnter={() => setHoveredCard(index)}
            onMouseLeave={() => setHoveredCard(null)}
        >
            {/* Animated Background Glow */}
            <div className={`absolute -inset-1 bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 rounded-2xl blur opacity-0 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 ${
                hoveredCard === index ? 'animate-pulse' : ''
            }`}></div>
            
            {/* Main Card */}
            <div className="relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-2xl border border-white/20 dark:border-slate-700/50 hover:shadow-3xl transition-all duration-500 group-hover:-translate-y-3 backdrop-blur-sm">
                {/* Floating Book Icon Container */}
                <div className="absolute -top-4 left-6">
                    <div className="relative">
                        <div className={`w-12 h-12 ${book.isPremium ? 'bg-gradient-to-br from-amber-500 to-orange-500' : 'bg-gradient-to-br from-purple-500 to-pink-500'} rounded-2xl flex items-center justify-center shadow-2xl transform group-hover:scale-110 group-hover:rotate-12 transition-all duration-500`}>
                            <i className={`${book.isPremium ? 'fas fa-crown' : 'fas fa-book'} text-white text-lg`}></i>
                        </div>
                        {/* Floating Pages Animation */}
                        <div className="absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full opacity-0 group-hover:opacity-100 animate-ping"></div>
                        <div className="absolute -bottom-1 -left-1 w-3 h-3 bg-pink-400 rounded-full opacity-0 group-hover:opacity-100 animate-ping animation-delay-300"></div>
                    </div>
                </div>

                {/* Premium Book Badge */}
                {book.isPremium && (
                    <div className="absolute -top-2 -right-2">
                        <div className="bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-1 rounded-full text-xs font-bold shadow-2xl flex items-center gap-1 transform group-hover:scale-110 transition-transform duration-300">
                            <i className="fas fa-star text-xs"></i>
                            PREMIUM
                        </div>
                    </div>
                )}

                {/* Content Area */}
                <div className="pt-8">
                    {/* Book Title with Gradient Text */}
                    <h3 className="font-bold text-xl text-slate-800 dark:text-white mb-3 leading-tight group-hover:bg-gradient-to-r group-hover:from-purple-600 group-hover:to-pink-600 group-hover:bg-clip-text group-hover:text-transparent transition-all duration-500">
                        {book.title}
                    </h3>
                    
                    {/* Book Description */}
                    <p className="text-slate-600 dark:text-slate-400 text-sm leading-relaxed mb-6 line-clamp-2">
                        {book.description}
                    </p>

                    {/* Book Status */}
                    <div className="flex items-center gap-2 mb-6">
                        {book.isPremium && !isPremium ? (
                            <div className="flex items-center gap-2 bg-amber-500/10 border border-amber-500/20 px-3 py-1 rounded-full">
                                <i className="fas fa-lock text-amber-500 text-xs"></i>
                                <span className="text-amber-600 dark:text-amber-400 text-xs font-semibold">Premium Book</span>
                            </div>
                        ) : book.isPremium && isPremium ? (
                            <div className="flex items-center gap-2 bg-green-500/10 border border-green-500/20 px-3 py-1 rounded-full">
                                <i className="fas fa-check-circle text-green-500 text-xs"></i>
                                <span className="text-green-600 dark:text-green-400 text-xs font-semibold">Available</span>
                            </div>
                        ) : (
                            <div className="flex items-center gap-2 bg-teal-500/10 border border-teal-500/20 px-3 py-1 rounded-full">
                                <i className="fas fa-download text-teal-500 text-xs"></i>
                                <span className="text-teal-600 dark:text-teal-400 text-xs font-semibold">Free Download</span>
                            </div>
                        )}
                    </div>

                    {/* Action Button */}
                    <div className="flex gap-3">
                        {(!book.isPremium || isPremium) ? (
                            <button
                                onClick={() => onViewNote && onViewNote({
                                    id: book.id,
                                    title: book.title,
                                    link: book.link,
                                })}
                                className="flex-1 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 group/btn"
                            >
                                <i className="fas fa-book-open text-sm group-hover/btn:animate-bounce"></i>
                                Read Book
                                <i className="fas fa-arrow-right text-xs transform group-hover/btn:translate-x-1 transition-transform duration-300"></i>
                            </button>
                        ) : (
                            <button
                                onClick={onGoPremium}
                                className="flex-1 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 group/btn"
                            >
                                <i className="fas fa-unlock text-sm group-hover/btn:animate-bounce"></i>
                                Unlock Access
                                <i className="fas fa-sparkles text-xs opacity-0 group-hover/btn:opacity-100 transition-opacity duration-300"></i>
                            </button>
                        )}
                    </div>
                </div>

                {/* Animated Book Spine Effect */}
                <div className="absolute inset-0 rounded-2xl bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 opacity-0 group-hover:opacity-100 transition duration-500 -z-10">
                    <div className="absolute inset-[2px] rounded-2xl bg-white dark:bg-slate-800"></div>
                </div>
            </div>
        </div>
    );

    return (
        <div className="min-h-screen bg-gradient-to-br from-slate-50 via-purple-50/30 to-pink-50/30 dark:from-slate-900 dark:via-purple-900/10 dark:to-pink-900/10">
            {/* Animated Background Elements */}
            <div className="fixed top-10 left-10 w-72 h-72 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float"></div>
            <div className="fixed top-20 right-20 w-96 h-96 bg-pink-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-2000"></div>
            <div className="fixed bottom-20 left-1/3 w-80 h-80 bg-red-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-4000"></div>

            <div className="relative z-10">
                <div className="pt-12 pb-20 px-4">
                    <div className="max-w-7xl mx-auto">
                        {/* Hero Header */}
                        <div className="text-center mb-16">
                            {/* Animated Title Container */}
                            <div className="inline-block relative mb-8">
                                <div className="absolute -inset-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl blur-2xl opacity-30 animate-pulse"></div>
                                <div className="relative bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl px-8 py-6 shadow-2xl border border-white/20 dark:border-slate-700/50">
                                    <h1 className="text-6xl font-bold bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 bg-clip-text text-transparent font-display mb-4">
                                        Out Books
                                    </h1>
                                    <p className="text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto leading-relaxed">
                                        Discover our <span className="font-semibold text-purple-600 dark:text-purple-400">curated collection</span> of textbooks and study guides for academic excellence
                                    </p>
                                </div>
                            </div>

                            {/* Animated Search Bar */}
                            <div className="max-w-2xl mx-auto relative">
                                <div className="absolute -inset-1 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl blur opacity-30 animate-pulse"></div>
                                <div className="relative">
                                    <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                        <i className="fas fa-search text-purple-500 text-lg"></i>
                                    </div>
                                    <input
                                        value={search}
                                        onChange={(e) => setSearch(e.target.value)}
                                        placeholder="Find your perfect study companion... 📚"
                                        className="w-full pl-12 pr-4 py-4 bg-white/90 dark:bg-slate-800/90 border border-purple-200 dark:border-purple-800 rounded-2xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 text-slate-800 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 shadow-2xl backdrop-blur-sm text-lg"
                                    />
                                    <div className="absolute inset-y-0 right-0 pr-4 flex items-center">
                                        <div className="bg-purple-500 text-white px-3 py-1 rounded-full text-sm font-semibold shadow-lg">
                                            {filteredBooks.length}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Animated Category Selector */}
                        <div className="flex justify-center mb-12">
                            <div className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl p-2 shadow-2xl border border-white/20 dark:border-slate-700/50">
                                <div className="flex gap-2">
                                    {categories.map((cat, index) => (
                                        <button
                                            key={cat.id}
                                            onClick={() => setCategory(cat.id)}
                                            className={`group relative px-6 py-3 rounded-xl font-bold transition-all duration-500 transform hover:scale-105 ${
                                                category === cat.id 
                                                ? `${cat.bgColor} text-white shadow-2xl`
                                                : 'text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white hover:bg-white/50 dark:hover:bg-slate-700/50'
                                            }`}
                                        >
                                            <div className="flex items-center gap-3">
                                                <i className={`${cat.icon} ${category === cat.id ? 'text-white' : cat.color.replace('from-', 'text-').split('-')[0] + '-500'}`}></i>
                                                <span>{cat.name}</span>
                                            </div>
                                            
                                            {/* Active Page Indicator */}
                                            {category === cat.id && (
                                                <div className="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-white rounded-full animate-bounce"></div>
                                            )}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* Books Grid with Staggered Animation */}
                        {filteredBooks.length > 0 ? (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                {filteredBooks.map((book, index) => (
                                    <div 
                                        key={book.id}
                                        className="animate-fadeInUp"
                                        style={{ animationDelay: `${index * 150}ms` }}
                                    >
                                        <BookCard book={book} index={index} />
                                    </div>
                                ))}
                            </div>
                        ) : (
                            /* Spectacular Empty State */
                            <div className="text-center py-24">
                                <div className="relative inline-block mb-8">
                                    <div className="w-40 h-40 bg-gradient-to-br from-purple-400 to-pink-500 rounded-3xl flex items-center justify-center mx-auto shadow-2xl transform -rotate-6 animate-float">
                                        <i className="fas fa-book text-white text-5xl"></i>
                                    </div>
                                    <div className="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full animate-ping"></div>
                                    <div className="absolute -bottom-2 -left-2 w-6 h-6 bg-pink-400 rounded-full animate-ping animation-delay-1000"></div>
                                </div>
                                
                                <h3 className="text-3xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 dark:from-white dark:to-slate-300 bg-clip-text text-transparent mb-4">
                                    No Books Found
                                </h3>
                                <p className="text-slate-600 dark:text-slate-400 text-lg mb-8 max-w-md mx-auto">
                                    Try different search terms or explore our complete book collection. Knowledge awaits!
                                </p>
                                
                                <button 
                                    onClick={() => { setSearch(''); setCategory('all'); }}
                                    className="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-4 px-8 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-2xl hover:shadow-3xl flex items-center gap-3 mx-auto"
                                >
                                    <i className="fas fa-bookmark animate-pulse"></i>
                                    Explore All Books
                                    <i className="fas fa-arrow-right transform group-hover:translate-x-1 transition-transform duration-300"></i>
                                </button>
                            </div>
                        )}

                        {/* Premium Books CTA Section */}
                        {!isPremium && books.some(book => book.isPremium) && (
                            <div className="mt-20 relative">
                                {/* Background Effects */}
                                <div className="absolute -inset-4 bg-gradient-to-r from-amber-400 to-orange-500 rounded-3xl blur-3xl opacity-20 animate-pulse"></div>
                                
                                <div className="relative bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 rounded-3xl p-12 shadow-3xl overflow-hidden">
                                    {/* Floating Book Elements */}
                                    <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32 animate-float"></div>
                                    <div className="absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-24 -translate-x-24 animate-float animation-delay-2000"></div>
                                    
                                    <div className="relative z-10 text-center text-white">
                                        {/* Animated Book Icon */}
                                        <div className="w-24 h-24 bg-white/20 rounded-3xl flex items-center justify-center mx-auto mb-8 backdrop-blur-sm transform hover:scale-110 hover:rotate-12 transition-all duration-500 shadow-2xl">
                                            <i className="fas fa-book-heart text-3xl text-white"></i>
                                        </div>
                                        
                                        <h2 className="text-4xl font-bold font-display mb-6">
                                            Unlock <span className="bg-gradient-to-r from-white to-amber-200 bg-clip-text text-transparent">Premium Books</span>
                                        </h2>
                                        
                                        <p className="text-white/90 text-xl mb-8 max-w-2xl mx-auto leading-relaxed">
                                            Access exclusive textbooks, expert study guides, and premium educational content that will transform your learning journey! 🌟
                                        </p>
                                        
                                        <button 
                                            onClick={onGoPremium}
                                            className="bg-white text-amber-600 font-bold py-4 px-12 rounded-2xl hover:bg-slate-100 transition-all duration-300 transform hover:scale-105 shadow-2xl hover:shadow-3xl text-lg flex items-center gap-3 mx-auto group"
                                        >
                                            <i className="fas fa-graduation-cap group-hover:animate-bounce"></i>
                                            Access Premium Books
                                            <i className="fas fa-sparkles text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Library Features */}
                        <div className="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8">
                            <div className="text-center group">
                                <div className="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg transform group-hover:scale-110 transition-transform duration-300">
                                    <i className="fas fa-book-reader text-white text-xl"></i>
                                </div>
                                <h3 className="font-bold text-slate-800 dark:text-white mb-2">Comprehensive</h3>
                                <p className="text-slate-600 dark:text-slate-400 text-sm">
                                    Complete coverage of all subjects and topics
                                </p>
                            </div>
                            
                            <div className="text-center group">
                                <div className="w-16 h-16 bg-gradient-to-br from-pink-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg transform group-hover:scale-110 transition-transform duration-300">
                                    <i className="fas fa-feather-alt text-white text-xl"></i>
                                </div>
                                <h3 className="font-bold text-slate-800 dark:text-white mb-2">Expertly Curated</h3>
                                <p className="text-slate-600 dark:text-slate-400 text-sm">
                                    Carefully selected by educational experts
                                </p>
                            </div>
                            
                            <div className="text-center group">
                                <div className="w-16 h-16 bg-gradient-to-br from-red-500 to-orange-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg transform group-hover:scale-110 transition-transform duration-300">
                                    <i className="fas fa-clock text-white text-xl"></i>
                                </div>
                                <h3 className="font-bold text-slate-800 dark:text-white mb-2">Always Updated</h3>
                                <p className="text-slate-600 dark:text-slate-400 text-sm">
                                    Latest editions and current syllabus
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <style jsx>{`
                @keyframes float {
                    0%, 100% { transform: translateY(0px) rotate(0deg); }
                    50% { transform: translateY(-20px) rotate(-5deg); }
                }
                @keyframes fadeInUp {
                    from {
                        opacity: 0;
                        transform: translateY(30px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                .animate-float {
                    animation: float 6s ease-in-out infinite;
                }
                .animate-fadeInUp {
                    animation: fadeInUp 0.6s ease-out forwards;
                }
                .animation-delay-2000 {
                    animation-delay: 2s;
                }
                .animation-delay-4000 {
                    animation-delay: 4s;
                }
                .animation-delay-300 {
                    animation-delay: 300ms;
                }
                .animation-delay-1000 {
                    animation-delay: 1000ms;
                }
                .line-clamp-2 {
                    display: -webkit-box;
                    -webkit-line-clamp: 2;
                    -webkit-box-orient: vertical;
                    overflow: hidden;
                }
            `}</style>
        </div>
    );
};
const VideoSection = ({ user, isPremium, onGoPremium }) => { const [selectedVideo, setSelectedVideo] = useState(null); const [watchOption, setWatchOption] = useState(null); const [searchTerm, setSearchTerm] = useState(''); const videos = DATA.videos[user.grade] || []; const filteredVideos = videos.filter(video => video.title.toLowerCase().includes(searchTerm.toLowerCase())); const VideoCard = ({ video, index }) => ( <div className="group relative"><div className="absolute -inset-1 bg-gradient-to-r from-red-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-0 group-hover:opacity-100 transition duration-1000 group-hover:duration-200"></div><div className="relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-2xl border border-white/20 dark:border-slate-700/50 hover:shadow-3xl transition-all duration-500 group-hover:-translate-y-3 backdrop-blur-sm"><div className="absolute -top-4 left-6"><div className="relative"><div className="w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center shadow-2xl transform group-hover:scale-110 group-hover:rotate-12 transition-all duration-500"><i className="fab fa-youtube text-white text-lg"></i></div><div className="absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full opacity-0 group-hover:opacity-100 animate-ping"></div><div className="absolute -bottom-1 -left-1 w-3 h-3 bg-cyan-400 rounded-full opacity-0 group-hover:opacity-100 animate-ping animation-delay-300"></div></div></div>{video.isPremium && (<div className="absolute -top-2 -right-2"><div className="bg-gradient-to-r from-amber-500 to-orange-500 text-white px-3 py-1 rounded-full text-xs font-bold shadow-2xl flex items-center gap-1"><i className="fas fa-crown text-xs"></i>PREMIUM</div></div>)}<div className="relative mb-4 rounded-xl overflow-hidden border-2 border-white/20 group-hover:border-red-500/50 transition-all duration-300"><img src={`https://img.youtube.com/vi/${video.youtubeId}/maxresdefault.jpg`} alt={video.title} className="w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500" onError={(e) => { e.target.src = `https://img.youtube.com/vi/${video.youtubeId}/hqdefault.jpg`; }} /><div className="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center"><div className="bg-red-600 hover:bg-red-700 text-white rounded-full w-16 h-16 flex items-center justify-center cursor-pointer transform group-hover:scale-110 transition-all duration-300 shadow-2xl"><i className="fa-solid fa-play text-xl"></i></div></div><div className="absolute top-3 right-3 bg-red-600 text-white px-2 py-1 rounded-full text-xs font-bold"><i className="fas fa-play mr-1"></i> VIDEO</div><div className="absolute bottom-3 left-3 bg-black/80 text-white px-2 py-1 rounded text-xs">{video.duration}</div></div><div className="flex items-center gap-2 mb-3"><span className="text-xs font-semibold text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/30 px-2 py-1 rounded-full">{video.subject}</span><span className="text-xs text-slate-500 dark:text-slate-400">Grade {user.grade}</span></div><h3 className="font-bold text-xl text-slate-800 dark:text-white mb-3 leading-tight group-hover:bg-gradient-to-r group-hover:from-red-600 group-hover:to-purple-600 group-hover:bg-clip-text group-hover:text-transparent transition-all duration-500">{video.title}</h3><p className="text-slate-600 dark:text-slate-400 text-sm leading-relaxed mb-6 line-clamp-2">{video.description}</p><button onClick={() => video.isPremium && !isPremium ? onGoPremium() : setSelectedVideo(video)} className={`w-full font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 group/btn ${video.isPremium && !isPremium ? 'bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white' : 'bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white'}`}>{video.isPremium && !isPremium ? <><i className="fas fa-lock text-sm group-hover/btn:animate-bounce"></i>Unlock Premium</> : <><i className="fas fa-play text-sm group-hover/btn:animate-bounce"></i>Watch Video<i className="fas fa-arrow-right text-xs transform group-hover/btn:translate-x-1 transition-transform duration-300"></i></>}</button><div className="absolute inset-0 rounded-2xl bg-gradient-to-r from-red-500 via-purple-500 to-pink-500 opacity-0 group-hover:opacity-100 transition duration-500 -z-10"><div className="absolute inset-[2px] rounded-2xl bg-white dark:bg-slate-800"></div></div></div></div> ); const WatchOptionsModal = () => { if (!selectedVideo) return null; const handleYouTubeWatch = () => { window.open(`https://www.youtube.com/watch?v=${selectedVideo.youtubeId}`, '_blank'); setSelectedVideo(null); setWatchOption(null); }; const handleWatchHere = () => { setWatchOption('here'); }; const handleFullScreenClose = () => { setSelectedVideo(null); setWatchOption(null); }; if (watchOption === 'here') { return ( <div className="fixed inset-0 bg-black/95 backdrop-blur-xl z-50 flex items-center justify-center p-4"><div className="relative w-full max-w-6xl bg-slate-900 rounded-3xl overflow-hidden shadow-2xl border border-purple-500/30"><div className="flex items-center justify-between p-6 bg-gradient-to-r from-purple-600 to-red-600"><h3 className="text-2xl font-bold text-white">{selectedVideo.title}</h3><button onClick={handleFullScreenClose} className="w-10 h-10 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110"><i className="fas fa-times text-white"></i></button></div><div className="relative aspect-video bg-black"><iframe src={`https://www.youtube.com/embed/${selectedVideo.youtubeId}?autoplay=1&rel=0&modestbranding=1`} className="w-full h-full border-0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen title={selectedVideo.title}></iframe></div><div className="p-6 bg-slate-800"><p className="text-white/80 text-lg mb-4">{selectedVideo.description}</p><div className="flex items-center gap-4 text-white/60"><div className="flex items-center gap-2"><i className="fab fa-youtube text-red-400"></i><span>YouTube</span></div><div className="flex items-center gap-2"><i className="fas fa-clock"></i><span>{selectedVideo.duration}</span></div><div className="flex items-center gap-2"><i className="fas fa-book"></i><span>{selectedVideo.subject}</span></div></div></div></div></div> ); } return ( <div className="fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4"><div className="w-full max-w-md bg-gradient-to-br from-slate-900 to-purple-900 rounded-3xl shadow-2xl border border-purple-500/30 overflow-hidden"><div className="relative p-8 text-center bg-gradient-to-r from-red-600 to-purple-600"><button onClick={() => setSelectedVideo(null)} className="absolute top-6 right-6 w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-all duration-300 hover:scale-110"><i className="fas fa-times text-white"></i></button><div className="w-20 h-20 bg-gradient-to-br from-red-500 to-pink-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-2xl"><i className="fab fa-youtube text-white text-3xl"></i></div><h2 className="text-2xl font-bold text-white mb-2">Watch Video</h2><p className="text-white/80 text-sm">{selectedVideo.title}</p></div><div className="p-6 space-y-4"><button onClick={handleYouTubeWatch} className="w-full bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-3 group"><i className="fab fa-youtube text-xl group-hover:animate-bounce"></i><div className="text-left"><div className="font-semibold">Watch on YouTube</div><div className="text-sm opacity-90">Subscribe for more content</div></div><i className="fas fa-external-link-alt text-sm opacity-70"></i></button><button onClick={handleWatchHere} className="w-full bg-gradient-to-r from-purple-500 to-blue-600 hover:from-purple-600 hover:to-blue-700 text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-3 group"><i className="fas fa-expand text-xl group-hover:animate-pulse"></i><div className="text-left"><div className="font-semibold">Watch Here</div><div className="text-sm opacity-90">Full screen experience</div></div><i className="fas fa-play text-sm opacity-70"></i></button></div><div className="p-4 bg-white/5 border-t border-white/10"><div className="space-y-2 text-sm text-white/80"><div className="flex justify-between"><span>Subject:</span><span className="font-semibold">{selectedVideo.subject}</span></div><div className="flex justify-between"><span>Duration:</span><span className="font-semibold">{selectedVideo.duration}</span></div><div className="flex justify-between"><span>Grade:</span><span className="font-semibold">{user.grade}</span></div></div></div></div></div> ); }; return ( <div className="min-h-screen bg-gradient-to-br from-slate-50 via-red-50/20 to-purple-50/30 dark:from-slate-900 dark:via-red-900/10 dark:to-purple-900/10"><div className="fixed top-10 left-10 w-72 h-72 bg-red-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float"></div><div className="fixed top-20 right-20 w-96 h-96 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-2000"></div><div className="fixed bottom-20 left-1/3 w-80 h-80 bg-pink-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-4000"></div><div className="relative z-10"><div className="pt-12 pb-20 px-4"><div className="max-w-7xl mx-auto"><div className="text-center mb-16"><div className="inline-block relative mb-8"><div className="absolute -inset-4 bg-gradient-to-r from-red-500 to-purple-500 rounded-2xl blur-2xl opacity-30 animate-pulse"></div><div className="relative bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl px-8 py-6 shadow-2xl border border-white/20 dark:border-slate-700/50"><h1 className="text-6xl font-bold bg-gradient-to-r from-red-600 via-purple-600 to-pink-600 bg-clip-text text-transparent font-display mb-4">Video Lessons</h1><p className="text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto leading-relaxed">Learn from <span className="font-semibold text-red-600 dark:text-red-400">expert video tutorials</span> designed to boost your academic preparation</p></div></div><div className="max-w-2xl mx-auto mb-12"><div className="relative group"><div className="absolute -inset-1 bg-gradient-to-r from-red-500 to-purple-500 rounded-2xl blur opacity-30 group-hover:opacity-100 transition duration-1000"></div><div className="relative"><div className="absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none"><i className="fas fa-search text-red-500 text-xl"></i></div><input value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} placeholder="🔍 Search video lessons... Type to find amazing content ✨" className="w-full pl-14 pr-6 py-5 bg-white/90 dark:bg-slate-800/90 border-2 border-red-200 dark:border-red-800 rounded-2xl focus:ring-4 focus:ring-red-500/30 focus:border-red-500 transition-all duration-500 text-slate-800 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 shadow-2xl backdrop-blur-sm text-lg font-medium" /><div className="absolute inset-y-0 right-0 pr-5 flex items-center"><div className="bg-gradient-to-r from-red-500 to-purple-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg transform group-hover:scale-110 transition-transform duration-300">{filteredVideos.length} videos</div></div></div></div></div><div className="flex justify-center gap-8 mb-8"><div className="text-center"><div className="text-3xl font-bold text-red-600 dark:text-red-400">{filteredVideos.length}</div><div className="text-slate-600 dark:text-slate-400 text-sm">Video Lessons</div></div><div className="text-center"><div className="text-3xl font-bold text-purple-600 dark:text-purple-400">{filteredVideos.filter(v => !v.isPremium).length}</div><div className="text-slate-600 dark:text-slate-400 text-sm">Free Videos</div></div><div className="text-center"><div className="text-3xl font-bold text-pink-600 dark:text-pink-400">HD</div><div className="text-slate-600 dark:text-slate-400 text-sm">Quality</div></div></div></div>{filteredVideos.length > 0 ? (<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">{filteredVideos.map((video, index) => (<div key={video.id} className="animate-fadeInUp" style={{ animationDelay: `${index * 150}ms` }}><VideoCard video={video} index={index} /></div>))}</div>) : (<div className="text-center py-20"><div className="relative inline-block mb-8"><div className="w-40 h-40 bg-gradient-to-br from-red-400 to-purple-500 rounded-3xl flex items-center justify-center mx-auto shadow-2xl transform -rotate-6 animate-float"><i className="fab fa-youtube text-white text-5xl"></i></div><div className="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full animate-ping"></div><div className="absolute -bottom-2 -left-2 w-6 h-6 bg-pink-400 rounded-full animate-ping animation-delay-1000"></div></div><h3 className="text-3xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 dark:from-white dark:to-slate-300 bg-clip-text text-transparent mb-4">No Videos Found</h3><p className="text-slate-600 dark:text-slate-400 text-lg mb-8 max-w-md mx-auto">Try different search terms or check back later for new video content.</p><button onClick={() => setSearchTerm('')} className="bg-gradient-to-r from-red-500 to-purple-500 hover:from-red-600 hover:to-purple-600 text-white font-bold py-4 px-8 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-2xl hover:shadow-3xl flex items-center gap-3 mx-auto"><i className="fas fa-redo animate-pulse"></i>Clear Search</button></div>)}<div className="text-center mt-16"><div className="bg-gradient-to-r from-red-500/10 to-purple-500/10 rounded-2xl p-8 border border-red-500/20"><h3 className="text-2xl font-bold text-slate-800 dark:text-white mb-4">Want More Video Content?</h3><p className="text-slate-600 dark:text-slate-400 mb-6 max-w-2xl mx-auto">Subscribe to our YouTube channel for regular updates, live sessions, and exclusive content!</p><a href={DATA.socials.youtube} target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-3 bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-8 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"><i className="fab fa-youtube text-xl"></i>Subscribe on YouTube<i className="fas fa-external-link-alt text-sm"></i></a></div></div></div></div></div>{selectedVideo && <WatchOptionsModal />}<style jsx>{`@keyframes float { 0%, 100% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-20px) rotate(-5deg); } }@keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }.animate-float { animation: float 6s ease-in-out infinite; }.animate-fadeInUp { animation: fadeInUp 0.6s ease-out forwards; }.animation-delay-2000 { animation-delay: 2s; }.animation-delay-4000 { animation-delay: 4s; }.animation-delay-300 { animation-delay: 300ms; }.animation-delay-1000 { animation-delay: 1000ms; }.line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }`}</style></div> ); };

const AboutSection = ({ user }) => {
    return (
        <div className="min-h-screen bg-white dark:bg-slate-900">
            {/* Header Section */}
            <div className="relative bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-800 dark:to-slate-900 py-20">
                <div className="absolute inset-0 bg-white/50 dark:bg-slate-900/50"></div>
                <div className="relative max-w-6xl mx-auto px-4 text-center">
                    <div className="inline-flex items-center gap-4 bg-white dark:bg-slate-800 rounded-2xl px-6 py-3 shadow-lg border border-slate-200 dark:border-slate-700 mb-8">
                        <div className="w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center">
                            <i className="fas fa-university text-white text-lg"></i>
                        </div>
                        <span className="text-sm font-semibold text-slate-700 dark:text-slate-300">About Ganesh Dai Academy</span>
                    </div>
                    
                    <h1 className="text-5xl font-bold text-slate-800 dark:text-white mb-6 font-display">
                        Excellence in <span className="bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">Education</span>
                    </h1>
                    <p className="text-xl text-slate-600 dark:text-slate-400 max-w-3xl mx-auto leading-relaxed">
                        Empowering Grade 11 & 12 students with comprehensive learning resources, 
                        expert guidance, and innovative tools for academic success.
                    </p>
                </div>
            </div>

            {/* Mission & Vision */}
            <div className="py-16 bg-white dark:bg-slate-900">
                <div className="max-w-6xl mx-auto px-4">
                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">
                        {/* Mission */}
                        <div className="bg-white dark:bg-slate-800 rounded-2xl p-8 shadow-lg border border-slate-200 dark:border-slate-700">
                            <div className="flex items-center gap-4 mb-6">
                                <div className="w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center">
                                    <i className="fas fa-bullseye text-white text-xl"></i>
                                </div>
                                <div>
                                    <h3 className="text-2xl font-bold text-slate-800 dark:text-white">Our Mission</h3>
                                    <p className="text-blue-600 dark:text-blue-400 font-semibold">Purpose-driven education</p>
                                </div>
                            </div>
                            <p className="text-slate-600 dark:text-slate-400 leading-relaxed text-lg">
                                To provide accessible, high-quality educational resources that empower students 
                                to excel academically and develop the skills needed for future success. We believe 
                                every student deserves the opportunity to achieve their full potential.
                            </p>
                        </div>

                        {/* Vision */}
                        <div className="bg-white dark:bg-slate-800 rounded-2xl p-8 shadow-lg border border-slate-200 dark:border-slate-700">
                            <div className="flex items-center gap-4 mb-6">
                                <div className="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center">
                                    <i className="fas fa-eye text-white text-xl"></i>
                                </div>
                                <div>
                                    <h3 className="text-2xl font-bold text-slate-800 dark:text-white">Our Vision</h3>
                                    <p className="text-purple-600 dark:text-purple-400 font-semibold">Shaping future leaders</p>
                                </div>
                            </div>
                            <p className="text-slate-600 dark:text-slate-400 leading-relaxed text-lg">
                                To be Nepal's leading educational platform, recognized for innovation, excellence, 
                                and transformative impact on student learning outcomes. We envision a future where 
                                quality education is accessible to all.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            {/* Values */}
            <div className="py-16 bg-slate-50 dark:bg-slate-800">
                <div className="max-w-6xl mx-auto px-4">
                    <div className="text-center mb-12">
                        <h2 className="text-3xl font-bold text-slate-800 dark:text-white mb-4">Our Values</h2>
                        <p className="text-slate-600 dark:text-slate-400 text-lg">Principles that guide everything we do</p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        {[
                            {
                                icon: 'fas fa-graduation-cap',
                                title: 'Excellence',
                                description: 'Commitment to highest quality standards in education',
                                color: 'from-blue-500 to-cyan-500'
                            },
                            {
                                icon: 'fas fa-heart',
                                title: 'Student Focus',
                                description: 'Putting student success at the center of everything',
                                color: 'from-green-500 to-emerald-500'
                            },
                            {
                                icon: 'fas fa-lightbulb',
                                title: 'Innovation',
                                description: 'Continuously improving and adapting to needs',
                                color: 'from-amber-500 to-orange-500'
                            },
                            {
                                icon: 'fas fa-handshake',
                                title: 'Integrity',
                                description: 'Honest, transparent, and ethical practices',
                                color: 'from-purple-500 to-pink-500'
                            }
                        ].map((value, index) => (
                            <div key={index} className="bg-white dark:bg-slate-700 rounded-xl p-6 shadow-lg border border-slate-200 dark:border-slate-600 text-center">
                                <div className={`w-12 h-12 bg-gradient-to-br ${value.color} rounded-xl flex items-center justify-center mx-auto mb-4`}>
                                    <i className={`${value.icon} text-white text-lg`}></i>
                                </div>
                                <h4 className="font-bold text-slate-800 dark:text-white mb-2">{value.title}</h4>
                                <p className="text-slate-600 dark:text-slate-400 text-sm">{value.description}</p>
                            </div>
                        ))}
                    </div>
                </div>
            </div>

            {/* Founder Section */}
            <div className="py-16 bg-white dark:bg-slate-900">
                <div className="max-w-4xl mx-auto px-4">
                    <div className="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-slate-800 dark:to-slate-700 rounded-2xl p-8 shadow-lg border border-slate-200 dark:border-slate-600">
                        <div className="flex flex-col md:flex-row items-center gap-8">
                            <div className="flex-shrink-0">
                                <img 
                                    src={DATA.logoUrl} 
                                    alt="Ganesh Dahal" 
                                    className="w-32 h-32 rounded-2xl object-cover border-4 border-white dark:border-slate-600 shadow-lg"
                                />
                            </div>
                            <div className="flex-1 text-center md:text-left">
                                <h3 className="text-2xl font-bold text-slate-800 dark:text-white mb-2">Ganesh Dahal</h3>
                                <p className="text-blue-600 dark:text-blue-400 font-semibold mb-4">Founder & Educator</p>
                                <p className="text-slate-600 dark:text-slate-400 leading-relaxed">
                                    "Our vision for Ganesh Dai Academy stems from a deep belief in the transformative 
                                    power of education. We're committed to providing students with the resources and 
                                    guidance they need to not just succeed academically, but to develop into confident, 
                                    capable individuals ready to make their mark on the world."
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {/* Features */}
            <div className="py-16 bg-slate-50 dark:bg-slate-800">
                <div className="max-w-6xl mx-auto px-4">
                    <div className="text-center mb-12">
                        <h2 className="text-3xl font-bold text-slate-800 dark:text-white mb-4">What Sets Us Apart</h2>
                        <p className="text-slate-600 dark:text-slate-400 text-lg">Comprehensive solutions for modern education</p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                        {[
                            {
                                icon: 'fas fa-book-open',
                                title: 'Comprehensive Resources',
                                items: ['Subject Notes', 'Model Questions', 'Reference Materials']
                            },
                            {
                                icon: 'fas fa-tools',
                                title: 'Learning Tools',
                                items: ['GPA Calculator', 'Study Planner', 'Progress Tracking']
                            },
                            {
                                icon: 'fas fa-chalkboard-teacher',
                                title: 'Expert Support',
                                items: ['Quality Content', 'Regular Updates', 'Student-focused']
                            }
                        ].map((feature, index) => (
                            <div key={index} className="bg-white dark:bg-slate-700 rounded-xl p-6 shadow-lg border border-slate-200 dark:border-slate-600">
                                <div className="w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center mb-4">
                                    <i className={`${feature.icon} text-white text-lg`}></i>
                                </div>
                                <h4 className="font-bold text-slate-800 dark:text-white mb-4">{feature.title}</h4>
                                <ul className="space-y-2">
                                    {feature.items.map((item, itemIndex) => (
                                        <li key={itemIndex} className="flex items-center gap-3 text-slate-600 dark:text-slate-400">
                                            <i className="fas fa-check text-green-500 text-sm"></i>
                                            <span>{item}</span>
                                        </li>
                                    ))}
                                </ul>
                            </div>
                        ))}
                    </div>
                </div>
            </div>

            {/* Contact & Social */}
            <div className="py-16 bg-white dark:bg-slate-900">
                <div className="max-w-4xl mx-auto px-4">
                    <div className="bg-slate-50 dark:bg-slate-800 rounded-2xl p-8 shadow-lg border border-slate-200 dark:border-slate-600">
                        <div className="text-center mb-8">
                            <h3 className="text-2xl font-bold text-slate-800 dark:text-white mb-2">Get In Touch</h3>
                            <p className="text-slate-600 dark:text-slate-400">Connect with us for support and updates</p>
                        </div>

                        <div className="flex flex-col sm:flex-row gap-4 justify-center">
                            <a 
                                href={DATA.socials.youtube}
                                target="_blank"
                                rel="noopener noreferrer"
                                className="flex items-center gap-3 bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-xl font-semibold transition-colors"
                            >
                                <i className="fab fa-youtube text-lg"></i>
                                YouTube Channel
                            </a>
                            <a 
                                href={DATA.socials.facebook}
                                target="_blank"
                                rel="noopener noreferrer"
                                className="flex items-center gap-3 bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-xl font-semibold transition-colors"
                            >
                                <i className="fab fa-facebook text-lg"></i>
                                Facebook Page
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            {/* Footer Note */}
            <div className="py-8 bg-slate-50 dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700">
                <div className="max-w-6xl mx-auto px-4 text-center">
                    <p className="text-slate-600 dark:text-slate-400">
                        © 2024 Ganesh Dai Academy. Committed to educational excellence.
                    </p>
                </div>
            </div>
        </div>
    );
};

 const MyStudyList = ({ bookmarkedNotes, allNotes, onBookmark, onViewNote, isPremium, onGoPremium, setActiveSection }) => {
    const [showHelpNoteModal, setShowHelpNoteModal] = useState(false);
    const [hoveredNote, setHoveredNote] = useState(null);
    const [searchTerm, setSearchTerm] = useState('');
    
    const notes = useMemo(() => 
        allNotes.filter(n => bookmarkedNotes.includes(n.id))
                .filter(note => note.title.toLowerCase().includes(searchTerm.toLowerCase())),
        [bookmarkedNotes, allNotes, searchTerm]
    );

    const subjects = [...new Set(notes.map(note => note.subject))];
    const [selectedSubject, setSelectedSubject] = useState('all');

    const filteredNotes = selectedSubject === 'all' 
        ? notes 
        : notes.filter(note => note.subject === selectedSubject);

    const StudyNoteCard = ({ note, index }) => (
        <div 
            className="group relative"
            onMouseEnter={() => setHoveredNote(index)}
            onMouseLeave={() => setHoveredNote(null)}
        >
            {/* Animated Glow Effect */}
            <div className={`absolute -inset-1 bg-gradient-to-r from-teal-500 to-cyan-500 rounded-2xl blur opacity-0 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 ${
                hoveredNote === index ? 'animate-pulse' : ''
            }`}></div>
            
            {/* Main Card */}
            <div className="relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-xl border border-slate-200 dark:border-slate-700 hover:shadow-2xl transition-all duration-500 group-hover:-translate-y-2 backdrop-blur-sm">
                {/* Floating Bookmark Icon */}
                <div className="absolute -top-3 -left-3">
                    <div className="w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl flex items-center justify-center shadow-2xl transform group-hover:scale-110 group-hover:rotate-12 transition-all duration-500">
                        <i className="fas fa-bookmark text-white text-sm"></i>
                    </div>
                </div>

                {/* Premium Badge */}
                {note.isPremium && (
                    <div className="absolute -top-2 -right-2">
                        <div className="bg-gradient-to-r from-amber-500 to-orange-500 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg flex items-center gap-1">
                            <i className="fas fa-crown text-xs"></i>
                            PREMIUM
                        </div>
                    </div>
                )}

                {/* Content */}
                <div className="pt-2">
                    {/* Subject Tag */}
                    <div className="flex items-center gap-2 mb-3">
                        <div className={`w-8 h-8 rounded-lg bg-gradient-to-br ${
                            DATA.subjectData[note.subject]?.color || 'from-slate-500 to-slate-700'
                        } flex items-center justify-center`}>
                            <i className="fas fa-book text-white text-xs"></i>
                        </div>
                        <span className="text-xs font-semibold text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-full">
                            {note.subject}
                        </span>
                    </div>

                    {/* Title */}
                    <h3 className="font-bold text-lg text-slate-800 dark:text-white mb-3 leading-tight group-hover:bg-gradient-to-r group-hover:from-teal-600 group-hover:to-cyan-600 group-hover:bg-clip-text group-hover:text-transparent transition-all duration-500">
                        {note.title}
                    </h3>

                    {/* Meta Info */}
                    <div className="flex items-center justify-between text-sm text-slate-500 dark:text-slate-400 mb-4">
                        <span>Grade {note.grade}</span>
                        <span className="flex items-center gap-1">
                            <i className="fas fa-clock text-xs"></i>
                            Recently saved
                        </span>
                    </div>

                    {/* Action Buttons */}
                    <div className="flex gap-2">
                        <button
                            onClick={() => (note.isPremium && !isPremium) ? onGoPremium() : onViewNote(note)}
                            className={`flex-1 py-2 px-4 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 ${
                                note.isPremium && !isPremium
                                    ? 'bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white'
                                    : 'bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white'
                            }`}
                        >
                            {note.isPremium && !isPremium ? (
                                <>
                                    <i className="fas fa-lock text-sm"></i>
                                    Unlock
                                </>
                            ) : (
                                <>
                                    <i className="fas fa-eye text-sm"></i>
                                    Study Now
                                </>
                            )}
                        </button>
                        
                        <button
                            onClick={(e) => { e.stopPropagation(); onBookmark(note.id); }}
                            className="w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-lg flex items-center justify-center transition-all duration-300 transform hover:scale-110 shadow-lg hover:shadow-xl"
                        >
                            <i className="fas fa-trash text-sm"></i>
                        </button>
                    </div>
                </div>

                {/* Hover Border Animation */}
                <div className="absolute inset-0 rounded-2xl bg-gradient-to-r from-teal-500 to-cyan-500 opacity-0 group-hover:opacity-100 transition duration-500 -z-10">
                    <div className="absolute inset-[2px] rounded-2xl bg-white dark:bg-slate-800"></div>
                </div>
            </div>
        </div>
    );

    return (
        <div className="min-h-screen bg-gradient-to-br from-slate-50 via-teal-50/20 to-cyan-50/20 dark:from-slate-900 dark:via-teal-900/10 dark:to-cyan-900/10">
            {/* Animated Background */}
            <div className="fixed top-0 left-0 w-96 h-96 bg-teal-200 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float"></div>
            <div className="fixed top-20 right-20 w-96 h-96 bg-cyan-200 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-2000"></div>
            <div className="fixed bottom-20 left-1/3 w-80 h-80 bg-emerald-200 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-4000"></div>

            <div className="relative z-10">
                <div className="pt-8 pb-12 px-4">
                    <div className="max-w-7xl mx-auto">
                        {/* Header Section */}
                        <div className="text-center mb-8">
                            <div className="inline-block relative mb-6">
                                <div className="absolute -inset-4 bg-gradient-to-r from-teal-500 to-cyan-500 rounded-2xl blur-2xl opacity-30 animate-pulse"></div>
                                <div className="relative bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl px-8 py-6 shadow-2xl border border-white/20 dark:border-slate-700/50">
                                    <h1 className="text-5xl font-bold bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent font-display mb-4">
                                        My Study List
                                    </h1>
                                    <p className="text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto leading-relaxed">
                                        Your personalized collection of <span className="font-semibold text-teal-600 dark:text-teal-400">saved resources</span> for focused learning
                                    </p>
                                </div>
                            </div>
                        </div>

                        {/* Stats & Actions */}
                        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                            <div className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg border border-white/20 dark:border-slate-700/50 text-center">
                                <div className="w-16 h-16 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg">
                                    <i className="fas fa-bookmark text-white text-xl"></i>
                                </div>
                                <div className="text-3xl font-bold text-slate-800 dark:text-white mb-2">{notes.length}</div>
                                <div className="text-slate-600 dark:text-slate-400">Saved Notes</div>
                            </div>
                            
                            <div className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg border border-white/20 dark:border-slate-700/50 text-center">
                                <div className="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg">
                                    <i className="fas fa-books text-white text-xl"></i>
                                </div>
                                <div className="text-3xl font-bold text-slate-800 dark:text-white mb-2">{subjects.length}</div>
                                <div className="text-slate-600 dark:text-slate-400">Subjects</div>
                            </div>
                            
                            <div className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg border border-white/20 dark:border-slate-700/50 text-center">
                                <div className="w-16 h-16 bg-gradient-to-br from-amber-500 to-orange-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg">
                                    <i className="fas fa-crown text-white text-xl"></i>
                                </div>
                                <div className="text-3xl font-bold text-slate-800 dark:text-white mb-2">
                                    {notes.filter(n => n.isPremium).length}
                                </div>
                                <div className="text-slate-600 dark:text-slate-400">Premium</div>
                            </div>
                            
                            <div className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl p-6 shadow-lg border border-white/20 dark:border-slate-700/50 text-center">
                                <button
                                    onClick={() => setShowHelpNoteModal(true)}
                                    className="w-full h-full flex flex-col items-center justify-center group"
                                >
                                    <div className="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mb-4 shadow-lg transform group-hover:scale-110 transition-transform duration-300">
                                        <i className="fas fa-plus text-white text-xl"></i>
                                    </div>
                                    <div className="text-lg font-bold text-slate-800 dark:text-white mb-2">Add Note</div>
                                    <div className="text-slate-600 dark:text-slate-400 text-sm">Request Help</div>
                                </button>
                            </div>
                        </div>

                        {/* Search & Filter */}
                        <div className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl p-6 shadow-2xl border border-white/20 dark:border-slate-700/50 mb-8">
                            <div className="flex flex-col lg:flex-row gap-4">
                                {/* Search */}
                                <div className="flex-1 relative">
                                    <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                        <i className="fas fa-search text-teal-500 text-lg"></i>
                                    </div>
                                    <input
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                        placeholder="Search your saved notes..."
                                        className="w-full pl-12 pr-4 py-3 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-300 text-slate-800 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 shadow-lg"
                                    />
                                </div>

                                {/* Subject Filter */}
                                <div className="flex gap-2 overflow-x-auto pb-2">
                                    <button
                                        onClick={() => setSelectedSubject('all')}
                                        className={`px-4 py-2 rounded-xl font-semibold transition-all duration-300 whitespace-nowrap ${
                                            selectedSubject === 'all'
                                                ? 'bg-gradient-to-r from-teal-500 to-cyan-500 text-white shadow-lg'
                                                : 'bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600 shadow-md'
                                        }`}
                                    >
                                        All Subjects
                                    </button>
                                    {subjects.map(subject => (
                                        <button
                                            key={subject}
                                            onClick={() => setSelectedSubject(subject)}
                                            className={`px-4 py-2 rounded-xl font-semibold transition-all duration-300 whitespace-nowrap ${
                                                selectedSubject === subject
                                                    ? 'bg-gradient-to-r from-teal-500 to-cyan-500 text-white shadow-lg'
                                                    : 'bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600 shadow-md'
                                            }`}
                                        >
                                            {subject}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* Notes Grid */}
                        {filteredNotes.length > 0 ? (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {filteredNotes.map((note, index) => (
                                    <div 
                                        key={note.id}
                                        className="animate-fadeInUp"
                                        style={{ animationDelay: `${index * 100}ms` }}
                                    >
                                        <StudyNoteCard note={note} index={index} />
                                    </div>
                                ))}
                            </div>
                        ) : (
                            /* Empty State */
                            <div className="text-center py-20">
                                <div className="relative inline-block mb-8">
                                    <div className="w-40 h-40 bg-gradient-to-br from-teal-400 to-cyan-500 rounded-3xl flex items-center justify-center mx-auto shadow-2xl transform rotate-6 animate-float">
                                        <i className="fas fa-bookmark text-white text-5xl"></i>
                                    </div>
                                    <div className="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full animate-ping"></div>
                                    <div className="absolute -bottom-2 -left-2 w-6 h-6 bg-cyan-400 rounded-full animate-ping animation-delay-1000"></div>
                                </div>
                                
                                <h3 className="text-3xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 dark:from-white dark:to-slate-300 bg-clip-text text-transparent mb-4">
                                    {notes.length === 0 ? 'Your Study List is Empty' : 'No Notes Found'}
                                </h3>
                                <p className="text-slate-600 dark:text-slate-400 text-lg mb-8 max-w-md mx-auto">
                                    {notes.length === 0 
                                        ? 'Start building your personalized study collection by bookmarking notes that matter to you.'
                                        : 'Try adjusting your search terms or filters to find what you\'re looking for.'
                                    }
                                </p>
                                
                                <div className="flex flex-col sm:flex-row gap-4 justify-center">
                                    <button 
                                        onClick={() => setActiveSection({name: 'explorer'})}
                                        className="bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center gap-3"
                                    >
                                        <i className="fas fa-compass"></i>
                                        Explore Notes
                                    </button>
                                    <button 
                                        onClick={() => { setSearchTerm(''); setSelectedSubject('all'); }}
                                        className="border-2 border-teal-500 text-teal-500 hover:bg-teal-500/10 font-bold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105"
                                    >
                                        Clear Filters
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* Progress Section */}
                        {filteredNotes.length > 0 && (
                            <div className="mt-12 bg-gradient-to-r from-teal-500 to-cyan-500 rounded-2xl p-8 shadow-2xl relative overflow-hidden">
                                <div className="absolute inset-0 bg-black/10"></div>
                                <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32"></div>
                                
                                <div className="relative z-10 text-white text-center">
                                    <h3 className="text-2xl font-bold mb-4">Study Progress</h3>
                                    <div className="flex items-center justify-center gap-8">
                                        <div className="text-center">
                                            <div className="text-3xl font-bold mb-1">{filteredNotes.length}</div>
                                            <div className="text-white/80 text-sm">Saved Notes</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-3xl font-bold mb-1">
                                                {Math.round((filteredNotes.filter(n => !n.isPremium || isPremium).length / filteredNotes.length) * 100)}%
                                            </div>
                                            <div className="text-white/80 text-sm">Accessible</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-3xl font-bold mb-1">{subjects.length}</div>
                                            <div className="text-white/80 text-sm">Subjects</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            </div>

            {/* Help Note Modal */}
            {showHelpNoteModal && <HelpNoteModal onClose={() => setShowHelpNoteModal(false)} />}

            <style jsx>{`
                @keyframes float {
                    0%, 100% { transform: translateY(0px) rotate(0deg); }
                    50% { transform: translateY(-20px) rotate(5deg); }
                }
                @keyframes fadeInUp {
                    from {
                        opacity: 0;
                        transform: translateY(30px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                .animate-float {
                    animation: float 6s ease-in-out infinite;
                }
                .animate-fadeInUp {
                    animation: fadeInUp 0.6s ease-out forwards;
                }
                .animation-delay-2000 {
                    animation-delay: 2s;
                }
                .animation-delay-4000 {
                    animation-delay: 4s;
                }
                .animation-delay-1000 {
                    animation-delay: 1000ms;
                }
            `}</style>
        </div>
    );
};
    const GpaCalculator = ({ user, onDownload }) => {
        const streamInfo = DATA.streams.find(s => s.id === user.stream);
        const userSubjects = [...(streamInfo?.compulsory || []), ...(user.optionals || [])];
        const initialSubjects = userSubjects.map(name => ({ 
            name, 
            credits: DATA.subjectData[name]?.credits ?? 0, 
            grade: '' 
        })).filter(s => s.credits > 0);
        
        const [subjects, setSubjects] = useState(initialSubjects);

        const { gpa, percentage, results } = useMemo(() => {
            let totalCredits = 0, totalWeightedPoints = 0; 
            let hasNG = false;
            
            const detailedResults = subjects.map(s => {
                if(s.grade === 'NG') hasNG = true;
                const gp = DATA.gradePoints[s.grade] || 0.0;
                const weighted = gp * s.credits;
                
                if(s.grade && s.grade !== 'NG') { 
                    totalCredits += s.credits; 
                    totalWeightedPoints += weighted; 
                }
                
                return { ...s, gp, weighted };
            });
            
            const finalGpa = totalCredits > 0 ? (totalWeightedPoints / totalCredits) : 0.0;
            
            return { 
                gpa: hasNG ? '0.00' : finalGpa.toFixed(2), 
                percentage: hasNG ? '0.00' : (finalGpa / 4 * 100).toFixed(2), 
                results: detailedResults 
            };
        }, [subjects]);

        const GPAResultCard = ({ user, gpa, results, percentage }) => (
            <div id="gpa-result-card" className="p-8 bg-white text-slate-800 rounded-lg shadow-inner">
                <div className="flex items-center justify-between pb-4 border-b-2">
                    <div className="flex items-center gap-3">
                        <img src={DATA.logoUrl} alt="Logo" className="h-16 w-16 rounded-full" />
                        <div>
                            <h2 className="text-2xl font-bold font-display">{DATA.appName}</h2>
                            <p className="text-sm text-slate-500">Grade Point Average (GPA) Report</p>
                        </div>
                    </div>
                    <div className="text-right">
                        <p className="font-bold">{user.name}</p>
                        <p className="text-sm text-slate-600">Grade {user.grade} ({user.stream})</p>
                    </div>
                </div>
                
                <div className="my-6">
                    <table className="w-full text-left">
                        <thead>
                            <tr className="bg-slate-100">
                                <th className="p-2">Subject</th>
                                <th className="p-2 text-center">Grade</th>
                                <th className="p-2 text-center">Grade Point</th>
                            </tr>
                        </thead>
                        <tbody>
                            {results.map(r => r.grade && (
                                <tr key={r.name} className="border-b border-slate-100">
                                    <td className="p-2">{r.name}</td>
                                    <td className="p-2 text-center font-semibold">{r.grade}</td>
                                    <td className="p-2 text-center">{r.grade === 'NG' ? 'N/A' : r.gp.toFixed(2)}</td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
                
                <div className="text-center mt-6 p-4 bg-teal-50 rounded-lg flex justify-around">
                    <div className="px-4">
                        <p className="text-lg font-semibold text-teal-800">Final GPA</p>
                        <p className="text-5xl font-extrabold text-teal-600 font-display">{gpa}</p>
                    </div>
                    <div className="border-l-2"></div>
                    <div className="px-4">
                        <p className="text-lg font-semibold text-teal-800">Percentage</p>
                        <p className="text-5xl font-extrabold text-teal-600 font-display">{percentage}%</p>
                    </div>
                </div>
                
                <p className="text-xs text-center text-slate-400 mt-4">Generated on {new Date().toLocaleDateString()}</p>
            </div>
        );
        
        return (
            <div className="card p-6">
                <h2 className="text-2xl font-bold font-display mb-4">NEB GPA & Percentage Calculator</h2>
                
                <div className="overflow-x-auto">
                    <table className="w-full text-left">
                        <thead>
                            <tr className="bg-slate-100 dark:bg-slate-700/50">
                                <th className="p-2 rounded-tl-lg">Subject</th>
                                <th className="p-2">Credits</th>
                                <th className="p-2 rounded-tr-lg">Grade</th>
                            </tr>
                        </thead>
                        <tbody>
                            {subjects.map((s, i) => (
                                <tr key={i} className="border-b dark:border-slate-700">
                                    <td className="p-2 font-semibold">{s.name}</td>
                                    <td className="p-2 text-center">{s.credits}</td>
                                    <td className="p-2">
                                        <select 
                                            value={s.grade} 
                                            onChange={(e) => setSubjects(subjects.map((sub, idx) => 
                                                i === idx ? {...sub, grade: e.target.value} : sub
                                            ))} 
                                            className="w-full py-2 px-3 rounded-md border dark:border-slate-600 bg-white dark:bg-slate-700"
                                        >
                                            <option value="">-</option>
                                            {Object.keys(DATA.gradePoints).map(g => (
                                                <option key={g} value={g}>{g}</option>
                                            ))}
                                        </select>
                                    </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
                
                <div className="mt-6 border-t dark:border-slate-700 pt-4">
                    <GPAResultCard user={user} gpa={gpa} results={results} percentage={percentage} />
                    
                    <button 
                        onClick={() => onDownload('gpa-result-card')} 
                        className="w-full mt-4 gradient-button font-bold py-3 rounded-full flex items-center justify-center gap-2 touch-target"
                    >
                        <i className="fas fa-download"></i> Download Report Card
                    </button>
                </div>
            </div>
        );
    };

    const UnitConverter = () => {
        const [category, setCategory] = useState('length'); 
        const [inputValue, setInputValue] = useState(1); 
        const [fromUnit, setFromUnit] = useState('m'); 
        const [toUnit, setToUnit] = useState('cm');
        
        const units = { 
            length: { m: 1, cm: 0.01, ft: 0.3048, in: 0.0254, km: 1000, yd: 0.9144, mi: 1609.34 }, 
            weight: { kg: 1, g: 0.001, lb: 0.453592 }, 
            temperature: {} 
        };
        
        const conversionResult = useMemo(() => {
            const val = parseFloat(inputValue);
            if(isNaN(val)) return 0;
            
            if (category === 'temperature') { 
                if(fromUnit === 'C' && toUnit === 'F') return (val * 9/5) + 32; 
                if(fromUnit === 'F' && toUnit === 'C') return (val - 32) * 5/9; 
                return val; 
            }
            
            const valueInBase = val * (units[category]?.[fromUnit] ?? 1); 
            const result = valueInBase / (units[category]?.[toUnit] ?? 1); 
            return parseFloat(result.toFixed(5));
        }, [inputValue, fromUnit, toUnit, category]);
        
        const handleCategoryChange = (cat) => { 
            setCategory(cat); 
            if(cat === 'length') { setFromUnit('m'); setToUnit('cm'); } 
            if(cat === 'weight') { setFromUnit('kg'); setToUnit('g'); } 
            if(cat === 'temperature') { setFromUnit('C'); setToUnit('F'); } 
        };
        
        const currentUnits = category === 'temperature' ? { 'C': 'Celsius', 'F': 'Fahrenheit' } : units[category];
        
        return (
            <div className="card p-6">
                <h3 className="font-bold text-xl mb-4">Unit Converter</h3>
                
                <div className="flex gap-2 mb-4">
                    {Object.keys(units).map(cat => (
                        <button 
                            key={cat} 
                            onClick={()=>handleCategoryChange(cat)} 
                            className={`capitalize flex-1 py-2 text-sm font-semibold rounded-full touch-target ${category === cat 
                                ? 'bg-teal-500 text-white' 
                                : 'bg-slate-200 dark:bg-slate-700'}`}
                        >
                            {cat}
                        </button>
                    ))}
                </div>
                
                <div className="flex items-center gap-2">
                    <input 
                        type="number" 
                        value={inputValue} 
                        onChange={e=>setInputValue(e.target.value)} 
                        className="w-full p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600" 
                    />
                    <select 
                        value={fromUnit} 
                        onChange={e=>setFromUnit(e.target.value)} 
                        className="p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"
                    >
                        {Object.keys(currentUnits).map(u => (
                            <option key={u} value={u}>{u}</option>
                        ))}
                    </select>
                </div>
                
                <div className="text-center my-2 font-bold text-2xl">=</div>
                
                <div className="flex items-center gap-2">
                    <input 
                        type="number" 
                        value={conversionResult} 
                        readOnly 
                        className="w-full p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600 bg-slate-100 dark:bg-slate-900" 
                    />
                    <select 
                        value={toUnit} 
                        onChange={e=>setToUnit(e.target.value)} 
                        className="p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"
                    >
                        {Object.keys(currentUnits).map(u => (
                            <option key={u} value={u}>{u}</option>
                        ))}
                    </select>
                </div>
            </div>
        );
    };

    const PomodoroTimer = () => {
        const [time, setTime] = useState(25 * 60); 
        const [isActive, setIsActive] = useState(false); 
        const [duration, setDuration] = useState(25 * 60);
        
        useEffect(() => { 
            let interval = null; 
            if (isActive && time > 0) { 
                interval = setInterval(() => { setTime(t => t - 1); }, 1000); 
            } else if (time === 0) { 
                setIsActive(false); 
            } 
            return () => clearInterval(interval); 
        }, [isActive, time]);
        
        const toggle = () => setIsActive(!isActive);
        
        const reset = (newDuration) => { 
            setDuration(newDuration); 
            setTime(newDuration); 
            setIsActive(false); 
        };
        
        const formatTime = (t) => `${String(Math.floor(t / 60)).padStart(2,'0')}:${String(t % 60).padStart(2,'0')}`;
        
        return (
            <div className="card p-6 text-center">
                <h3 className="font-bold text-xl mb-4">Pomodoro Timer</h3>
                
                <div className="flex justify-center gap-2 mb-4">
                    {[25, 45, 60].map(d => (
                        <button 
                            key={d} 
                            onClick={()=>reset(d * 60)} 
                            className={`px-3 py-1 text-sm font-semibold rounded-full touch-target ${duration === d * 60 
                                ? 'bg-teal-500 text-white' 
                                : 'bg-slate-200 dark:bg-slate-700'}`}
                        >
                            {d} min
                        </button>
                    ))}
                </div>
                
                <div className="text-6xl font-bold font-mono p-4 rounded-lg text-teal-500">
                    {formatTime(time)}
                </div>
                
                <div className="mt-4 flex gap-4 justify-center">
                    <button 
                        onClick={toggle} 
                        className="px-6 py-2 rounded-full font-semibold bg-slate-200 dark:bg-slate-700 touch-target"
                    >
                        {isActive ? 'Pause' : 'Start'}
                    </button>
                    <button 
                        onClick={()=>reset(duration)} 
                        className="px-6 py-2 rounded-full font-semibold bg-slate-200 dark:bg-slate-700 touch-target"
                    >
                        Reset
                    </button>
                </div>
            </div>
        );
    };

    const BrainTeaser = () => {
        const [teaser, setTeaser] = useState(DATA.brainTeasers[0]);
        const [guess, setGuess] = useState('');
        const [result, setResult] = useState('');
        
        const checkAnswer = (e) => {
            e.preventDefault();
            if(guess.toLowerCase().trim() === teaser.answer.toLowerCase()) { 
                setResult('correct'); 
            } else { 
                setResult('incorrect'); 
            }
        };
        
        const nextTeaser = () => {
            setResult(''); 
            setGuess('');
            setTeaser(DATA.brainTeasers[Math.floor(Math.random() * DATA.brainTeasers.length)]);
        };
        
        return (
            <div className="card p-6">
                <h3 className="font-bold text-xl mb-4">Brain Teaser</h3>
                <p className="text-slate-600 dark:text-slate-400 italic mb-4">"{teaser.question}"</p>
                
                <form onSubmit={checkAnswer} className="flex gap-2">
                    <input 
                        type="text" 
                        value={guess} 
                        onChange={e=>setGuess(e.target.value)} 
                        placeholder="Your answer..." 
                        className="w-full p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600" 
                    />
                    <button 
                        type="submit" 
                        className="px-4 py-2 font-semibold rounded-md bg-teal-500 text-white touch-target"
                    >
                        Check
                    </button>
                </form>
                
                {result && (
                    <div className={`mt-3 p-2 rounded-md text-center font-semibold ${result === 'correct' 
                        ? 'bg-green-100 text-green-700' 
                        : 'bg-red-100 text-red-700'}`}
                    >
                        {result === 'correct' ? 'Correct!' : 'Try again!'}
                    </div>
                )}
                
                <button 
                    onClick={nextTeaser} 
                    className="text-sm mt-3 text-slate-500 hover:text-teal-500 touch-target"
                >
                    Next Teaser <i className="fas fa-sync-alt"></i>
                </button>
            </div>
        );
    }

    const QuickTools = ({ user }) => {
        const handleDownload = (elementId) => {
            html2canvas(document.getElementById(elementId), { scale: 2 }).then(canvas => { 
                const link = document.createElement('a'); 
                link.download = `GDA_GPA_Report_${user.name}.png`; 
                link.href = canvas.toDataURL('image/png'); 
                link.click(); 
            });
        };
        
        return (
            <div className="section animate-fadeIn">
                <h2 className="text-3xl font-bold font-display mb-6">Quick Tools</h2>
                
                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 items-start">
                    <GpaCalculator user={user} onDownload={handleDownload} />
                    
                    <div className="space-y-6">
                        <UnitConverter />
                        <PomodoroTimer />
                        <BrainTeaser />
                    </div>
                </div>
            </div>
        );
    };

    const ExamPrepSection = ({ user }) => {
        const [activeTab, setActiveTab] = useState('routines');
        
        const ExamChecklist = ({ checklist }) => {
            const [checkedItems, setCheckedItems] = useState(() => getJSONFromLocalStorage(checklist.id, []));
            
            const handleCheck = (item) => { 
                const newChecked = checkedItems.includes(item) 
                    ? checkedItems.filter(i => i !== item) 
                    : [...checkedItems, item]; 
                setCheckedItems(newChecked); 
                setJSONToLocalStorage(checklist.id, newChecked);
            };
            
            const progress = (checklist.items.length > 0) 
                ? (checkedItems.length / checklist.items.length) * 100 
                : 0;
                
            return (
                <div className="card p-6">
                    <h3 className="font-bold text-xl mb-4">{checklist.subject} Revision Checklist</h3>
                    
                    <div className="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5 mb-4">
                        <div 
                            className="bg-teal-500 h-2.5 rounded-full transition-all duration-300" 
                            style={{width: `${progress}%`}}
                        ></div>
                    </div>
                    
                    <div className="space-y-3">
                        {checklist.items.map(item => (
                            <label key={item} className="flex items-center gap-3 cursor-pointer">
                                <input 
                                    type="checkbox" 
                                    checked={checkedItems.includes(item)} 
                                    onChange={() => handleCheck(item)} 
                                    className="h-4 w-4 rounded border-gray-300 text-teal-600 focus:ring-teal-500" 
                                />
                                <span>{item}</span>
                            </label>
                        ))}
                    </div>
                </div>
            );
        };
        
        const streamInfo = DATA.streams.find(s => s.id === user.stream);
        const userSubjects = [...(streamInfo?.compulsory || []), ...(user.optionals || [])];
        const streamChecklists = DATA.examPreps.checklists.filter(c => userSubjects.includes(c.subject));
        
        return (
            <div className="section animate-fadeIn">
                <h2 className="text-3xl font-bold font-display mb-6">Exam Preparation</h2>
                
                <div className="flex border-b-2 dark:border-slate-700 mb-6 overflow-x-auto">
                    <button 
                        onClick={()=>setActiveTab('routines')} 
                        className={`px-4 py-2 font-semibold whitespace-nowrap touch-target ${activeTab === 'routines' 
                            ? 'border-b-2 border-teal-500 text-teal-500' 
                            : 'text-slate-500'}`}
                    >
                        Upcoming Exams
                    </button>
                    <button 
                        onClick={()=>setActiveTab('checklists')} 
                        className={`px-4 py-2 font-semibold whitespace-nowrap touch-target ${activeTab === 'checklists' 
                            ? 'border-b-2 border-teal-500 text-teal-500' 
                            : 'text-slate-500'}`}
                    >
                        Checklists
                    </button>
                    <button 
                        onClick={()=>setActiveTab('models')} 
                        className={`px-4 py-2 font-semibold whitespace-nowrap touch-target ${activeTab === 'models' 
                            ? 'border-b-2 border-teal-500 text-teal-500' 
                            : 'text-slate-500'}`}
                    >
                        Model Questions
                    </button>
                    <button 
                        onClick={()=>setActiveTab('quiz')} 
                        className={`px-4 py-2 font-semibold whitespace-nowrap touch-target ${activeTab === 'quiz' 
                            ? 'border-b-2 border-teal-500 text-teal-500' 
                            : 'text-slate-500'}`}
                    >
                        Quiz
                    </button>
                </div>
                
                <div>
                    {activeTab === 'routines' && (
                        <div className="card p-6">
                            <h3 className="font-bold text-xl mb-4">NEB Exam Routine (Sample)</h3>
                            <table className="w-full text-left">
                                <thead>
                                    <tr className="border-b-2 dark:border-slate-700">
                                        <th className="p-2">Subject</th>
                                        <th className="p-2">Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {DATA.examPreps.routines.map(r => (
                                        <tr key={r.subject} className="border-b dark:border-slate-800">
                                            <td className="p-2">{r.subject}</td>
                                            <td className="p-2">{r.date}</td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    )}
                    
                    {activeTab === 'checklists' && (
                        <div className="space-y-6">
                            {streamChecklists.map(c => (
                                <ExamChecklist key={c.id} checklist={c}/>
                            ))}
                        </div>
                    )}
                    
                    {activeTab === 'models' && (
                        <div className="card p-6">
                            <div className="space-y-3">
                                {DATA.examPreps.modelQuestions.map(mq => (
                                    <a 
                                        href={mq.link} 
                                        target="_blank" 
                                        key={mq.id} 
                                        className="block p-3 bg-slate-100 dark:bg-slate-700/50 rounded-md hover:bg-slate-200 dark:hover:bg-slate-700 font-semibold"
                                    >
                                        {mq.title} 
                                        {mq.isPremium && (
                                            <i className="fas fa-star text-amber-500 text-xs ml-1"></i>
                                        )}
                                    </a>
                                ))}
                            </div>
                        </div>
                    )}
                    
                    {activeTab === 'quiz' && (
                        <SubjectMasteryComponent />
                    )}
                </div>
            </div>
        );
    };

    // =================================================================================
    // ===== MAIN APP COMPONENT =====
    // =================================================================================
    const App = () => {
        const [user, setUser] = useState(null);
        const [isLoading, setIsLoading] = useState(true);
        const [activeSection, setActiveSection] = useState({ name: 'dashboard' });
        const [isPremium, setIsPremium] = useState(false);
        const [bookmarkedNotes, setBookmarkedNotes] = useState([]);
        const [lastViewedNoteId, setLastViewedNoteId] = useState(null);
        const [viewingNote, setViewingNote] = useState(null);
        const [showPaymentModal, setShowPaymentModal] = useState(false);
        const [showPresentationModal, setShowPresentationModal] = useState(false);
        const [showWelcomeCelebration, setShowWelcomeCelebration] = useState(false);
        const [showCertificateModal, setShowCertificateModal] = useState(false);
        const [isFirstTimeUser, setIsFirstTimeUser] = useState(false);
        const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

        useEffect(() => {
            const storedUser = getJSONFromLocalStorage('gdaUser', null);
            const isFirstTime = getJSONFromLocalStorage('gdaFirstTime', true);
            
            if (storedUser && storedUser.optionals) {
                setUser(storedUser);
                setIsPremium(getJSONFromLocalStorage(`gdaPremium_${storedUser.stream}`, false));
                setBookmarkedNotes(getJSONFromLocalStorage('gdaBookmarkedNotes', []));
                setLastViewedNoteId(getJSONFromLocalStorage('gdaLastViewedNoteId', null));
                
                if (isFirstTime) {
                    setIsFirstTimeUser(true);
                    setShowWelcomeCelebration(true);
                    setJSONToLocalStorage('gdaFirstTime', false);
                    
                    setTimeout(() => {
                        setShowWelcomeCelebration(false);
                        setShowCertificateModal(true);
                    }, 3000);
                }
            }
            setTimeout(() => setIsLoading(false), 1200);
        }, []);
        
        const handleSetupComplete = (name, stream, grade, optionals) => { 
            const newUser = { name, stream, grade, optionals }; 
            setUser(newUser); 
            setJSONToLocalStorage('gdaUser', newUser); 
            
            setIsFirstTimeUser(true);
            setShowWelcomeCelebration(true);
            setJSONToLocalStorage('gdaFirstTime', false);
            
            setTimeout(() => {
                setShowWelcomeCelebration(false);
                setShowCertificateModal(true);
            }, 3000);
        };
        
        const handleGradeChange = (newGrade) => {
            if (user) {
                const updatedUser = { ...user, grade: newGrade };
                setUser(updatedUser);
                setJSONToLocalStorage('gdaUser', updatedUser);
            }
        };
        
        const handleLogout = () => { 
            if (window.confirm("Are you sure you want to log out? This will clear your profile and all saved data.")) { 
                Object.keys(localStorage).filter(k => k.startsWith('gda') || k.endsWith('_checklist')).forEach(k => localStorage.removeItem(k)); 
                window.location.reload(); 
            } 
        };
        
        const handleBookmark = (noteId) => { 
            const newBookmarks = bookmarkedNotes.includes(noteId) 
                ? bookmarkedNotes.filter(id => id !== noteId) 
                : [...bookmarkedNotes, noteId]; 
            setBookmarkedNotes(newBookmarks); 
            setJSONToLocalStorage('gdaBookmarkedNotes', newBookmarks); 
        };
        
        const handleViewNote = (note) => { 
            setViewingNote(note); 
            setLastViewedNoteId(note.id); 
            setJSONToLocalStorage('gdaLastViewedNoteId', note.id); 
        };
        
        const handlePremiumUnlock = () => { 
            setIsPremium(true); 
            setJSONToLocalStorage(`gdaPremium_${user.stream}`, true); 
            setShowPaymentModal(false); 
            alert("Congratulations! Premium access for this stream has been unlocked."); 
        };

        const renderSection = () => {
            const lastViewedNote = DATA.notes[user.grade]?.find(n => n.id === lastViewedNoteId);
            
            switch(activeSection.name) {
                case 'dashboard': 
                    return <Dashboard user={user} setActiveSection={setActiveSection} lastViewedNote={lastViewedNote} onGradeChange={handleGradeChange} />;
                case 'explorer': 
                    return (
                        <NotesExplorer 
                            user={user} 
                            isPremium={isPremium} 
                            bookmarkedNotes={bookmarkedNotes} 
                            onBookmark={handleBookmark} 
                            onViewNote={handleViewNote} 
                            onGoPremium={() => setShowPaymentModal(true)} 
                        />
                    );
                case 'studylist': 
                    return (
                        <MyStudyList 
                            bookmarkedNotes={bookmarkedNotes} 
                            allNotes={DATA.notes[user.grade]} 
                            onBookmark={handleBookmark} 
                            onViewNote={handleViewNote} 
                            isPremium={isPremium} 
                            onGoPremium={() => setShowPaymentModal(true)} 
                            setActiveSection={setActiveSection}
                        />
                    );
                case 'tools': 
                    return <QuickTools user={user} />;
                case 'examprep': 
                    return <ExamPrepSection user={user} />;
                case 'library': 
                    return (
                        <DigitalLibrary 
                            user={user} 
                            isPremium={isPremium} 
                            onViewNote={handleViewNote} 
                            onGoPremium={() => setShowPaymentModal(true)} 
                        />
                    );
                case 'books': 
                    return (
                        <OutBooks 
                            user={user} 
                            isPremium={isPremium} 
                            onViewNote={handleViewNote} 
                            onGoPremium={() => setShowPaymentModal(true)} 
                        />
                    );
                    case 'videos': 
    return (
        <VideoSection 
            user={user} 
            isPremium={isPremium} 
            onGoPremium={() => setShowPaymentModal(true)} 
        />
    );
                case 'about': 
                    return <AboutSection user={user} />;
                default: 
                    return <Dashboard user={user} setActiveSection={setActiveSection} lastViewedNote={lastViewedNote} onGradeChange={handleGradeChange} />;
            }
        };

        if (isLoading) return <AppLoader />;
        if (!user) return <WelcomeScreen onSetupComplete={handleSetupComplete} />;

        const NavButton = ({ sectionName, icon, label, badgeCount }) => (
            <button 
                onClick={() => { setActiveSection({name: sectionName}); setMobileMenuOpen(false); }} 
                className={`w-full flex items-center justify-between gap-3 p-3 rounded-lg font-semibold text-left nav-link touch-target ${activeSection.name === sectionName ? 'active' : ''}`}
            >
                <div className="flex items-center gap-3">
                    <i className={`${icon} w-5 text-center`}></i> 
                    {label}
                </div>
                {badgeCount > 0 && (
                    <span className="text-xs font-bold bg-teal-500 text-white h-5 w-5 rounded-full grid place-items-center">
                        {badgeCount}
                    </span>
                )}
            </button>
        );
        
        const PremiumCard = () => (
            <div className="p-4 rounded-lg text-center bg-gradient-to-br from-amber-400 to-orange-500 text-white shadow-lg">
                <i className="fas fa-crown text-3xl opacity-80"></i>
                <h4 className="font-bold mt-2 font-display text-lg">Go Premium</h4>
                <p className="text-xs text-white/80 mt-1 mb-3">Unlock expert notes & model questions.</p>
                <button 
                    onClick={() => setShowPaymentModal(true)} 
                    className="bg-white text-amber-600 text-sm font-bold py-2 px-4 rounded-full w-full hover:scale-105 transition-transform animate-pulse touch-target"
                >
                    Upgrade Now
                </button>
            </div>
        );

        return (
            <Fragment>
                {showWelcomeCelebration && <WelcomeCelebration name={user.name} />}
                {showCertificateModal && <CertificateModal name={user.name} onContinue={() => setShowCertificateModal(false)} />}
                {viewingNote && <PdfViewerModal pdfInfo={viewingNote} onClose={() => setViewingNote(null)} />}
                {showPaymentModal && (
                    <PaymentModal 
                        onPaymentSuccess={handlePremiumUnlock} 
                        onClose={() => setShowPaymentModal(false)} 
                        userName={user.name} 
                        stream={user.stream} 
                    />
                )}
                {showPresentationModal && (
                    <PresentationRequestModal 
                        user={user} 
                        onClose={() => setShowPresentationModal(false)} 
                    />
                )}
                
                <div className="flex flex-col md:flex-row min-h-screen">
                    <button 
                        className="mobile-menu-toggle md:hidden"
                        onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
                    >
                        <i className="fas fa-bars"></i>
                    </button>

                    {mobileMenuOpen && (
                        <div 
                            className="overlay-mobile md:hidden"
                            onClick={() => setMobileMenuOpen(false)}
                        ></div>
                    )}
                    
                    <aside className={`desktop-sidebar ${mobileMenuOpen ? 'mobile-open' : ''} w-full md:w-64 bg-white dark:bg-slate-900 p-4 flex-shrink-0 md:border-r border-slate-200 dark:border-slate-800 flex flex-col`}>
                        <div>
                            <div className="text-center md:text-left mb-6 flex items-center gap-3">
                                <img src={DATA.logoUrl} alt="Logo" className="h-12 w-12 rounded-full" />
                                <div>
                                    <h2 className="text-xl font-bold font-display">{DATA.appName}</h2>
                                    <p className="text-sm text-slate-500">({user.grade}) {user.name}</p>
                                </div>
                            </div>
                            
                            <nav className="space-y-2">
                               <NavButton sectionName="dashboard" icon="fas fa-home-alt" label="Dashboard" />
                               <NavButton sectionName="explorer" icon="fas fa-compass" label="Note Explorer" />
                               <NavButton sectionName="studylist" icon="fas fa-bookmark" label="My Study List" badgeCount={bookmarkedNotes.length}/>
                               <NavButton sectionName="examprep" icon="fas fa-feather-alt" label="Exam Preps" />
                               <NavButton sectionName="tools" icon="fas fa-tools" label="Quick Tools" />
                               <NavButton sectionName="library" icon="fas fa-book-open" label="Digital Library" />
                               <NavButton sectionName="books" icon="fas fa-book" label="Out Books" />
                               <NavButton sectionName="about"   icon="fas fa-info-circle" label="About" />
                                <NavButton sectionName="videos" icon="fab fa-youtube" label="Video Lessons" />

                               <button 
                                   onClick={() => { setShowPresentationModal(true); setMobileMenuOpen(false); }} 
                                   className="w-full flex items-center gap-3 p-3 rounded-lg font-semibold text-left nav-link touch-target"
                               >
                                   <i className="fas fa-chalkboard-teacher w-5 text-center"></i> 
                                   Request Presentation
                               </button>
                            </nav>
                        </div>
                        
                        <div className="mt-auto pt-6">
                            {!isPremium ? <PremiumCard /> : (
                                <div className="p-4 text-center">
                                    <p className="font-semibold text-amber-500 flex items-center justify-center gap-2">
                                        <i className="fas fa-check-circle"></i> Premium Member
                                    </p>
                                </div>
                            )}
                            
                            <div className="mt-4 flex justify-center gap-6">
                                <a href={DATA.socials.youtube} target="_blank" className="text-slate-400 hover:text-red-500">
                                    <i className="fab fa-youtube text-xl"></i>
                                </a>
                                <a href={DATA.socials.facebook} target="_blank" className="text-slate-400 hover:text-blue-500">
                                    <i className="fab fa-facebook text-xl"></i>
                                </a>
                                <button onClick={handleLogout} className="text-slate-400 hover:text-red-500">
                                    <i className="fas fa-sign-out-alt text-xl"></i>
                                </button>
                            </div>
                        </div>
                    </aside>
                    
                    <main className="flex-1 bg-slate-50 dark:bg-slate-900">
                        <ErrorBoundary>
                            {renderSection()}
                        </ErrorBoundary>
                    </main>
                </div>
            </Fragment>
        );
    };

    ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>
